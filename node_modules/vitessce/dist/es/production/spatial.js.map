{"version":3,"sources":["../webpack/bootstrap","../external \"react\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","app/state/hooks.js","layers/heatmap-constants.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","components/utils.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../external \"lodash/isEqual\"","components/sets/constants.js","utils.js","components/sets/utils.js","../external \"@material-ui/core/styles\"","components/spatial/constants.js","components/sets/cell-set-utils.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","loaders/errors/AbstractLoaderError.js","loaders/errors/LoaderFetchError.js","loaders/errors/LoaderValidationError.js","loaders/errors/LoaderNotFoundError.js","loaders/errors/index.js","../external \"deck.gl\"","components/hooks.js","components/data-hooks.js","app/state/coordination.js","../external \"@deck.gl/core\"","../external \"@hms-dbmi/viv\"","../external \"mathjs\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","components/classNames.js","../external \"zustand\"","../external \"@luma.gl/constants\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","components/LoadingIndicator.js","components/TitleInfo.js","../external \"@deck.gl/layers\"","components/shared-mui/styles.js","../external \"d3-array\"","../external \"@material-ui/core/colors\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../external \"@material-ui/core/IconButton\"","components/shared-mui/components.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","components/spatial/utils.js","../external \"@material-ui/core/MenuItem\"","../external \"lodash/range\"","../external \"nebula.gl\"","../external \"@material-ui/icons/ArrowDropDown\"","../external \"@material-ui/icons/ArrowDropUp\"","../external \"lodash/debounce\"","../external \"@turf/helpers\"","../external \"uuid/v4\"","../external \"@material-ui/core/TableCell\"","../external \"@material-ui/core/Paper\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/superPropBase.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/get.js","../external \"lodash\"","../external \"math.gl\"","../external \"@material-ui/icons/CloudDownload\"","../external \"@material-ui/core/Link\"","../external \"@material-ui/icons/Settings\"","../external \"@material-ui/icons/Close\"","../external \"@material-ui/core/CircularProgress\"","../external \"@material-ui/core/Popper\"","../external \"@material-ui/core/MenuList\"","../external \"@material-ui/core/ClickAwayListener\"","../external \"zustand/shallow\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../external \"short-number\"","../external \"lodash/isNil\"","../external \"@material-ui/core/Select\"","../external \"tinycolor2\"","components/tooltip/Tooltip2D.js","components/tooltip/TooltipContent.js","components/shared-plot-options/styles.js","../external \"@material-ui/core/TableRow\"","components/tooltip/Tooltip.js","components/interpolate-colors.js","../external \"@luma.gl/core\"","../external \"@turf/concave\"","../external \"@turf/centroid\"","layers/SelectionLayer.js","layers/selection-utils.js","layers/SelectablePolygonLayer.js","layers/SelectableScatterplotLayer.js","layers/index.js","../external \"@nebula.gl/edit-modes\"","../external \"regenerator-runtime\"","layers/HeatmapCompositeTextLayer.js","layers/PixelatedBitmapLayer.js","layers/heatmap-bitmap-layer-shaders.js","layers/HeatmapBitmapLayer.js","../external \"@material-ui/core/Box\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js","../external \"d3-quadtree\"","components/shared-spatial-scatterplot/quadtree.js","components/shared-plot-options/OptionsContainer.js","components/shared-plot-options/CellColorEncodingOption.js","assets/tools/near_me.svg","assets/tools/selection_rectangle.svg","assets/tools/selection_lasso.svg","components/shared-spatial-scatterplot/ToolMenu.js","components/shared-spatial-scatterplot/cursor.js","components/shared-spatial-scatterplot/AbstractSpatialOrScatterplot.js","components/spatial/Spatial.js","../external \"@deck.gl/extensions\"","../external \"@turf/boolean-within\"","../external \"@turf/boolean-contains\"","../external \"@turf/boolean-overlap\"","../external \"@turf/boolean-point-in-polygon\"","../external \"@material-ui/core/Table\"","../external \"@material-ui/core/TableBody\"","../external \"@material-ui/core/TableContainer\"","components/spatial/SpatialOptions.js","components/spatial/SpatialTooltipSubscriber.js","components/spatial/SpatialSubscriber.js","components/spatial/index.js"],"names":["useViewConfigStore","create","set","viewConfig","loaders","setViewConfig","setLoaders","setCoordinationValue","parameter","scope","value","state","coordinationSpace","removeComponent","i","newLayout","layout","slice","splice","changeLayout","newComponentProps","forEach","newProps","useHoverStore","componentHover","setComponentHover","useWarnStore","warning","setWarning","useViewInfoStore","viewInfo","setComponentViewInfo","uuid","useGridSizeStore","resizeCount","incrementResizeCount","useCoordination","parameters","coordinationScopes","values","fromEntries","map","undefined","shallow","setters","setterName","capitalize","setterFunc","useLoaders","useLayout","useRemoveComponent","useChangeLayout","useSetLoaders","useSetViewConfig","setViewConfigRef","useRef","getState","current","useComponentHover","useSetComponentHover","useWarning","useSetWarning","useComponentViewInfo","useCallback","useSetComponentViewInfo","setViewInfoRef","useGridResize","useEmitGridResize","TILE_SIZE","MIN_ROW_AGG","MAX_ROW_AGG","COLOR_BAR_SIZE","AXIS_LABEL_TEXT_SIZE","AXIS_TITLE_TEXT_SIZE","AXIS_MIN_SIZE","AXIS_MAX_SIZE","AXIS_MARGIN","THEME_TO_TEXT_COLOR","dark","light","AXIS_FONT_FAMILY","PIXELATED_TEXTURE_PARAMETERS","GL","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","makeCellStatusMessage","cellInfoFactors","Object","entries","factor","join","cellLayerDefaultProps","cells","updateStatus","setCellHighlight","coordinateSystem","COORDINATE_SYSTEM","CARTESIAN","data","pickable","autoHighlight","stroked","filled","getElevation","onHover","info","object","cellId","cellInfo","factors","DEFAULT_COLOR","PALETTE","VIEWER_PALETTE","COLORMAP_OPTIONS","DEFAULT_GL_OPTIONS","webgl2","createDefaultUpdateStatus","componentName","message","console","warn","createDefaultUpdateCellsSelection","cellsSelection","createDefaultUpdateCellsHover","hoverInfo","createDefaultUpdateGenesHover","geneId","createDefaultUpdateViewInfo","createDefaultClearPleaseWait","copyUint8Array","arr","newBuffer","ArrayBuffer","buffer","byteLength","newArr","Uint8Array","getNextNumberedNodeName","nodes","prefix","find","n","name","setCellSelection","cellSelection","additionalCellSets","cellSetColor","setCellSetSelection","setAdditionalCellSets","setCellSetColor","setCellColorEncoding","CELL_SELECTIONS_LEVEL_ZERO_NAME","selectionsLevelZeroNode","tree","nextAdditionalCellSets","version","HIERARCHICAL_SCHEMAS","SETS_DATATYPE_CELL","latestVersion","datatype","nextName","children","colorIndex","length","push","d","nextPath","path","color","mergeCellSets","cellSets","createWarningComponent","props","title","PRIMARY_CARD","asEsModule","component","__esModule","default","FILE_EXTENSION_JSON","MIME_TYPE_JSON","FILE_EXTENSION_TABULAR","MIME_TYPE_TABULAR","SEPARATOR_TABULAR","NA_VALUE_TABULAR","cell","schema","cellSetsSchema","TABULAR_SCHEMAS","cellSetsTabularSchema","iterable","reduce","obj","key","val","assign","range","Array","keys","pluralize","singular","plural","count","word","charAt","toUpperCase","getNextScope","prevScopes","chars","nextCharIndices","next","r","charIndex","unshift","increment","nextScope","includes","callbackOnKeyPress","event","callback","preventDefault","colorArrayToString","rgbArray","tinycolor","g","b","toHexString","colorStringToArray","colorString","colorObj","toRgb","getLevelTooltipText","subs","j","repeat","isEqualOrPrefix","targetPath","testPath","isEqual","tryRenamePath","nextTargetPath","PATH_SEP","pathToKey","GLOBAL_SLIDER_DIMENSION_FIELDS","DEFAULT_RASTER_DOMAIN_TYPE","DEFAULT_RASTER_LAYER_PROPS","colormap","opacity","domainType","transparentColor","DEFAULT_MOLECULES_LAYER","type","radius","visible","DEFAULT_CELLS_LAYER","DEFAULT_NEIGHBORHOODS_LAYER","DEFAULT_LAYER_TYPE_ORDERING","generateKey","uuidv4","nodeToSet","currNode","flatMap","c","nodeToHeight","level","newLevel","childrenHeights","Math","max","nodeFindNodeByNamePath","node","currLevelIndex","currNodeName","foundNodes","child","filter","Boolean","treeFindNodeByNamePath","currTree","targetNamePath","levelZeroNode","nodeTransform","predicate","transform","transformedPaths","currPath","newPath","concat","nodeTransformAll","newNode","nodeAppendChild","newChild","nodePrependChild","nodeInsertChild","insertIndex","newChildren","from","treeToUnion","checkedPaths","nodeSets","a","h","hEl","treeToIntersection","treeToComplement","items","primaryUnion","el","nodeToLevelDescendantNamePaths","prevPath","stopEarly","treeExport","treeExportLevelZeroNode","nodePath","cellSetColors","nodeWithColors","nPath","nodeColor","treeWithOneLevelZeroNode","treeToExport","nodeName","treeExportSet","setToExport","treeInitialize","nodeToRenderProps","nodeKey","size","isLeaf","height","colorMixWithUncertainty","originalColor","p","mixingColor","treeToCellColorsBySetNames","selectedNamePaths","cellColorsArray","setNamePath","nodeSet","prob","isNil","Map","treeToObjectsBySetNames","setColor","cellsArray","obsId","treeToCellPolygonsBySetNames","mapping","cellSetPolygons","cellPositions","mappings","points","turfFeatureCollection","turfPoint","hull","concave","hullCoords","geometry","coordinates","centroidCoords","centroid","treeToSetSizesBySetNames","sizes","filterNode","filterPath","treeToExpectedCheckedLevel","result","lzn","levelZeroPath","levelIndex","levelNodePaths","treesConflict","testCellSets","paths","testPaths","hasConflict","getPaths","getTestPaths","initializeCellSetColor","nextCellSetColor","nodeCountPerTreePerLevel","fill","processNode","hierarchyLevel","treeIndex","index","getCellSetPolygons","params","cellSetSelection","AbstractLoaderError","Error","LoaderFetchError","datasetType","datasetFileType","datasetUrl","responseHeaders","LoaderValidationError","reason","JSON","stringify","LoaderNotFoundError","useGridItemSize","containerRef","useState","setHeight","width","setWidth","useEffect","onWindowResize","onResizeDebounced","debounce","trailing","window","addEventListener","removeEventListener","container","containerRect","getBoundingClientRect","useDeckCanvasSize","deckRef","canvas","deck","canvasRect","useReady","supportedItems","waiting","setWaiting","setItemIsReady","readyItem","waitingItems","nextWaitingItems","item","log","resetReadyItems","isReady","useUrls","urls","setUrls","addUrl","url","prev","resetUrls","error","warnInConsole","useDescription","dataset","description","setDescription","useCellsData","isRequired","onLoad","setCells","cellsCount","setCellsCount","load","catch","e","then","payload","useCellSetsData","setCellSets","useExpressionMatrixData","expressionMatrix","setExpressionMatrix","attrs","cols","rows","matrix","useMoleculesData","molecules","setMolecules","moleculesCount","setMoleculesCount","locationsCount","setLocationsCount","l","useNeighborhoodsData","neighborhoods","setNeighborhoods","useRasterData","raster","setRaster","imageLayerLoaders","setImageLayerLoaders","imageLayerMeta","setImageLayerMeta","rasterLayers","layers","rasterRenderLayers","renderLayers","usePhysicalSizeScaling","initializeRasterLayersAndChannels","autoImageLayers","nextImageLoaders","nextImageMeta","useGenomicProfilesData","genomicProfilesAttrs","setGenomicProfilesAttrs","COORDINATION_TYPES","DATASET","EMBEDDING_TYPE","EMBEDDING_ZOOM","EMBEDDING_ROTATION","EMBEDDING_TARGET_X","EMBEDDING_TARGET_Y","EMBEDDING_TARGET_Z","EMBEDDING_CELL_SET_POLYGONS_VISIBLE","EMBEDDING_CELL_SET_LABELS_VISIBLE","EMBEDDING_CELL_SET_LABEL_SIZE","EMBEDDING_CELL_RADIUS","SPATIAL_ZOOM","SPATIAL_ROTATION","SPATIAL_TARGET_X","SPATIAL_TARGET_Y","SPATIAL_TARGET_Z","HEATMAP_ZOOM_X","HEATMAP_ZOOM_Y","HEATMAP_TARGET_X","HEATMAP_TARGET_Y","CELL_FILTER","CELL_HIGHLIGHT","CELL_SET_SELECTION","CELL_SET_HIGHLIGHT","CELL_SET_COLOR","GENE_FILTER","GENE_HIGHLIGHT","GENE_SELECTION","GENE_EXPRESSION_COLORMAP","GENE_EXPRESSION_COLORMAP_RANGE","CELL_COLOR_ENCODING","SPATIAL_LAYERS","GENOMIC_ZOOM_X","GENOMIC_ZOOM_Y","GENOMIC_TARGET_X","GENOMIC_TARGET_Y","ADDITIONAL_CELL_SETS","MOLECULE_HIGHLIGHT","DEFAULT_COORDINATION_VALUES","AUTO_INDEPENDENT_COORDINATION_TYPES","COMPONENT_COORDINATION_TYPES","scatterplot","spatial","heatmap","cellSetSizes","cellSetExpression","status","genes","expressionHistogram","layerController","higlass","genomicProfiles","TOOLTIP_ANCESTOR","CARD","SECONDARY_CARD","BLACK_CARD","TITLE_CARD","SCROLL_CARD","LoadingIndicator","useStyles","makeStyles","theme","iconButton","border","marginLeft","background","palette","primaryForeground","paddingLeft","paddingRight","borderRadius","backgroundColor","primaryBackgroundLight","marginRight","verticalAlign","downloadLink","SettingsIconWithArrow","open","PlotOptions","options","useReducer","v","toggle","classes","CloudDownloadIconWithArrow","DownloadOptions","ClosePaneButton","removeGridComponent","TitleInfo","isScroll","isSpatial","childClassName","styles","paper","maxHeight","overflow","zIndex","span","textAlign","popper","muiTheme","createMuiTheme","primary","grey","secondary","primaryBackground","primaryBackgroundHighlight","primaryBackgroundInput","primaryBackgroundDim","primaryForegroundDim","primaryForegroundActive","secondaryBackground","secondaryBackgroundDim","secondaryForeground","MuiButtonBase","disableRipple","MuiPopper","anchorEl","placement","MuiPaper","MuiSpan","PopperMenu","buttonIcon","buttonClassName","anchorRef","square","x","y","sortLayers","sort","indexOf","getDefaultGlobalSelection","imageDims","globalIndices","dim","field","selection","floor","buildDefaultSelection","globalSelection","firstNonGlobalDimension","min","initializeChannelForSelection","loader","getChannelStats","loaderSelection","stats","domain","isRgb","slider","autoSliders","initializeLayerChannels","loaderDimensions","dimensions","defaultSelection","domains","stat","colors","sliders","channel","initializeLayerChannelsIfMissing","layerDefsOrig","layerDefs","cloneDeep","newLayerDefPromises","didInitialize","layerIndex","layerDef","newLayerDefPromise","Promise","resolve","channels","newChannelDefPromises","channelIndex","channelDef","newChannelDefPromise","autoChannelDef","all","newChannelDefs","newLayerDefs","getMetaWithTransformMatrices","imageMeta","imageLoaders","meta","metadata","scale","translate","some","every","physicalSizes","minPhysicalSize","acc","unit","replace","compare","imageMetaWithTransform","k","divide","Matrix4","newMeta","toArray","autoImageLayerDefPromises","layer","loaderCreator","autoImageLayerDefPromise","modelMatrix","globalIndicesOfRenderLayers","imageName","findIndex","image","autoImageLayerDefs","makeSpatialSubtitle","observationsCount","observationsLabel","observationsPluralLabel","subobservationsCount","subobservationsLabel","subobservationsPluralLabel","parts","part","shortNumber","getInitialSpatialTargets","initialTargetX","Infinity","initialTargetY","initialZoom","zoomBackoff","cellValues","viewSize","getDefaultInitialViewState","target","newViewStateZoom","zoom","cellCoordinates","xy","xExtent","extent","yExtent","xRange","yRange","log2","Tooltip2D","parentUuid","sourceUuid","parentWidth","parentHeight","isTooltipVisible","crosshairWidth","left","top","TooltipContent","box","boxSizing","checkbox","padding","minWidth","sliderValueLabel","tableContainer","labelCell","inputCell","select","fontSize","Tooltip","ref","isNarrow","offsetPercentage","translateX","translateY","style","whiteSpace","schemeRdBu","schemePlasma","rgbSpline","spline","t","basis","innerBasis","t1","v0","v1","v2","v3","t2","t3","interpolateRgbBasis","interpolateSequentialMulti","interpolateRdBu","interpolatePlasma","getCellColors","cellColorEncoding","geneSelection","firstGeneSelected","geneExpColormap","geneIndex","numGenes","cellIndex","cellColor","EDIT_TYPE_ADD","EDIT_TYPE_CLEAR","ClickableDrawRectangleMode","onEdit","editType","DrawRectangleMode","ClickableDrawPolygonByDraggingMode","DrawPolygonByDraggingMode","MODE_MAP","SELECTION_TYPE","RECTANGLE","POLYGON","defaultProps","selectionType","layerIds","onSelect","EMPTY_DATA","features","LAYER_ID_GEOJSON","PASS_THROUGH_PROPS","SelectionLayer","getCellCoords","cellsQuadTree","flipY","flippedCoordinates","poly","selectedPolygon","turfPolygon","pickingInfos","visit","x0","y0","x1","y1","nodePoints","nodePolygon","nodePolygonContainsSelectedPolygon","booleanContains","nodePolygonWithinSelectedPolygon","booleanWithin","nodePolygonOverlapsSelectedPolgyon","booleanOverlap","booleanPointInPolygon","mode","ViewMode","inheritedProps","EditableGeoJsonLayer","getSubLayerProps","id","modeConfig","dragToDraw","selectedFeatureIndexes","updatedData","_selectPolygonObjects","CompositeLayer","layerName","getBaseLayerId","layerId","getSelectedLayerId","getSelectionLayers","tool","updateCellsSelection","cellBaseLayerId","editHandlePointRadius","cellIds","cellObj","getTentativeFillColor","getTentativeLineColor","getTentativeLineDashArray","lineWidthMinPixels","lineWidthMaxPixels","getEditHandlePointColor","getEditHandlePointRadius","editHandlePointRadiusScale","editHandlePointRadiusMinPixels","editHandlePointRadiusMaxPixels","overlayBaseProps","getColor","isSelected","rest","overlay","getFillColor","getLineColor","getFilterValue","extensions","DataFilterExtension","filterSize","filterRange","base","SelectablePolygonLayer","PolygonLayer","SelectableScatterplotLayer","ScatterplotLayer","HeatmapCompositeTextLayer","axisTopLabelData","matrixLeft","matrixWidth","viewWidth","targetX","targetY","axisTopTitle","cellWidth","axisOffsetTop","scaleFactor","showAxisTopLabels","axisLabelTop","TextLayer","getText","getPosition","getTextAnchor","getSize","getAngle","fontFamily","updateTriggers","axisLeftLabelData","matrixTop","matrixHeight","viewHeight","axisLeftTitle","cellHeight","axisOffsetLeft","showAxisLeftLabels","axisLabelLeft","_renderAxisTopLayers","_renderAxisLeftLayers","BitmapLayer","async","bounds","desaturate","tintColor","PixelatedBitmapLayer","textureParameters","vertexShader","fragmentShader","aggSizeX","aggSizeY","colorScaleLo","colorScaleHi","HeatmapBitmapLayer","shaders","extension","_mergeShaders","getShaders","call","args","loadTexture","_getShaders","vs","fs","modules","project32","picking","opts","uniforms","bitmapTexture","model","setUniforms","uBitmapTexture","uTextureSize","uAggSize","uColorScaleRange","draw","gl","context","delete","Texture2D","setState","mipmaps","format","LUMINANCE","dataFormat","UNSIGNED_BYTE","createCellsQuadTree","cellsEntries","quadtree","addAll","OptionsContainer","table","CellColorEncodingOption","observationsLabelNice","handleColorEncodingChange","IconButton","alt","onClick","isActive","inactive","active","ToolMenu","setActiveTool","activeTool","visibleTools","pan","selectRectangle","selectLasso","getCursorWithTool","getCursor","interactionState","isDragging","AbstractSpatialOrScatterplot","viewport","onViewStateChange","bind","onInitializeViewInfo","onWebGLInitialized","onToolChange","nextViewState","viewState","setViewState","onToolChangeProp","updateViewInfo","project","positionX","positionY","getLayers","showCellSelectionTools","cellsLayer","showPanTool","OrthographicView","dragPan","PureComponent","CELLS_LAYER_ID","MOLECULES_LAYER_ID","NEIGHBORHOODS_LAYER_ID","defaultGetCellCoords","makeDefaultGetCellPolygon","cellEntry","makeDefaultGetCellColors","cellColors","get","makeDefaultGetCellIsSelected","Spatial","moleculesEntries","moleculesLayer","neighborhoodsLayer","imageLayers","layerLoaderSelections","onUpdateCellsData","onUpdateCellsLayer","onUpdateMoleculesData","onUpdateMoleculesLayer","onUpdateNeighborhoodsData","onUpdateNeighborhoodsLayer","onUpdateImages","cellFilter","getCellIsSelected","getCellColor","getCellPolygon","onCellClick","lineWidthScale","filteredCellsEntries","flipYTooltip","getPolygon","getLineWidth","setMoleculeHighlight","getMoleculeColor","getMoleculePosition","radiusMaxPixels","getRadius","getNeighborhoodPolygon","neighborhoodsEntry","neighborhood","neighborhoodsEntries","ScaleBarLayer","rawLayerDef","nextLoaderSelection","prevLoaderSelection","layerProps","visibilities","isPyramid","Layer","MultiscaleImageLayer","ImageLayer","colorValues","sliderValues","channelIsOn","createImageLayer","createScaleBarLayer","createSelectionLayers","createCellsLayer","molecule","coords","createMoleculesLayer","createNeighborhoodsLayer","createImageLayers","prevProps","viewInfoDidUpdate","shallowDiff","propName","forceUpdate","SpatialWrapper","forwardRef","SpatialOptions","SpatialTooltipSubscriber","cellHighlight","getCellInfo","SPATIAL_DATA_TYPES","SPATIAL_LAYER_TYPES","SpatialSubscriber","initializeLayers","observationsLabelOverride","observationsPluralLabelOverride","subobservationsLabelOverride","subobservationsPluralLabelOverride","disableTooltip","spatialZoom","spatialTargetX","spatialTargetY","targetZ","spatialTargetZ","spatialLayers","setZoom","setSpatialZoom","setTargetX","setSpatialTargetX","setTargetY","setSpatialTargetY","setTargetZ","setSpatialTargetZ","setLayers","setSpatialLayers","setCellFilter","autoLayers","setAutoLayers","areAutoLayersComplete","loaderType","newLayers","mergedCellSets","useMemo","setCellSelectionProp","subtitle","newZoom"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;AClFA,kC;;;;;;;;;ACAe;AACf;AACA,C;;ACFe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,+BAA+B;AAC5E;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA,C;;;;;ACzBe;AACf;AACA,C;;ACFA;AAA8C;AACY;AACY;AACtB;AACjC;AACf,SAAS,eAAc,SAAS,qBAAoB,YAAY,qDAA0B,YAAY,gBAAe;AACrH,C;;;;;;;ACNA;AAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA,C;;;;;;;;;;;;ACbkD;AACnC;AACf,iCAAiC,2CAAgB;AACjD,C;;ACHe;AACf;AACA,C;;;;;ACFe;AACf;AACA,C;;ACFA;AAAoD;AACJ;AACsB;AAClB;AACrC;AACf,SAAS,kBAAiB,SAAS,gBAAe,SAAS,qDAA0B,SAAS,kBAAiB;AAC/G,C;;;;;;;ACNA;AAAA;AAA8C;;AAE9C;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEe;AACf,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA,QAAQ,uEAAc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","file":"spatial.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 158);\n","module.exports = require(\"react\");","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import { useRef, useCallback } from 'react';\nimport create from 'zustand';\nimport shallow from 'zustand/shallow';\nimport { fromEntries, capitalize } from '../../utils';\n\n/**\n * The useViewConfigStore hook is initialized via the zustand\n * create() function, which sets up both the state variables\n * and the reducer-type functions.\n * Reference: https://github.com/react-spring/zustand\n * @returns {function} The useStore hook.\n */\nexport const useViewConfigStore = create(set => ({\n  // State:\n  // The viewConfig is an object which must conform to the schema\n  // found in src/schemas/config.schema.json.\n  viewConfig: null,\n  // The loaders object is a mapping from dataset ID to\n  // data type to loader object instance.\n  loaders: null,\n  // Reducer functions which update the state\n  // (although technically also part of state):\n  setViewConfig: viewConfig => set({ viewConfig }),\n  setLoaders: loaders => set({ loaders }),\n  setCoordinationValue: ({ parameter, scope, value }) => set(state => ({\n    viewConfig: {\n      ...state.viewConfig,\n      coordinationSpace: {\n        ...state.viewConfig.coordinationSpace,\n        [parameter]: {\n          ...state.viewConfig.coordinationSpace[parameter],\n          [scope]: value,\n        },\n      },\n    },\n  })),\n  removeComponent: i => set((state) => {\n    const newLayout = state.viewConfig.layout.slice();\n    newLayout.splice(i, 1);\n    return {\n      viewConfig: {\n        ...state.viewConfig,\n        layout: newLayout,\n      },\n    };\n  }),\n  changeLayout: newComponentProps => set((state) => {\n    const newLayout = state.viewConfig.layout.slice();\n    newComponentProps.forEach(([i, newProps]) => {\n      newLayout[i] = {\n        ...newLayout[i],\n        ...newProps,\n      };\n    });\n    return {\n      viewConfig: {\n        ...state.viewConfig,\n        layout: newLayout,\n      },\n    };\n  }),\n}));\n\n/**\n * The hover store can be used to store global state\n * related to which component is currently hovered,\n * which is required for tooltip / crossover elements.\n * @returns {function} The useStore hook.\n */\nconst useHoverStore = create(set => ({\n  // Components may need to know if they are the \"hover source\"\n  // for tooltip interactions. This value should be a unique\n  // component ID, such as its index in the view config layout.\n  componentHover: null,\n  setComponentHover: componentHover => set({ componentHover }),\n}));\n\n/**\n * The warning store can be used to store global state\n * related to app warning messages.\n * @returns {function} The useStore hook.\n */\nconst useWarnStore = create(set => ({\n  // Want a global state to collect warning messages\n  // that occur anywhere in the app.\n  warning: null,\n  setWarning: warning => set({ warning }),\n}));\n\n/**\n * The view info store can be used to store component-level\n * viewInfo objects,\n * which are required for tooltip / crossover elements.\n * @returns {function} The useStore hook.\n */\nconst useViewInfoStore = create(set => ({\n  // The viewInfo object is a mapping from\n  // component IDs to component view info objects.\n  // Each view info object must have a project() function.\n  viewInfo: {},\n  setComponentViewInfo: (uuid, viewInfo) => set(state => ({\n    viewInfo: {\n      ...state.viewInfo,\n      [uuid]: viewInfo,\n    },\n  })),\n}));\n\n/**\n * The grid size store can be used to store a\n * counter which updates on each window or react-grid-layout\n * resize event.\n * @returns {function} The useStore hook.\n */\nconst useGridSizeStore = create(set => ({\n  resizeCount: {},\n  incrementResizeCount: () => set(state => ({\n    resizeCount: state.resizeCount + 1,\n  })),\n}));\n\n/**\n * The useCoordination hook returns both the\n * values and setter functions for the coordination objects\n * in a particular coordination scope mapping.\n * This hook is intended to be used within the ___Subscriber\n * components to allow them to \"hook into\" only those coordination\n * objects and setter functions of relevance.\n * @param {string[]} parameters Array of coordination types.\n * @param {object} coordinationScopes Mapping of coordination types\n * to scope names.\n * @returns {array} Returns a tuple [values, setters]\n * where values is an object containing all coordination values,\n * and setters is an object containing all coordination setter\n * functions for the values in `values`, named with a \"set\"\n * prefix.\n */\nexport function useCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useViewConfigStore(state => state.setCoordinationValue);\n\n  const values = useViewConfigStore((state) => {\n    const { coordinationSpace } = state.viewConfig;\n    return fromEntries(parameters.map((parameter) => {\n      if (coordinationSpace && coordinationSpace[parameter]) {\n        const value = coordinationSpace[parameter][coordinationScopes[parameter]];\n        return [parameter, value];\n      }\n      return [parameter, undefined];\n    }));\n  }, shallow);\n\n  const setters = fromEntries(parameters.map((parameter) => {\n    const setterName = `set${capitalize(parameter)}`;\n    const setterFunc = value => setCoordinationValue({\n      parameter,\n      scope: coordinationScopes[parameter],\n      value,\n    });\n    return [setterName, setterFunc];\n  }));\n\n  return [values, setters];\n}\n\n/**\n * Obtain the loaders object from\n * the global app state.\n * @returns {object} The loaders object\n * in the `useViewConfigStore` store.\n */\nexport function useLoaders() {\n  return useViewConfigStore(state => state.loaders);\n}\n\n/**\n * Obtain the view config layout array from\n * the global app state.\n * @returns {object[]} The layout array\n * in the `useViewConfigStore` store.\n */\nexport function useLayout() {\n  return useViewConfigStore(state => state.viewConfig?.layout);\n}\n\n/**\n * Obtain the component removal function from\n * the global app state.\n * @returns {function} The remove component function\n * in the `useViewInfoStore` store.\n */\nexport function useRemoveComponent() {\n  return useViewConfigStore(state => state.removeComponent);\n}\n\n/**\n * Obtain the component prop setter function from\n * the global app state.\n * @returns {function} The set component props function\n * in the `useViewInfoStore` store.\n */\nexport function useChangeLayout() {\n  return useViewConfigStore(state => state.changeLayout);\n}\n\n/**\n * Obtain the loaders setter function from\n * the global app state.\n * @returns {function} The loaders setter function\n * in the `useViewConfigStore` store.\n */\nexport function useSetLoaders() {\n  return useViewConfigStore(state => state.setLoaders);\n}\n\n/**\n * Obtain the view config setter function from\n * the global app state.\n * @returns {function} The view config setter function\n * in the `useViewConfigStore` store.\n */\nexport function useSetViewConfig() {\n  const setViewConfigRef = useRef(useViewConfigStore.getState().setViewConfig);\n  const setViewConfig = setViewConfigRef.current;\n  return setViewConfig;\n}\n\n/**\n * Obtain the component hover value from\n * the global app state.\n * @returns {number} The hovered component ID\n * in the `useHoverStore` store.\n */\nexport function useComponentHover() {\n  return useHoverStore(state => state.componentHover);\n}\n\n/**\n * Obtain the component hover setter function from\n * the global app state.\n * @returns {function} The component hover setter function\n * in the `useHoverStore` store.\n */\nexport function useSetComponentHover() {\n  return useHoverStore(state => state.setComponentHover);\n}\n\n/**\n * Obtain the warning message from\n * the global app state.\n * @returns {string} The warning message\n * in the `useWarnStore` store.\n */\nexport function useWarning() {\n  return useWarnStore(state => state.warning);\n}\n\n/**\n * Obtain the warning setter function from\n * the global app state.\n * @returns {function} The warning setter function\n * in the `useWarnStore` store.\n */\nexport function useSetWarning() {\n  return useWarnStore(state => state.setWarning);\n}\n\n/**\n * Obtain the component view info value from\n * the global app state.\n * @returns {object} The view info object for the component\n * in the `useViewInfoStore` store.\n */\nexport function useComponentViewInfo(uuid) {\n  return useViewInfoStore(useCallback(state => state.viewInfo[uuid], [uuid]));\n}\n\n/**\n * Obtain the component view info setter function from\n * the global app state.\n * @returns {function} The component view info setter function\n * in the `useViewInfoStore` store.\n */\nexport function useSetComponentViewInfo(uuid) {\n  const setViewInfoRef = useRef(useViewInfoStore.getState().setComponentViewInfo);\n  const setComponentViewInfo = viewInfo => setViewInfoRef.current(uuid, viewInfo);\n  return setComponentViewInfo;\n}\n\n/**\n * Obtain the grid resize count value\n * from the global app state.\n * @returns {number} The grid resize increment value.\n */\nexport function useGridResize() {\n  return useGridSizeStore(state => state.resizeCount);\n}\n\n/**\n * Obtain the grid resize count increment function\n * from the global app state.\n * @returns {function} The grid resize count increment\n * function.\n */\nexport function useEmitGridResize() {\n  return useGridSizeStore(state => state.incrementResizeCount);\n}\n","import GL from '@luma.gl/constants';\n\nexport const TILE_SIZE = 2048;\nexport const MIN_ROW_AGG = 1;\nexport const MAX_ROW_AGG = 16;\n\nexport const COLOR_BAR_SIZE = 20;\nexport const AXIS_LABEL_TEXT_SIZE = 9;\nexport const AXIS_TITLE_TEXT_SIZE = 15;\nexport const AXIS_MIN_SIZE = 10;\nexport const AXIS_MAX_SIZE = 90;\nexport const AXIS_MARGIN = 3;\nexport const THEME_TO_TEXT_COLOR = {\n  dark: [224, 224, 224],\n  light: [64, 64, 64],\n};\nexport const AXIS_FONT_FAMILY = \"-apple-system, 'Helvetica Neue', Arial, sans-serif\";\n\nexport const PIXELATED_TEXTURE_PARAMETERS = {\n  // NEAREST for integer data to prevent interpolation.\n  [GL.TEXTURE_MIN_FILTER]: GL.NEAREST,\n  [GL.TEXTURE_MAG_FILTER]: GL.NEAREST,\n  // CLAMP_TO_EDGE to remove tile artifacts.\n  [GL.TEXTURE_WRAP_S]: GL.CLAMP_TO_EDGE,\n  [GL.TEXTURE_WRAP_T]: GL.CLAMP_TO_EDGE,\n};\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import React from 'react';\nimport { COORDINATE_SYSTEM } from 'deck.gl';\nimport {\n  SETS_DATATYPE_CELL,\n  HIERARCHICAL_SCHEMAS,\n} from './sets/constants';\nimport { PRIMARY_CARD } from './classNames';\n\nexport function makeCellStatusMessage(cellInfoFactors) {\n  return Object.entries(cellInfoFactors).map(\n    ([factor, value]) => `${factor}: ${value}`,\n  ).join('; ');\n}\n\nexport function cellLayerDefaultProps(cells, updateStatus, setCellHighlight, setComponentHover) {\n  return {\n    coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n    data: cells,\n    pickable: true,\n    autoHighlight: true,\n    stroked: true,\n    filled: true,\n    getElevation: 0,\n    onHover: (info) => {\n      // Notify the parent component that its child component is\n      // the \"hover source\".\n      if (setComponentHover) {\n        setComponentHover();\n      }\n      if (info.object) {\n        const [cellId, cellInfo] = info.object;\n        const { factors = {} } = cellInfo;\n        if (updateStatus) {\n          updateStatus(makeCellStatusMessage(factors));\n        }\n        if (setCellHighlight) {\n          setCellHighlight(cellId);\n        }\n      } else if (setCellHighlight) {\n        // Clear the currently-hovered cell info by passing null.\n        setCellHighlight('');\n      }\n    },\n  };\n}\n\nexport const DEFAULT_COLOR = [128, 128, 128];\n\n// From https://personal.sron.nl/~pault/#sec:qualitative\nexport const PALETTE = [\n  [68, 119, 170],\n  [136, 204, 238],\n  [68, 170, 153],\n  [17, 119, 51],\n  [153, 153, 51],\n  [221, 204, 119],\n  [204, 102, 119],\n  [136, 34, 85],\n  [170, 68, 153],\n];\n\nexport const VIEWER_PALETTE = [\n  [0, 0, 255],\n  [0, 255, 0],\n  [255, 0, 255],\n  [255, 255, 0],\n  [0, 255, 255],\n  [255, 255, 255],\n  [255, 128, 0],\n  [255, 0, 0],\n];\n\nexport const COLORMAP_OPTIONS = [\n  'viridis',\n  'greys',\n  'magma',\n  'jet',\n  'hot',\n  'bone',\n  'copper',\n  'summer',\n  'density',\n  'inferno',\n];\n\nexport const DEFAULT_GL_OPTIONS = { webgl2: true };\n\nexport function createDefaultUpdateStatus(componentName) {\n  return message => console.warn(`${componentName} updateStatus: ${message}`);\n}\n\nexport function createDefaultUpdateCellsSelection(componentName) {\n  return cellsSelection => console.warn(`${componentName} updateCellsSelection: ${cellsSelection}`);\n}\n\nexport function createDefaultUpdateCellsHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateCellsHover: ${hoverInfo.cellId}`);\n}\n\nexport function createDefaultUpdateGenesHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateGenesHover: ${hoverInfo.geneId}`);\n}\n\nexport function createDefaultUpdateViewInfo(componentName) {\n  return viewInfo => console.warn(`${componentName} updateViewInfo: ${viewInfo}`);\n}\n\nexport function createDefaultClearPleaseWait() {\n  return () => {};\n}\n\n\n/**\n * Copy a typed array into a new array buffer.\n * @param {Uint8Array} arr The typed array to be copied.\n * @returns {Uint8Array} The copied array.\n */\nexport function copyUint8Array(arr) {\n  const newBuffer = new ArrayBuffer(arr.buffer.byteLength);\n  const newArr = new Uint8Array(newBuffer);\n  newArr.set(arr);\n  return newArr;\n}\n\nexport function getNextNumberedNodeName(nodes, prefix) {\n  let i = 1;\n  if (nodes) {\n    // eslint-disable-next-line no-loop-func\n    while (nodes.find(n => n.name === `${prefix}${i}`)) {\n      // eslint-disable-next-line no-plusplus\n      i++;\n    }\n  }\n  return `${prefix}${i}`;\n}\n\n/**\n * Create a new selected cell set based on a cell selection.\n * @param {string[]} cellSelection An array of cell IDs.\n * @param {object[]} additionalCellSets The previous array of user-defined cell sets.\n * @param {function} setCellSetSelection The setter function for cell set selections.\n * @param {function} setAdditionalCellSets The setter function for user-defined cell sets.\n */\nexport function setCellSelection(cellSelection, additionalCellSets, cellSetColor, setCellSetSelection, setAdditionalCellSets, setCellSetColor, setCellColorEncoding, prefix = 'Selection ') {\n  const CELL_SELECTIONS_LEVEL_ZERO_NAME = 'My Selections';\n\n  const selectionsLevelZeroNode = additionalCellSets?.tree.find(\n    n => n.name === CELL_SELECTIONS_LEVEL_ZERO_NAME,\n  );\n  const nextAdditionalCellSets = {\n    version: HIERARCHICAL_SCHEMAS[SETS_DATATYPE_CELL].latestVersion,\n    datatype: SETS_DATATYPE_CELL,\n    tree: [...(additionalCellSets ? additionalCellSets.tree : [])],\n  };\n\n  const nextName = getNextNumberedNodeName(selectionsLevelZeroNode?.children, prefix);\n  let colorIndex = 0;\n  if (selectionsLevelZeroNode) {\n    colorIndex = selectionsLevelZeroNode.children.length;\n    selectionsLevelZeroNode.children.push({\n      name: nextName,\n      set: cellSelection.map(d => [d, null]),\n    });\n  } else {\n    nextAdditionalCellSets.tree.push({\n      name: CELL_SELECTIONS_LEVEL_ZERO_NAME,\n      children: [\n        {\n          name: nextName,\n          set: cellSelection.map(d => [d, null]),\n        },\n      ],\n    });\n  }\n  setAdditionalCellSets(nextAdditionalCellSets);\n  const nextPath = ['My Selections', nextName];\n  setCellSetColor([\n    ...(cellSetColor || []),\n    {\n      path: nextPath,\n      color: PALETTE[colorIndex % PALETTE.length],\n    },\n  ]);\n  setCellSetSelection([nextPath]);\n  setCellColorEncoding('cellSetSelection');\n}\n\nexport function mergeCellSets(cellSets, additionalCellSets) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[SETS_DATATYPE_CELL].latestVersion,\n    datatype: SETS_DATATYPE_CELL,\n    tree: [\n      ...(cellSets ? cellSets.tree : []),\n      ...(additionalCellSets ? additionalCellSets.tree : []),\n    ],\n  };\n}\n\nexport function createWarningComponent(props) {\n  return () => {\n    const {\n      title,\n      message,\n    } = props;\n    return (\n      <div className={PRIMARY_CARD}>\n        <h1>{title}</h1>\n        <div>{message}</div>\n      </div>\n    );\n  };\n}\n\nexport function asEsModule(component) {\n  return {\n    __esModule: true,\n    default: component,\n  };\n}\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","module.exports = require(\"regenerator-runtime\");\n","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  return function () {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (isNativeReflectConstruct()) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","module.exports = require(\"lodash/isEqual\");","import cellSetsSchema from '../../schemas/cell-sets.schema.json';\nimport cellSetsTabularSchema from '../../schemas/cell-sets-tabular.schema.json';\n\nexport const FILE_EXTENSION_JSON = 'json';\nexport const MIME_TYPE_JSON = 'application/json';\n\nexport const FILE_EXTENSION_TABULAR = 'csv';\nexport const MIME_TYPE_TABULAR = 'text/csv';\nexport const SEPARATOR_TABULAR = ',';\n// The NA value below corresponds to the allowed string enum\n// value \"NA\" in the cell-sets-tabular JSON schema.\nexport const NA_VALUE_TABULAR = 'NA';\n\nexport const SETS_DATATYPE_CELL = 'cell';\nexport const HIERARCHICAL_SCHEMAS = {\n  cell: {\n    latestVersion: '0.1.3',\n    schema: cellSetsSchema,\n  },\n};\n\nexport const TABULAR_SCHEMAS = {\n  cell: {\n    schema: cellSetsTabularSchema,\n  },\n};\n","/* eslint-disable no-plusplus */\n\n// Adapted from https://github.com/feross/fromentries/blob/29b52a850bb3a47c390937631c2638edf3443942/index.js\nexport function fromEntries(iterable) {\n  return [...iterable]\n    .reduce((obj, { 0: key, 1: val }) => Object.assign(obj, { [key]: val }), {});\n}\n\nexport function range(length) {\n  return [...Array(length).keys()];\n}\n\n/**\n * Select between a singular and plural version of a word,\n * based on an item count.\n * @param {string} singular The singular version of the word.\n * @param {string} plural The plural version of the word.\n * @param {number} count The number of items.\n * @returns {string} Singular if count is one, else plural.\n */\nexport function pluralize(singular, plural, count) {\n  return (count === 1 ? singular : plural);\n}\n\n/**\n * Capitalize a the first letter of a string.\n * @param {string} word A string to capitalize.\n * @returns {string} The word parameter with the first letter capitalized.\n */\nexport function capitalize(word) {\n  return word.charAt(0).toUpperCase() + word.slice(1);\n}\n\n/**\n * Generate a new scope name which does not\n * conflict / overlap with a previous scope name.\n * Really these just need to be unique within the coordination object.\n * So in theory they could be String(Math.random()) or uuidv4() or something.\n * However it may be good to make them more human-readable and memorable\n * since eventually we will want to expose a UI to update the coordination.\n * @param {string[]} prevScopes Previous scope names.\n * @returns {string} The new scope name.\n */\nexport function getNextScope(prevScopes) {\n  // Keep an ordered list of valid characters.\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  // Store the value of the next character for each position\n  // in the new string.\n  // For example, [0] -> \"A\", [1] -> \"B\", [0, 1] -> \"AB\"\n  const nextCharIndices = [0];\n\n  // Generate a new scope name,\n  // potentially conflicting with an existing name.\n  // Reference: https://stackoverflow.com/a/12504061\n  function next() {\n    const r = [];\n    nextCharIndices.forEach((charIndex) => {\n      r.unshift(chars[charIndex]);\n    });\n    let increment = true;\n    for (let i = 0; i < nextCharIndices.length; i++) {\n      const val = ++nextCharIndices[i];\n      if (val >= chars.length) {\n        nextCharIndices[i] = 0;\n      } else {\n        increment = false;\n        break;\n      }\n    }\n    if (increment) {\n      nextCharIndices.push(0);\n    }\n    return r.join('');\n  }\n\n  let nextScope;\n  do {\n    nextScope = next();\n  } while (prevScopes.includes(nextScope));\n  return nextScope;\n}\n","import tinycolor from 'tinycolor2';\nimport isEqual from 'lodash/isEqual';\n\n/**\n * Execute a callback function based on a keypress event.\n * @param {object} event The event from onKeyPress\n * @param {string} key The key identifier to match.\n * @param {Function} callback The function to execute.\n */\nexport function callbackOnKeyPress(event, key, callback) {\n  if (event.key === key) {\n    event.preventDefault();\n    callback();\n  }\n}\n\n/**\n * Convert an array of [r, g, b] numbers to a hex color.\n * @param {number[]} rgbArray The color [r, g, b] array.\n * @returns {string} The hex color as a string.\n */\nexport function colorArrayToString(rgbArray) {\n  return tinycolor({ r: rgbArray[0], g: rgbArray[1], b: rgbArray[2] }).toHexString();\n}\n\n/**\n * Convert a string color representation to an array of [r,g,b].\n * @param {string} colorString The color as a string.\n * @returns {number[]} The color as an array.\n */\nexport function colorStringToArray(colorString) {\n  const colorObj = tinycolor(colorString).toRgb();\n  return [colorObj.r, colorObj.g, colorObj.b];\n}\n\n/**\n * Get a string of help text for coloring a particular hierarchy level.\n * @param {integer} i The level. 1 for cluster, 2 for subcluster, etc.\n * @returns {string} The tooltip text for coloring the level.\n */\nexport function getLevelTooltipText(i) {\n  if (i === 0) return 'Color by hierarchy';\n  if (i <= 2) {\n    const subs = j => ('sub'.repeat(j));\n    return `Color by ${subs(i - 1)}cluster`;\n  }\n  return `Color by cluster level ${i}`;\n}\n\nexport function isEqualOrPrefix(targetPath, testPath) {\n  if (targetPath.length <= testPath.length) {\n    return isEqual(targetPath, testPath.slice(0, targetPath.length));\n  }\n  return false;\n}\n\nexport function tryRenamePath(targetPath, testPath, nextTargetPath) {\n  if (isEqualOrPrefix(targetPath, testPath)) {\n    return [...nextTargetPath, ...testPath.slice(nextTargetPath.length)];\n  }\n  return testPath;\n}\n\nexport const PATH_SEP = '___';\n\nexport function pathToKey(path) {\n  return path.join(PATH_SEP);\n}\n","module.exports = require(\"@material-ui/core/styles\");","export const GLOBAL_SLIDER_DIMENSION_FIELDS = ['z', 'time'];\n\nexport const DEFAULT_RASTER_DOMAIN_TYPE = 'Min/Max';\n\nexport const DEFAULT_RASTER_LAYER_PROPS = {\n  colormap: null,\n  opacity: 1,\n  domainType: DEFAULT_RASTER_DOMAIN_TYPE,\n  transparentColor: [0, 0, 0],\n};\n\nexport const DEFAULT_MOLECULES_LAYER = {\n  type: 'molecules', opacity: 1, radius: 20, visible: true,\n};\nexport const DEFAULT_CELLS_LAYER = {\n  type: 'cells', opacity: 1, radius: 50, visible: true, stroked: false,\n};\nexport const DEFAULT_NEIGHBORHOODS_LAYER = {\n  type: 'neighborhoods', visible: false,\n};\n\nexport const DEFAULT_LAYER_TYPE_ORDERING = [\n  'molecules',\n  'cells',\n  'neighborhoods',\n  'raster',\n];\n","/* eslint-disable no-underscore-dangle */\nimport uuidv4 from 'uuid/v4';\nimport isNil from 'lodash/isNil';\nimport isEqual from 'lodash/isEqual';\nimport range from 'lodash/range';\nimport { featureCollection as turfFeatureCollection, point as turfPoint } from '@turf/helpers';\nimport concave from '@turf/concave';\nimport centroid from '@turf/centroid';\nimport {\n  HIERARCHICAL_SCHEMAS,\n} from './constants';\nimport { DEFAULT_COLOR, PALETTE } from '../utils';\nimport { pathToKey } from './utils';\n\n/**\n * Alias for the uuidv4 function to make code more readable.\n * @returns {string} UUID.\n */\nfunction generateKey() {\n  return uuidv4();\n}\n\n/**\n * Get the set associated with a particular node.\n * Recursive.\n * @param {object} currNode A node object.\n * @returns {array} The array representing the set associated with the node.\n */\nexport function nodeToSet(currNode) {\n  if (!currNode) {\n    return [];\n  }\n  if (!currNode.children) {\n    return (currNode.set || []);\n  }\n  return currNode.children.flatMap(c => nodeToSet(c));\n}\n\n/**\n * Get the height of a node (the number of levels to reach a leaf).\n * @param {object} currNode A node object.\n * @param {number} level The level that the height will be computed relative to. By default, 0.\n * @returns {number} The height. If the node has a .children property,\n * then the minimum value returned is 1.\n */\nexport function nodeToHeight(currNode, level = 0) {\n  if (!currNode.children) {\n    return level;\n  }\n  const newLevel = level + 1;\n  const childrenHeights = currNode.children.map(c => nodeToHeight(c, newLevel));\n  return Math.max(...childrenHeights, newLevel);\n}\n\n/**\n * Find a node with a matching name path, relative to a particular node.\n * @param {object} node A node object.\n * @param {string[]} path The name path for the node of interest.\n * @param {number} currLevelIndex The index of the current hierarchy level.\n * @returns {object|null} A matching node object, or null if none is found.\n */\nfunction nodeFindNodeByNamePath(node, path, currLevelIndex) {\n  const currNodeName = path[currLevelIndex];\n  if (node.name === currNodeName) {\n    if (currLevelIndex === path.length - 1) {\n      return node;\n    }\n    if (node.children) {\n      const foundNodes = node.children\n        .map(child => nodeFindNodeByNamePath(child, path, currLevelIndex + 1))\n        .filter(Boolean);\n      if (foundNodes.length === 1) {\n        return foundNodes[0];\n      }\n    }\n  }\n  return null;\n}\n\n/**\n * Find a node with a matching name path, relative to the whole tree.\n * @param {object} currTree A tree object.\n * @param {string[]} targetNamePath The name path for the node of interest.\n * @returns {object|null} A matching node object, or null if none is found.\n */\nexport function treeFindNodeByNamePath(currTree, targetNamePath) {\n  const foundNodes = currTree.tree\n    .map(levelZeroNode => nodeFindNodeByNamePath(levelZeroNode, targetNamePath, 0))\n    .filter(Boolean);\n  if (foundNodes.length === 1) {\n    return foundNodes[0];\n  }\n  return null;\n}\n\n/**\n * Transform a node object using a transform function.\n * @param {object} node A node object.\n * @param {function} predicate Returns true if a node matches a condition of interest.\n * @param {function} transform Takes the node matching the predicate as input, returns\n * a transformed version of the node.\n * @param {array} transformedPaths This array parameter is mutated. The path of\n * each transformed node is appended to this array.\n * @param {string[]} The current path of the node being updated, used internally\n * during recursion.\n * @returns {object} The updated node.\n */\nexport function nodeTransform(node, predicate, transform, transformedPaths, currPath) {\n  let newPath;\n  if (!currPath) {\n    newPath = [node.name];\n  } else {\n    newPath = [...currPath];\n  }\n  if (predicate(node, newPath)) {\n    transformedPaths.push(newPath);\n    return transform(node, newPath);\n  }\n  if (node.children) {\n    return {\n      ...node,\n      children: node.children.map(\n        child => nodeTransform(\n          child, predicate, transform, transformedPaths, newPath.concat([child.name]),\n        ),\n      ),\n    };\n  }\n  return node;\n}\n\n/**\n * Transform many node objects using a transform function.\n * @param {object} node A node object.\n * @param {function} predicate Returns true if a node matches a condition of interest.\n * @param {function} transform Takes the node matching the predicate as input, returns\n * a transformed version of the node.\n * @param {array} transformedPaths This array parameter is mutated. The path of\n * each transformed node is appended to this array.\n * @param {string[]} The current path of the node being updated, used internally\n * during recursion.\n * @returns {object} The updated node.\n */\nexport function nodeTransformAll(node, predicate, transform, transformedPaths, currPath) {\n  let newPath;\n  if (!currPath) {\n    newPath = [node.name];\n  } else {\n    newPath = [...currPath];\n  }\n  let newNode = node;\n  if (predicate(node, newPath)) {\n    transformedPaths.push(newPath);\n    newNode = transform(node, newPath);\n  }\n  if (node.children) {\n    return {\n      ...newNode,\n      children: newNode.children.map(\n        child => nodeTransformAll(\n          child, predicate, transform, transformedPaths, newPath.concat([child.name]),\n        ),\n      ),\n    };\n  }\n  return newNode;\n}\n\n/**\n * Append a child to a parent node.\n * @param {object} currNode A node object.\n * @param {object} newChild The child node object.\n * @returns {object} The updated node.\n */\nexport function nodeAppendChild(currNode, newChild) {\n  return {\n    ...currNode,\n    children: [...currNode.children, newChild],\n  };\n}\n\n/**\n * Prepend a child to a parent node.\n * @param {object} currNode A node object.\n * @param {object} newChild The child node object.\n * @returns {object} The updated node.\n */\nexport function nodePrependChild(currNode, newChild) {\n  return {\n    ...currNode,\n    children: [newChild, ...currNode.children],\n  };\n}\n\n/**\n * Insert a child to a parent node.\n * @param {object} currNode A node object.\n * @param {*} newChild The child node object.\n * @param {*} insertIndex The index at which to insert the child.\n * @returns {object} The updated node.\n */\nexport function nodeInsertChild(currNode, newChild, insertIndex) {\n  const newChildren = Array.from(currNode.children);\n  newChildren.splice(insertIndex, 0, newChild);\n  return {\n    ...currNode,\n    children: newChildren,\n  };\n}\n\n/**\n * Get an array representing the union of the sets of checked nodes.\n * @param {object} currTree A tree object.\n * @returns {array} An array representing the union of the sets of checked nodes.\n */\nexport function treeToUnion(currTree, checkedPaths) {\n  const nodes = checkedPaths.map(path => treeFindNodeByNamePath(currTree, path));\n  const nodeSets = nodes.map(node => nodeToSet(node).map(([cellId]) => cellId));\n  return nodeSets\n    .reduce((a, h) => a.concat(h.filter(hEl => !a.includes(hEl))), nodeSets[0] || []);\n}\n\n/**\n * Get an array representing the intersection of the sets of checked nodes.\n * @param {object} currTree A tree object.\n * @returns {array} An array representing the intersection of the sets of checked nodes.\n */\nexport function treeToIntersection(currTree, checkedPaths) {\n  const nodes = checkedPaths.map(path => treeFindNodeByNamePath(currTree, path));\n  const nodeSets = nodes.map(node => nodeToSet(node).map(([cellId]) => cellId));\n  return nodeSets\n    .reduce((a, h) => h.filter(hEl => a.includes(hEl)), nodeSets[0] || []);\n}\n\n/**\n * Get an array representing the complement of the union of the sets of checked nodes.\n * @param {object} currTree\n * @returns {array} An array representing the complement of the\n * union of the sets of checked nodes.\n */\nexport function treeToComplement(currTree, checkedPaths, items) {\n  const primaryUnion = treeToUnion(currTree, checkedPaths);\n  return items.filter(el => !primaryUnion.includes(el));\n}\n\n/**\n * Get an flattened array of descendants at a particular relative\n * level of interest.\n * @param {object} node A node object.\n * @param {number} level The relative level of interest.\n * 0 for this node's children, 1 for grandchildren, etc.\n * @param {boolean} stopEarly Should a node be returned early if no children exist?\n * @returns {object[]} An array of descendants at the specified level,\n * where the level is relative to the node.\n */\nexport function nodeToLevelDescendantNamePaths(node, level, prevPath, stopEarly = false) {\n  if (!node.children) {\n    if (!stopEarly) {\n      return null;\n    }\n    return [[...prevPath, node.name]];\n  }\n  if (level === 0) {\n    return [[...prevPath, node.name]];\n  }\n  return node.children\n    .flatMap(c => nodeToLevelDescendantNamePaths(c, level - 1, [...prevPath, node.name], stopEarly))\n    .filter(Boolean);\n}\n\n/**\n * Export the tree by clearing tree state and all node states.\n * @param {object} currTree A tree object.\n * @returns {object} Tree object with tree and node state removed.\n */\nexport function treeExport(currTree, datatype) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n    datatype,\n    tree: currTree.tree,\n  };\n}\n\n/**\n * Export the tree by clearing tree state and all node states,\n * and filter so that only the level zero node of interest is included.\n * @param {object} currTree A tree object.\n * @param {string} nodeKey The key of the node of interest.\n * @returns {object} { treeToExport, nodeName }\n * Tree with one level zero node, and with state removed.\n */\nexport function treeExportLevelZeroNode(currTree, nodePath, datatype, cellSetColors) {\n  const node = treeFindNodeByNamePath(currTree, nodePath);\n  const nodeWithColors = nodeTransformAll(node, () => true, (n, nPath) => {\n    const nodeColor = cellSetColors?.find(c => isEqual(c.path, nPath))?.color ?? DEFAULT_COLOR;\n    return {\n      ...n,\n      color: nodeColor.slice(0, 3),\n    };\n  }, []);\n  const treeWithOneLevelZeroNode = {\n    ...currTree,\n    tree: [nodeWithColors],\n  };\n  return {\n    treeToExport: treeExport(treeWithOneLevelZeroNode, datatype),\n    nodeName: node.name,\n  };\n}\n\n/**\n * Prepare the set of a node of interest for export.\n * @param {object} currTree A tree object.\n * @param {string} nodeKey The key of the node of interest.\n * @returns {object} { setToExport, nodeName } The set as an array.\n */\nexport function treeExportSet(currTree, nodePath) {\n  const node = treeFindNodeByNamePath(currTree, nodePath);\n  return { setToExport: nodeToSet(node), nodeName: node.name };\n}\n\n/**\n * Get an empty tree, with a default tree state.\n * @param {string} datatype The type of sets that this tree contains.\n * @returns {object} Empty tree.\n */\nexport function treeInitialize(datatype) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[datatype].latestVersion,\n    datatype,\n    tree: [],\n  };\n}\n\n/**\n * For convenience, get an object with information required\n * to render a node as a component.\n * @param {object} node A node to be rendered.\n * @returns {object} An object containing properties required\n * by the TreeNode render functions.\n */\nexport function nodeToRenderProps(node, path, cellSetColor) {\n  const level = path.length - 1;\n  return {\n    title: node.name,\n    nodeKey: pathToKey(path),\n    path,\n    size: nodeToSet(node).length,\n    color: cellSetColor?.find(d => isEqual(d.path, path))?.color,\n    level,\n    isLeaf: (!node.children || node.children.length === 0) && Boolean(node.set),\n    height: nodeToHeight(node),\n  };\n}\n\n/**\n * Using a color and a probability, mix the color with an \"uncertainty\" color,\n * for example, gray.\n * Reference: https://github.com/bgrins/TinyColor/blob/80f7225029c428c0de0757f7d98ac15f497bee57/tinycolor.js#L701\n * @param {number[]} originalColor The color assignment for the class.\n * @param {number} p The mixing amount, or level certainty in the originalColor classification,\n * between 0 and 1.\n * @param {number[]} mixingColor The color with which to mix. By default, [128, 128, 128] gray.\n * @returns {number[]} Returns the color after mixing.\n */\nfunction colorMixWithUncertainty(originalColor, p, mixingColor = [128, 128, 128]) {\n  return [\n    ((originalColor[0] - mixingColor[0]) * p) + mixingColor[0],\n    ((originalColor[1] - mixingColor[1]) * p) + mixingColor[1],\n    ((originalColor[2] - mixingColor[2]) * p) + mixingColor[2],\n  ];\n}\n\n/**\n * Given a tree with state, get the cellIds and cellColors,\n * based on the nodes currently marked as \"visible\".\n * @param {object} currTree A tree object.\n *  @param {array} selectedNamePaths Array of arrays of strings,\n * representing set \"paths\".\n * @param {object[]} cellSetColor Array of objects with the\n * properties `path` and `color`.\n * @returns {array} Tuple of [cellIds, cellColors]\n * where cellIds is an array of strings,\n * and cellColors is an object mapping cellIds to color [r,g,b] arrays.\n */\nexport function treeToCellColorsBySetNames(currTree, selectedNamePaths, cellSetColor) {\n  let cellColorsArray = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = (\n        cellSetColor?.find(d => isEqual(d.path, setNamePath))?.color\n        || DEFAULT_COLOR\n      );\n      cellColorsArray = [\n        ...cellColorsArray,\n        ...nodeSet.map(([cellId, prob]) => [\n          cellId,\n          (isNil(prob) ? nodeColor : colorMixWithUncertainty(nodeColor, prob)),\n        ]),\n      ];\n    }\n  });\n  return new Map(cellColorsArray);\n}\n\n/**\n * Given a tree with state, get an array of\n * objects with cellIds and cellColors,\n * based on the nodes currently marked as \"visible\".\n * @param {object} currTree A tree object.\n * @param {array} selectedNamePaths Array of arrays of strings,\n * representing set \"paths\".\n * @param {object[]} setColor Array of objects with the\n * properties `path` and `color`.\n * @returns {object[]} Array of objects with properties\n * `obsId`, `name`, and `color`.\n */\nexport function treeToObjectsBySetNames(currTree, selectedNamePaths, setColor) {\n  let cellsArray = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = (\n        setColor?.find(d => isEqual(d.path, setNamePath))?.color\n        || DEFAULT_COLOR\n      );\n      cellsArray = [\n        ...cellsArray,\n        ...nodeSet.map(([cellId]) => ({\n          obsId: cellId,\n          name: node.name,\n          color: nodeColor,\n        })),\n      ];\n    }\n  });\n  return cellsArray;\n}\n\nexport function treeToCellPolygonsBySetNames(\n  currTree, cells, mapping, selectedNamePaths, cellSetColor,\n) {\n  const cellSetPolygons = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = (\n        cellSetColor?.find(d => isEqual(d.path, setNamePath))?.color\n        || DEFAULT_COLOR\n      );\n      const cellPositions = nodeSet\n        .map(([cellId]) => ([\n          cells[cellId]?.mappings[mapping][0],\n          -cells[cellId]?.mappings[mapping][1],\n        ]))\n        .filter(Boolean);\n\n      if (cellPositions.length > 2) {\n        const points = turfFeatureCollection(\n          cellPositions.map(turfPoint),\n        );\n        const hull = concave(points);\n        if (hull) {\n          const hullCoords = hull.geometry.coordinates;\n          const centroidCoords = centroid(points).geometry.coordinates;\n          cellSetPolygons.push({\n            path: setNamePath,\n            name: setNamePath[setNamePath.length - 1],\n            hull: hullCoords,\n            color: nodeColor,\n            centroid: centroidCoords,\n          });\n        }\n      }\n    }\n  });\n  return cellSetPolygons;\n}\n\n/**\n * Given a tree with state, get the sizes of the\n * sets currently marked as \"visible\".\n * @param {object} currTree A tree object.\n * @param {array} selectedNamePaths Array of arrays of strings,\n * representing set \"paths\".\n * @param {object[]} setColor Array of objects with the\n * properties `path` and `color`.\n * @returns {object[]} Array of objects\n * with the properties `name`, `size`, `key`,\n * and `color`.\n */\nexport function treeToSetSizesBySetNames(currTree, selectedNamePaths, setColor) {\n  const sizes = [];\n  selectedNamePaths.forEach((setNamePath) => {\n    const node = treeFindNodeByNamePath(currTree, setNamePath);\n    if (node) {\n      const nodeSet = nodeToSet(node);\n      const nodeColor = setColor.find(d => isEqual(d.path, setNamePath))?.color || DEFAULT_COLOR;\n      sizes.push({\n        key: generateKey(),\n        name: node.name,\n        size: nodeSet.length,\n        color: nodeColor,\n      });\n    }\n  });\n  return sizes;\n}\n\n/**\n * Find and remove a node from the descendants of the current node.\n * @param {object} node A node to search on.\n * @param {array} prevPath Path of the current node to be searched.\n * @param {array} filterPath The path sought.\n * @returns {object} A new node without a node at filterPath.\n */\nexport function filterNode(node, prevPath, filterPath) {\n  if (isEqual([...prevPath, node.name], filterPath)) {\n    return null;\n  }\n  if (!node.children) {\n    return node;\n  }\n  return {\n    ...node,\n    children: node.children.map(\n      c => filterNode(c, [...prevPath, node.name], filterPath),\n    ).filter(Boolean),\n  };\n}\n\nexport function treeToExpectedCheckedLevel(currTree, checkedPaths) {\n  let result = null;\n  if (currTree) {\n    currTree.tree.forEach((lzn) => {\n      const levelZeroPath = [lzn.name];\n      const height = nodeToHeight(lzn);\n      range(height).forEach((i) => {\n        const levelIndex = i + 1;\n        const levelNodePaths = nodeToLevelDescendantNamePaths(lzn, levelIndex, [], true);\n        if (isEqual(levelNodePaths, checkedPaths)) {\n          result = { levelZeroPath, levelIndex };\n        }\n      });\n    });\n  }\n  return result;\n}\n\nexport function treesConflict(cellSets, testCellSets) {\n  const paths = [];\n  const testPaths = [];\n  let hasConflict = false;\n\n  function getPaths(node, prevPath) {\n    paths.push([...prevPath, node.name]);\n    if (node.children) {\n      node.children.forEach(c => getPaths(c, [...prevPath, node.name]));\n    }\n  }\n  cellSets.tree.forEach(lzn => getPaths(lzn, []));\n\n  function getTestPaths(node, prevPath) {\n    testPaths.push([...prevPath, node.name]);\n    if (node.children) {\n      node.children.forEach(c => getPaths(c, [...prevPath, node.name]));\n    }\n  }\n  testCellSets.tree.forEach(lzn => getTestPaths(lzn, []));\n\n  testPaths.forEach((testPath) => {\n    if (paths.find(p => isEqual(p, testPath))) {\n      hasConflict = true;\n    }\n  });\n  return hasConflict;\n}\n\nexport function initializeCellSetColor(cellSets, cellSetColor) {\n  const nextCellSetColor = [...(cellSetColor || [])];\n  const nodeCountPerTreePerLevel = cellSets.tree.map(tree => Array\n    .from({\n      length: nodeToHeight(tree) + 1, // Need to add one because its an array.\n    }).fill(0));\n\n  function processNode(node, prevPath, hierarchyLevel, treeIndex) {\n    const index = nodeCountPerTreePerLevel[treeIndex][hierarchyLevel];\n    const nodePath = [...prevPath, node.name];\n\n    const nodeColor = nextCellSetColor.find(d => isEqual(d.path, nodePath));\n    if (!nodeColor) {\n      nextCellSetColor.push({\n        path: nodePath,\n        color: PALETTE[index % PALETTE.length],\n      });\n    }\n    nodeCountPerTreePerLevel[treeIndex][hierarchyLevel] += 1;\n    if (node.children) {\n      node.children.forEach(c => processNode(c, nodePath, hierarchyLevel + 1, treeIndex));\n    }\n  }\n\n  cellSets.tree.forEach((lzn, treeIndex) => processNode(lzn, [], 0, treeIndex));\n  return nextCellSetColor;\n}\n\nexport function getCellSetPolygons(params) {\n  const {\n    cells,\n    mapping,\n    cellSets,\n    cellSetSelection,\n    cellSetColor,\n  } = params;\n  if (cellSetSelection && cellSetSelection.length > 0 && cellSets && cells) {\n    return treeToCellPolygonsBySetNames(cellSets, cells, mapping, cellSetSelection, cellSetColor);\n  }\n  return [];\n}\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","/**\n * A loader error ancestor class containing a default constructor\n * and a stub for the required warnInConsole() method.\n */\nexport default class AbstractLoaderError {\n  constructor(message) {\n    this.message = message;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  warnInConsole() {\n    throw new Error('The warnInConsole() method has not been implemented.');\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderFetchError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl, responseHeaders) {\n    super(`Error HTTP status fetching ${datasetType}.`);\n    this.name = 'LoaderFetchError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n    this.responseHeaders = responseHeaders;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetUrl, responseHeaders,\n    } = this;\n    console.warn(\n      `${datasetType} from ${datasetUrl}: fetch failed`,\n      responseHeaders,\n    );\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderValidationError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl, reason) {\n    super(`Error while validating ${datasetType}.`);\n    this.name = 'LoaderValidationError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n    this.reason = reason;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetUrl, reason,\n    } = this;\n    console.warn(\n      `${datasetType} from ${datasetUrl}: validation failed`,\n      JSON.stringify(reason, null, 2),\n    );\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderNotFoundError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl) {\n    super(`Error finding loader for ${datasetType}.`);\n    this.name = 'LoaderNotFoundError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetFileType, datasetUrl,\n    } = this;\n    if (datasetFileType && datasetUrl) {\n      console.warn(\n        `${datasetType} from ${datasetUrl}: unable to find loader for fileType ${datasetFileType}`,\n      );\n    } else {\n      console.warn(\n        `${datasetType}: unable to find loader`,\n      );\n    }\n  }\n}\n","export { default as AbstractLoaderError } from './AbstractLoaderError';\nexport { default as LoaderFetchError } from './LoaderFetchError';\nexport { default as LoaderValidationError } from './LoaderValidationError';\nexport { default as LoaderNotFoundError } from './LoaderNotFoundError';\n","module.exports = require(\"deck.gl\");","import {\n  useRef, useState, useEffect, useCallback,\n} from 'react';\nimport debounce from 'lodash/debounce';\nimport { useGridResize, useEmitGridResize } from '../app/state/hooks';\n\n/**\n * Custom hook, subscribes to GRID_RESIZE and window resize events.\n * @returns {array} `[width, height, containerRef]` where width and height\n * are numbers and containerRef is a React ref.\n */\nexport function useGridItemSize() {\n  const containerRef = useRef();\n\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n\n  // On window resize events, increment the grid resize count.\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n\n  // On new grid resize counts, re-compute the component\n  // width/height.\n  useEffect(() => {\n    if (!containerRef.current) return;\n    const container = containerRef.current;\n    const containerRect = container.getBoundingClientRect();\n    setHeight(containerRect.height);\n    setWidth(containerRect.width);\n  }, [resizeCount]);\n\n  return [width, height, containerRef];\n}\n\n/**\n * Custom hook, subscribes to GRID_RESIZE and window resize events.\n * @returns {array} `[width, height, deckRef]` where width and height\n * are numbers and deckRef is a React ref to be used with\n * a <DeckGL/> element (or a forwardRef to one).\n */\nexport function useDeckCanvasSize() {\n  const deckRef = useRef();\n\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n\n  // On window resize events, increment the grid resize count.\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n\n  // On new grid resize counts, re-compute the DeckGL canvas\n  // width/height.\n  useEffect(() => {\n    if (!deckRef.current) return;\n    const { canvas } = deckRef.current.deck;\n    const canvasRect = canvas.getBoundingClientRect();\n    setHeight(canvasRect.height);\n    setWidth(canvasRect.width);\n  }, [resizeCount]);\n\n  return [width, height, deckRef];\n}\n\n/**\n * This hook handles a boolean isReady value,\n * which only returns true once every item in the\n * input list has been marked as \"ready\".\n * @param {string[]} items The items to wait on.\n * Should be defined as a constant\n * (outside a function component / render function),\n * otherwise strange bugs may occur.\n * @returns {array} An array\n * [isReady, setItemIsReady, resetReadyItems]\n * where isReady is the boolean value,\n * setItemIsReady marks one item as ready,\n * and resetReadyItem marks all items as waiting.\n */\nexport function useReady(supportedItems) {\n  const items = supportedItems;\n  const [waiting, setWaiting] = useState(items);\n\n  const setItemIsReady = useCallback((readyItem) => {\n    setWaiting((waitingItems) => {\n      const nextWaitingItems = waitingItems.filter(item => item !== readyItem);\n      // eslint-disable-next-line no-console\n      console.log(`cleared ${readyItem}; waiting on ${nextWaitingItems.length}: ${JSON.stringify(nextWaitingItems)}`);\n      return nextWaitingItems;\n    });\n  }, [setWaiting]);\n\n  const resetReadyItems = useCallback(() => {\n    setWaiting(items);\n    // eslint-disable-next-line no-console\n    console.log(`waiting on ${items.length}: ${JSON.stringify(items)}`);\n  }, [setWaiting, items]);\n\n  const isReady = waiting.length === 0;\n\n  return [isReady, setItemIsReady, resetReadyItems];\n}\n\n/**\n * This hook manages a list of URLs,\n * with adding and resetting helpers.\n * @returns {array} An array\n * [urls, addUrl, resetUrls]\n * where urls is the array of URL objects,\n * addUrl is a function for adding a URL to the array,\n * resetUrls is a function that clears the array.\n */\nexport function useUrls() {\n  const [urls, setUrls] = useState([]);\n\n  const addUrl = useCallback((url, name) => {\n    if (url) {\n      setUrls(prev => ([...prev, { url, name }]));\n    }\n  }, [setUrls]);\n\n  const resetUrls = useCallback(() => {\n    setUrls([]);\n  }, [setUrls]);\n\n  return [urls, addUrl, resetUrls];\n}\n","import { useState, useEffect } from 'react';\nimport { useSetWarning } from '../app/state/hooks';\nimport {\n  AbstractLoaderError,\n  LoaderNotFoundError,\n} from '../loaders/errors/index';\nimport { initializeRasterLayersAndChannels } from './spatial/utils';\n\n/**\n * Warn via publishing to the console\n * and to the global warning store.\n * @param {AbstractLoaderError} error An error instance.\n */\nfunction warn(error, setWarning) {\n  setWarning(error.message);\n  console.warn(error.message);\n  if (error instanceof AbstractLoaderError) {\n    error.warnInConsole();\n  }\n}\n\n/**\n * Get the dataset description string.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @returns {array} [description] where\n * description is a string.\n */\nexport function useDescription(loaders, dataset) {\n  const [description, setDescription] = useState();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].description) {\n      setDescription(loaders[dataset].description);\n    } else {\n      setDescription(null);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [description];\n}\n\n/**\n * Get data from a cells data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {(function|null)} onLoad An extra function to execute upon load of the data.\n * @returns {array} [cells, cellsCount] where\n * cells is an object and cellsCount is the\n * number of items in the cells object.\n */\nexport function useCellsData(loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null) {\n  const [cells, setCells] = useState({});\n  const [cellsCount, setCellsCount] = useState(0);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.cells) {\n      loaders[dataset].loaders.cells.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url } = payload;\n        setCells(data);\n        setCellsCount(Object.keys(data).length);\n        addUrl(url, 'Cells');\n        if (onLoad) {\n          onLoad();\n        }\n        setItemIsReady('cells');\n      });\n    } else {\n      setCells({});\n      setCellsCount(0);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'cells', null, null), setWarning);\n      } else {\n        setItemIsReady('cells');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [cells, cellsCount];\n}\n\n/**\n * Get data from a cell sets data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @returns {array} [cellSets] where\n * cellSets is a sets tree object.\n */\nexport function useCellSetsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null,\n) {\n  const [cellSets, setCellSets] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['cell-sets']) {\n      // Load the data initially.\n      loaders[dataset].loaders['cell-sets'].load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url } = payload;\n        setCellSets(data);\n        addUrl(url, 'Cell Sets');\n        if (onLoad) {\n          onLoad(data);\n        }\n        setItemIsReady('cell-sets');\n      });\n    } else {\n      setCellSets(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'cell-sets', null, null), setWarning);\n      } else {\n        setItemIsReady('cell-sets');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [cellSets];\n}\n\n/**\n * Get data from an expression matrix data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @returns {array} [expressionMatrix] where\n * expressionMatrix is an object with\n * shape { cols, rows, matrix }.\n */\nexport function useExpressionMatrixData(loaders, dataset, setItemIsReady, addUrl, isRequired) {\n  const [expressionMatrix, setExpressionMatrix] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['expression-matrix']) {\n      loaders[dataset].loaders['expression-matrix'].load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url } = payload;\n        const [attrs, arr] = data;\n        setExpressionMatrix({\n          cols: attrs.cols,\n          rows: attrs.rows,\n          matrix: arr.data,\n        });\n        addUrl(url, 'Expression Matrix');\n        setItemIsReady('expression-matrix');\n      });\n    } else {\n      setExpressionMatrix(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'expression-matrix', null, null), setWarning);\n      } else {\n        setItemIsReady('expression-matrix');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [expressionMatrix];\n}\n\n/**\n * Get data from a molecules data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {(function|null)} onLoad An extra function to execute upon load of the data.\n * @returns {array} [molecules, moleculesCount, locationsCount] where\n * molecules is an object,\n * moleculesCount is the number of unique molecule types, and\n * locationsCount is the number of molecules.\n */\nexport function useMoleculesData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null,\n) {\n  const [molecules, setMolecules] = useState();\n  const [moleculesCount, setMoleculesCount] = useState(0);\n  const [locationsCount, setLocationsCount] = useState(0);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.molecules) {\n      loaders[dataset].loaders.molecules.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url } = payload;\n        setMolecules(data);\n        setMoleculesCount(Object.keys(data).length);\n        setLocationsCount(Object.values(data)\n          .map(l => l.length)\n          .reduce((a, b) => a + b, 0));\n        addUrl(url, 'Molecules');\n        if (onLoad) {\n          onLoad();\n        }\n        setItemIsReady('molecules');\n      });\n    } else {\n      setMolecules({});\n      setMoleculesCount(0);\n      setLocationsCount(0);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'molecules', null, null), setWarning);\n      } else {\n        setItemIsReady('molecules');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [molecules, moleculesCount, locationsCount];\n}\n\n/**\n * Get data from a neighborhoods data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {(function|null)} onLoad An extra function to execute upon load of the data.\n * @returns {array} [neighborhoods] where\n * neighborhoods is an object.\n */\nexport function useNeighborhoodsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null,\n) {\n  const [neighborhoods, setNeighborhoods] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.neighborhoods) {\n      loaders[dataset].loaders.neighborhoods.load().catch(e => warn(e, setWarning))\n        .then((payload) => {\n          if (!payload) return;\n          const { data, url } = payload;\n          setNeighborhoods(data);\n          addUrl(url, 'Neighborhoods');\n          if (onLoad) {\n            onLoad();\n          }\n          setItemIsReady('neighborhoods');\n        });\n    } else {\n      setNeighborhoods({});\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'neighborhoods', null, null), setWarning);\n      } else {\n        setItemIsReady('neighborhoods');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [neighborhoods];\n}\n\n/**\n * Get data from a raster data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {(function|null)} onLoad An extra function to execute upon load of the data.\n * @returns {array} [raster, imageLayerLoaders, imageLayerMeta] where\n * raster is an object,\n * imageLayerLoaders is an object, and\n * imageLayerMeta is an object.\n */\nexport function useRasterData(loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null) {\n  const [raster, setRaster] = useState();\n  // Since we want the image layer / channel definitions to come from the\n  // coordination space stored as JSON in the view config,\n  // we need to set up a separate state variable here to store the\n  // non-JSON objects, such as layer loader instances.\n  const [imageLayerLoaders, setImageLayerLoaders] = useState([]);\n  const [imageLayerMeta, setImageLayerMeta] = useState([]);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.raster) {\n      loaders[dataset].loaders.raster.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, urls } = payload;\n        setRaster(data);\n        urls.forEach(([url, name]) => {\n          addUrl(url, name);\n        });\n\n        const {\n          layers: rasterLayers,\n          renderLayers:\n          rasterRenderLayers,\n          usePhysicalSizeScaling,\n        } = data;\n        initializeRasterLayersAndChannels(rasterLayers, rasterRenderLayers, usePhysicalSizeScaling)\n          .then(([autoImageLayers, nextImageLoaders, nextImageMeta]) => {\n            setImageLayerLoaders(nextImageLoaders);\n            setImageLayerMeta(nextImageMeta);\n            if (onLoad) {\n              onLoad(autoImageLayers);\n            }\n            setItemIsReady('raster');\n          });\n      });\n    } else {\n      // There was no raster loader for this dataset,\n      // and raster should be optional.\n      setImageLayerLoaders([]);\n      setImageLayerMeta([]);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'raster', null, null), setWarning);\n      } else {\n        setItemIsReady('raster');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [raster, imageLayerLoaders, imageLayerMeta];\n}\n\n/**\n * Get data from a genomic-profiles data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {(function|null)} onLoad An extra function to execute upon load of the data.\n * @returns {array} [neighborhoods] where\n * neighborhoods is an object.\n */\nexport function useGenomicProfilesData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null,\n) {\n  const [genomicProfilesAttrs, setGenomicProfilesAttrs] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['genomic-profiles']) {\n      loaders[dataset].loaders['genomic-profiles'].load().catch(e => warn(e, setWarning))\n        .then((payload) => {\n          if (!payload) return;\n          const { data, url } = payload;\n          setGenomicProfilesAttrs(data);\n          addUrl(url);\n          if (onLoad) {\n            onLoad();\n          }\n          setItemIsReady('genomic-profiles');\n        });\n    } else {\n      setGenomicProfilesAttrs(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'genomic-profiles', null, null), setWarning);\n      } else {\n        setItemIsReady('genomic-profiles');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [genomicProfilesAttrs];\n}\n","/**\n * Constants representing names of coordination types,\n * to help prevent typos.\n */\nexport const COORDINATION_TYPES = {\n  DATASET: 'dataset',\n  EMBEDDING_TYPE: 'embeddingType',\n  EMBEDDING_ZOOM: 'embeddingZoom',\n  EMBEDDING_ROTATION: 'embeddingRotation',\n  EMBEDDING_TARGET_X: 'embeddingTargetX',\n  EMBEDDING_TARGET_Y: 'embeddingTargetY',\n  EMBEDDING_TARGET_Z: 'embeddingTargetZ',\n  EMBEDDING_CELL_SET_POLYGONS_VISIBLE: 'embeddingCellSetPolygonsVisible',\n  EMBEDDING_CELL_SET_LABELS_VISIBLE: 'embeddingCellSetLabelsVisible',\n  EMBEDDING_CELL_SET_LABEL_SIZE: 'embeddingCellSetLabelSize',\n  EMBEDDING_CELL_RADIUS: 'embeddingCellRadius',\n  SPATIAL_ZOOM: 'spatialZoom',\n  SPATIAL_ROTATION: 'spatialRotation',\n  SPATIAL_TARGET_X: 'spatialTargetX',\n  SPATIAL_TARGET_Y: 'spatialTargetY',\n  SPATIAL_TARGET_Z: 'spatialTargetZ',\n  HEATMAP_ZOOM_X: 'heatmapZoomX',\n  HEATMAP_ZOOM_Y: 'heatmapZoomY',\n  HEATMAP_TARGET_X: 'heatmapTargetX',\n  HEATMAP_TARGET_Y: 'heatmapTargetY',\n  CELL_FILTER: 'cellFilter',\n  CELL_HIGHLIGHT: 'cellHighlight',\n  CELL_SET_SELECTION: 'cellSetSelection',\n  CELL_SET_HIGHLIGHT: 'cellSetHighlight',\n  CELL_SET_COLOR: 'cellSetColor',\n  GENE_FILTER: 'geneFilter',\n  GENE_HIGHLIGHT: 'geneHighlight',\n  GENE_SELECTION: 'geneSelection',\n  GENE_EXPRESSION_COLORMAP: 'geneExpressionColormap',\n  GENE_EXPRESSION_COLORMAP_RANGE: 'geneExpressionColormapRange',\n  CELL_COLOR_ENCODING: 'cellColorEncoding',\n  SPATIAL_LAYERS: 'spatialLayers',\n  GENOMIC_ZOOM_X: 'genomicZoomX',\n  GENOMIC_ZOOM_Y: 'genomicZoomY',\n  GENOMIC_TARGET_X: 'genomicTargetX',\n  GENOMIC_TARGET_Y: 'genomicTargetY',\n  ADDITIONAL_CELL_SETS: 'additionalCellSets',\n  MOLECULE_HIGHLIGHT: 'moleculeHighlight',\n};\n\n/**\n * Coordination types may have default values,\n * which can be defined here, and used by the\n * auto initialization strategy.\n */\nexport const DEFAULT_COORDINATION_VALUES = {\n  [COORDINATION_TYPES.EMBEDDING_ZOOM]: null,\n  [COORDINATION_TYPES.EMBEDDING_ROTATION]: 0,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_X]: null,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_Y]: null,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_Z]: 0,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE]: false,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE]: false,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE]: 14,\n  [COORDINATION_TYPES.EMBEDDING_CELL_RADIUS]: 1,\n  [COORDINATION_TYPES.SPATIAL_ZOOM]: null,\n  [COORDINATION_TYPES.SPATIAL_ROTATION]: 0,\n  [COORDINATION_TYPES.SPATIAL_TARGET_X]: null,\n  [COORDINATION_TYPES.SPATIAL_TARGET_Y]: null,\n  [COORDINATION_TYPES.SPATIAL_TARGET_Z]: 0,\n  [COORDINATION_TYPES.SPATIAL_LAYERS]: null,\n  [COORDINATION_TYPES.HEATMAP_ZOOM_X]: 0,\n  [COORDINATION_TYPES.HEATMAP_ZOOM_Y]: 0,\n  [COORDINATION_TYPES.HEATMAP_TARGET_X]: 0,\n  [COORDINATION_TYPES.HEATMAP_TARGET_Y]: 0,\n  [COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP]: 'plasma',\n  [COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE]: [0.0, 1.0],\n  [COORDINATION_TYPES.GENE_FILTER]: null,\n  [COORDINATION_TYPES.GENE_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.GENE_SELECTION]: null,\n  [COORDINATION_TYPES.CELL_FILTER]: null,\n  [COORDINATION_TYPES.CELL_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.CELL_SET_SELECTION]: null,\n  [COORDINATION_TYPES.CELL_SET_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.CELL_SET_COLOR]: null,\n  [COORDINATION_TYPES.CELL_COLOR_ENCODING]: 'cellSetSelection',\n  [COORDINATION_TYPES.GENOMIC_ZOOM_X]: 0,\n  [COORDINATION_TYPES.GENOMIC_ZOOM_Y]: 0,\n  [COORDINATION_TYPES.GENOMIC_TARGET_X]: 1549999999.5,\n  [COORDINATION_TYPES.GENOMIC_TARGET_Y]: 1549999999.5,\n  [COORDINATION_TYPES.ADDITIONAL_CELL_SETS]: null,\n  [COORDINATION_TYPES.MOLECULE_HIGHLIGHT]: null,\n};\n\n// The following coordination types should be\n// initialized to independent scopes when\n// initialized automatically.\n// These make the resulting view config\n// (after auto-initialization) behave\n// like \"legacy\" Vitessce (pre-coordination model).\nexport const AUTO_INDEPENDENT_COORDINATION_TYPES = [\n  COORDINATION_TYPES.SPATIAL_ZOOM,\n  COORDINATION_TYPES.SPATIAL_TARGET_X,\n  COORDINATION_TYPES.SPATIAL_TARGET_Y,\n  COORDINATION_TYPES.SPATIAL_TARGET_Z,\n  COORDINATION_TYPES.HEATMAP_ZOOM_X,\n  COORDINATION_TYPES.HEATMAP_ZOOM_Y,\n  COORDINATION_TYPES.HEATMAP_TARGET_X,\n  COORDINATION_TYPES.HEATMAP_TARGET_Y,\n  COORDINATION_TYPES.EMBEDDING_ZOOM,\n  COORDINATION_TYPES.EMBEDDING_TARGET_X,\n  COORDINATION_TYPES.EMBEDDING_TARGET_Y,\n  COORDINATION_TYPES.EMBEDDING_TARGET_Z,\n  COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE,\n  COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE,\n  COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE,\n  COORDINATION_TYPES.EMBEDDING_CELL_RADIUS,\n];\n\n/**\n   * Mapping from component type to\n   * supported coordination object types.\n   * This mapping can be used to determine\n   * which pieces of state that a component will\n   * need to get/set.\n   * Keys here are the component registry keys.\n   */\nexport const COMPONENT_COORDINATION_TYPES = {\n  scatterplot: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.EMBEDDING_TYPE,\n    COORDINATION_TYPES.EMBEDDING_ZOOM,\n    COORDINATION_TYPES.EMBEDDING_ROTATION,\n    COORDINATION_TYPES.EMBEDDING_TARGET_X,\n    COORDINATION_TYPES.EMBEDDING_TARGET_Y,\n    COORDINATION_TYPES.EMBEDDING_TARGET_Z,\n    COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE,\n    COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE,\n    COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE,\n    COORDINATION_TYPES.EMBEDDING_CELL_RADIUS,\n    COORDINATION_TYPES.CELL_FILTER,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  spatial: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.SPATIAL_ZOOM,\n    COORDINATION_TYPES.SPATIAL_ROTATION,\n    COORDINATION_TYPES.SPATIAL_LAYERS,\n    COORDINATION_TYPES.SPATIAL_TARGET_X,\n    COORDINATION_TYPES.SPATIAL_TARGET_Y,\n    COORDINATION_TYPES.SPATIAL_TARGET_Z,\n    COORDINATION_TYPES.CELL_FILTER,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n    COORDINATION_TYPES.MOLECULE_HIGHLIGHT,\n  ],\n  heatmap: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.HEATMAP_ZOOM_X,\n    COORDINATION_TYPES.HEATMAP_ZOOM_Y,\n    COORDINATION_TYPES.HEATMAP_TARGET_X,\n    COORDINATION_TYPES.HEATMAP_TARGET_Y,\n    COORDINATION_TYPES.CELL_FILTER,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  cellSets: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  cellSetSizes: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  cellSetExpression: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  status: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.MOLECULE_HIGHLIGHT,\n  ],\n  genes: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n  ],\n  expressionHistogram: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENE_SELECTION,\n  ],\n  layerController: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.SPATIAL_LAYERS,\n  ],\n  higlass: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENOMIC_ZOOM_X,\n    COORDINATION_TYPES.GENOMIC_ZOOM_Y,\n    COORDINATION_TYPES.GENOMIC_TARGET_X,\n    COORDINATION_TYPES.GENOMIC_TARGET_Y,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n  ],\n  genomicProfiles: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENOMIC_ZOOM_X,\n    COORDINATION_TYPES.GENOMIC_ZOOM_Y,\n    COORDINATION_TYPES.GENOMIC_TARGET_X,\n    COORDINATION_TYPES.GENOMIC_TARGET_Y,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  description: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.SPATIAL_LAYERS,\n  ],\n};\n","module.exports = require(\"@deck.gl/core\");","module.exports = require(\"@hms-dbmi/viv\");","module.exports = require(\"mathjs\");","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export const TOOLTIP_ANCESTOR = 'tooltip-ancestor';\nconst CARD = `card card-body my-2 ${TOOLTIP_ANCESTOR}`;\nexport const PRIMARY_CARD = `${CARD} bg-primary`;\nexport const SECONDARY_CARD = `${CARD} bg-secondary`;\nexport const BLACK_CARD = `${CARD} bg-black`;\nexport const TITLE_CARD = 'title';\nexport const SCROLL_CARD = `${PRIMARY_CARD} scroll`;\n","module.exports = require(\"zustand\");","module.exports = require(\"@luma.gl/constants\");","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nexport default function LoadingIndicator() {\n  return (\n    <div className=\"loading-indicator-backdrop\">\n      <div className=\"loading-indicator-container\">\n        <CircularProgress />\n      </div>\n    </div>\n  );\n}\n","import React, { useReducer } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport IconButton from '@material-ui/core/IconButton';\nimport Link from '@material-ui/core/Link';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport { SCROLL_CARD, BLACK_CARD, SECONDARY_CARD } from './classNames';\nimport LoadingIndicator from './LoadingIndicator';\nimport { PopperMenu } from './shared-mui/components';\n\nconst useStyles = makeStyles(theme => ({\n  iconButton: {\n    border: 'none',\n    marginLeft: 0,\n    background: 'none',\n    color: theme.palette.primaryForeground,\n    paddingLeft: '0.25em',\n    paddingRight: '0.25em',\n    borderRadius: '2px',\n    '&:hover': {\n      backgroundColor: theme.palette.primaryBackgroundLight,\n    },\n    '&:first-child': {\n      marginLeft: '0.75em',\n    },\n    '&:last-child': {\n      marginRight: '0.25em',\n    },\n    '& svg': {\n      width: '0.7em',\n      height: '0.7em',\n      verticalAlign: 'middle',\n    },\n  },\n  downloadLink: {\n    color: theme.palette.primaryForeground,\n  },\n}));\n\nfunction SettingsIconWithArrow({ open }) {\n  return (\n    <>\n      <SettingsIcon />\n      {open ? <ArrowDropUpIcon /> : <ArrowDropDownIcon />}\n    </>\n  );\n}\n\nfunction PlotOptions(props) {\n  const { options } = props;\n  const [open, toggle] = useReducer(v => !v, false);\n  const classes = useStyles();\n  return (\n    <PopperMenu\n      open={open}\n      toggle={toggle}\n      buttonIcon={<SettingsIconWithArrow open={open} />}\n      buttonClassName={classes.iconButton}\n      placement=\"bottom-end\"\n    >\n      {options}\n    </PopperMenu>\n  );\n}\n\nfunction CloudDownloadIconWithArrow({ open }) {\n  return (\n    <>\n      <CloudDownloadIcon />\n      {open ? <ArrowDropUpIcon /> : <ArrowDropDownIcon />}\n    </>\n  );\n}\n\nfunction DownloadOptions(props) {\n  const { urls } = props;\n  const [open, toggle] = useReducer(v => !v, false);\n  const classes = useStyles();\n  return (\n    <PopperMenu\n      open={open}\n      toggle={toggle}\n      buttonIcon={<CloudDownloadIconWithArrow open={open} />}\n      buttonClassName={classes.iconButton}\n      placement=\"bottom-end\"\n    >\n      {urls.map(({ url, name }) => (\n        <MenuItem dense key={url}>\n          <Link underline=\"none\" href={url} target=\"_blank\" rel=\"noopener\" className={classes.downloadLink}>\n            Download {name}\n          </Link>\n        </MenuItem>\n      ))}\n    </PopperMenu>\n  );\n}\n\nfunction ClosePaneButton(props) {\n  const { removeGridComponent } = props;\n  const classes = useStyles();\n  return (\n    <IconButton\n      onClick={removeGridComponent}\n      size=\"small\"\n      className={classes.iconButton}\n      title=\"close\"\n    >\n      <CloseIcon />\n    </IconButton>\n  );\n}\n\nexport default function TitleInfo(props) {\n  const {\n    title, info, children, isScroll, isSpatial, removeGridComponent, urls,\n    isReady, options,\n  } = props;\n  // eslint-disable-next-line no-nested-ternary\n  const childClassName = isScroll ? SCROLL_CARD : (isSpatial ? BLACK_CARD : SECONDARY_CARD);\n  return (\n    // d-flex without wrapping div is not always full height; I don't understand the root cause.\n    <>\n      <div className=\"title d-flex justify-content-between align-items-baseline\">\n        <div className=\"justify-content-between d-flex align-items-end\">\n          <span>{title}</span>\n        </div>\n        <span className=\"details pl-2 align-items-end\">\n          <span className=\"d-flex justify-content-between\">\n            {info}\n            { options && (\n              <PlotOptions\n                options={options}\n              />\n            ) }\n            {urls && urls.length > 0 && (\n              <DownloadOptions\n                urls={urls}\n              />\n            )}\n            <ClosePaneButton\n              removeGridComponent={removeGridComponent}\n            />\n          </span>\n        </span>\n      </div>\n      <div className={childClassName}>\n        { !isReady && <LoadingIndicator /> }\n        {children}\n      </div>\n    </>\n    // \"pl-2\" only matters when the window is very narrow.\n  );\n}\n","module.exports = require(\"@deck.gl/layers\");","import { makeStyles, createMuiTheme } from '@material-ui/core/styles';\nimport { grey } from '@material-ui/core/colors';\n\nexport const styles = makeStyles(() => ({\n  paper: {\n    maxHeight: 200,\n    overflow: 'auto',\n    zIndex: 1500,\n  },\n  span: {\n    width: '70px',\n    textAlign: 'center',\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n  popper: {\n    zIndex: 4,\n  },\n}));\n\nexport const muiTheme = {\n  dark: createMuiTheme({\n    palette: {\n      type: 'dark',\n      primary: grey,\n      secondary: grey,\n      primaryBackground: '#222222',\n      primaryBackgroundHighlight: '#000000',\n      primaryBackgroundInput: '#D3D3D3',\n      primaryBackgroundDim: '#333333',\n      primaryBackgroundLight: '#757575',\n      primaryForeground: '#D3D3D3',\n      primaryForegroundDim: '#000000',\n      primaryForegroundActive: '#9bb7d6',\n      secondaryBackground: '#000000',\n      secondaryBackgroundDim: '#444444',\n      secondaryForeground: '#D3D3D3',\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true,\n      },\n    },\n  }),\n  light: createMuiTheme({\n    palette: {\n      type: 'light',\n      primary: grey,\n      secondary: grey,\n      primaryBackground: '#F1F1F1',\n      primaryBackgroundHighlight: '#FFFFFF',\n      primaryBackgroundInput: '#FFFFFF',\n      primaryBackgroundDim: '#8A8A8A',\n      primaryBackgroundLight: '#e0e0e0',\n      primaryForeground: '#333333',\n      primaryForegroundDim: '#808080',\n      primaryForegroundActive: '#0074D9',\n      secondaryBackground: '#F1F1F1',\n      secondaryBackgroundDim: '#C0C0C0',\n      secondaryForeground: '#222222',\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true,\n      },\n    },\n  }),\n};\n","module.exports = require(\"d3-array\");","module.exports = require(\"@material-ui/core/colors\");","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","module.exports = require(\"@material-ui/core/IconButton\");","import React, { useRef } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport { styles } from './styles';\n\nfunction MuiPopper(props) {\n  const classes = styles();\n  const {\n    anchorEl,\n    open,\n    placement = 'bottom-start',\n    children,\n  } = props;\n  return (\n    <Popper\n      className={classes.popper}\n      open={open}\n      anchorEl={anchorEl.current}\n      placement={placement}\n    >\n      {children}\n    </Popper>\n  );\n}\n\nfunction MuiPaper(props) {\n  const { children } = props;\n  const classes = styles();\n  return (\n    <Paper className={classes.paper} elevation={4}>\n      {children}\n    </Paper>\n  );\n}\n\nexport function MuiSpan(props) {\n  const { children } = props;\n  const classes = styles();\n  return <span className={classes.span}>{children}</span>;\n}\n\nexport function PopperMenu(props) {\n  const {\n    buttonIcon,\n    open,\n    toggle,\n    children,\n    placement,\n    buttonClassName,\n  } = props;\n  const anchorRef = useRef(null);\n  const classes = styles();\n  return (\n    <>\n      <IconButton\n        onClick={toggle}\n        size=\"small\"\n        ref={anchorRef}\n        className={buttonClassName}\n      >\n        {buttonIcon}\n      </IconButton>\n      <MuiPopper\n        className={classes.popper}\n        open={open}\n        anchorEl={anchorRef}\n        placement={placement}\n      >\n        <MuiPaper>\n          <ClickAwayListener onClickAway={toggle}>\n            <MenuList>{children}</MenuList>\n          </ClickAwayListener>\n        </MuiPaper>\n      </MuiPopper>\n    </>\n  );\n}\n","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","/* eslint-disable no-plusplus */\nimport shortNumber from 'short-number';\nimport { cloneDeep, isEqual } from 'lodash';\nimport { getChannelStats, getDefaultInitialViewState } from '@hms-dbmi/viv';\nimport { extent } from 'd3-array';\nimport { Matrix4 } from 'math.gl';\nimport { divide, compare, unit } from 'mathjs';\nimport { pluralize } from '../../utils';\nimport { VIEWER_PALETTE } from '../utils';\nimport {\n  GLOBAL_SLIDER_DIMENSION_FIELDS,\n  DEFAULT_RASTER_LAYER_PROPS,\n  DEFAULT_LAYER_TYPE_ORDERING,\n} from './constants';\n\nexport function square(x, y, r) {\n  return [[x, y + r], [x + r, y], [x, y - r], [x - r, y]];\n}\n\n/**\n * Sort spatial layer definition array,\n * to keep the ordering in the layer controller\n * consistent.\n * Intended to be used with auto-initialized layer\n * definition arrays only, as a pre-defined layer array\n * should not be re-ordered.\n * @param {object[]} layers Array of layer definition objects.\n * Object must have a .type property.\n */\nexport function sortLayers(layers) {\n  return layers.sort((a, b) => (\n    DEFAULT_LAYER_TYPE_ORDERING.indexOf(a.type) - DEFAULT_LAYER_TYPE_ORDERING.indexOf(b.type)\n  ));\n}\n\n/**\n * Return the midpoint of the global dimensions.\n * @param {object[]} imageDims Loader dimensions object array.\n * @returns {object} The selection.\n */\nfunction getDefaultGlobalSelection(imageDims) {\n  const globalIndices = imageDims\n    .filter(dim => GLOBAL_SLIDER_DIMENSION_FIELDS.includes(dim.field));\n  const selection = {};\n  globalIndices.forEach((dim) => {\n    selection[dim.field] = Math.floor((dim.values.length || 0) / 2);\n  });\n  return selection;\n}\n\n/**\n * Create a default selection using the midpoint of the available global dimensions,\n * and then the first four available selections from the first selectable channel.\n * @param {object[]} imageDims Loader dimensions object array.\n * @returns {object} The selection.\n */\nfunction buildDefaultSelection(imageDims) {\n  const selection = [];\n  const globalSelection = getDefaultGlobalSelection(imageDims);\n  // First non-global dimension with some sort of selectable values\n  const firstNonGlobalDimension = imageDims.filter(\n    dim => !GLOBAL_SLIDER_DIMENSION_FIELDS.includes(dim.field) && dim.values,\n  )[0];\n  for (let i = 0; i < Math.min(4, firstNonGlobalDimension.values.length); i += 1) {\n    selection.push(\n      {\n        [firstNonGlobalDimension.field]: i,\n        ...globalSelection,\n      },\n    );\n  }\n  return selection;\n}\n\n/**\n * Initialize the channel settings for an individual channel and selection.\n * @param {object} loader A viv loader instance, for either Zarr or OME-TIFF.\n * @param {object} selection The channel selection object.\n * @param {number} i The index of this channel for the layer.\n * @returns {object} The initialized channel with\n * domain/slider settings.\n */\nexport async function initializeChannelForSelection(loader, selection, i) {\n  // Get stats because initial value is Min/Max for domainType.\n  const stats = await getChannelStats({ loader, loaderSelection: [selection] });\n\n  const domain = loader.isRgb ? [[0, 255], [0, 255], [0, 255]][i] : stats[0].domain;\n  const color = loader.isRgb ? [[255, 0, 0], [0, 255, 0], [0, 0, 255]][i] : VIEWER_PALETTE[i];\n  const slider = loader.isRgb ? [[0, 255], [0, 255], [0, 255]][i] : stats[0].autoSliders;\n\n  return {\n    selection,\n    color,\n    visible: true,\n    slider: slider || domain,\n  };\n}\n\n/**\n * Initialize the channel selections for an individual layer.\n * @param {object} loader A viv loader instance, for either Zarr or OME-TIFF.\n * @returns {object[]} An array of selected channels with default\n * domain/slider settings.\n */\nexport async function initializeLayerChannels(loader) {\n  const result = [];\n  const loaderDimensions = loader.dimensions;\n  // Add channel automatically as the first avaialable value for each dimension.\n  const defaultSelection = buildDefaultSelection(loaderDimensions);\n  // Get stats because initial value is Min/Max for domainType.\n  const stats = await getChannelStats({ loader, loaderSelection: defaultSelection });\n\n  const domains = loader.isRgb\n    ? [[0, 255], [0, 255], [0, 255]]\n    : stats.map(stat => stat.domain);\n  const colors = loader.isRgb\n    ? [[255, 0, 0], [0, 255, 0], [0, 0, 255]]\n    : null;\n  const sliders = loader.isRgb\n    ? [[0, 255], [0, 255], [0, 255]]\n    : stats.map(stat => stat.autoSliders);\n\n  defaultSelection.forEach((selection, i) => {\n    const domain = domains[i];\n    const slider = sliders[i];\n    const channel = {\n      selection,\n      color: colors ? colors[i] : VIEWER_PALETTE[i],\n      visible: true,\n      slider: slider || domain,\n    };\n    result.push(channel);\n  });\n  return result;\n}\n\n/**\n * A user may want to use pre-defined channels of interest\n * (defined in a `spatialLayers` coordination object),\n * but wants to allow Vitessce to auto-initialize the\n * sliders, colors, and/or domains for those channels.\n * This function allows those channel properties to\n * be initialized.\n * @param {object[]} layerDefsOrig The original array\n * of user-defined layer definitions, which must contain\n * an array of channel definitions with the .selection\n * property, but may be missing the .domain, .color, .visible,\n * or .slider properties.\n * @param {object} loaders Mapping from layer index to loader\n * instance.\n * @returns {Promise<array>} A tuple of [newLayerDefs, didInitialize],\n * where newLayerDefs is an array of the layers which contains\n * initialized channel properties,\n * and didInitialize is a boolean value indicating whether any\n * channels were initialized.\n */\nexport async function initializeLayerChannelsIfMissing(layerDefsOrig, loaders) {\n  const layerDefs = cloneDeep(layerDefsOrig);\n  const newLayerDefPromises = [];\n\n  let didInitialize = false;\n  for (let layerIndex = 0; layerIndex < layerDefs.length; layerIndex++) {\n    const layerDef = layerDefs[layerIndex];\n    const loader = loaders[layerDef.index];\n    let newLayerDefPromise = Promise.resolve(layerDef);\n    if (layerDef.channels) {\n      const newChannelDefPromises = [];\n      for (let channelIndex = 0; channelIndex < layerDef.channels.length; channelIndex++) {\n        const channelDef = layerDef.channels[channelIndex];\n        let newChannelDefPromise = Promise.resolve(channelDef);\n        // Only auto-initialize if domains, colors, or sliders is missing.\n        if (channelDef.selection && !(channelDef.color && channelDef.slider)) {\n          newChannelDefPromise = initializeChannelForSelection(\n            loader, channelDef.selection, channelIndex,\n          )\n            .then(autoChannelDef => Promise.resolve({ ...autoChannelDef, ...channelDef }));\n          didInitialize = true;\n        }\n        newChannelDefPromises.push(newChannelDefPromise);\n      }\n      newLayerDefPromise = Promise.all(newChannelDefPromises)\n        .then(newChannelDefs => Promise.resolve({ ...layerDef, channels: newChannelDefs }));\n    }\n    newLayerDefPromises.push(newLayerDefPromise);\n  }\n  const newLayerDefs = await Promise.all(newLayerDefPromises);\n  return [newLayerDefs, didInitialize];\n}\n\nfunction getMetaWithTransformMatrices(imageMeta, imageLoaders) {\n  // Do not fill in transformation matrices if any of the layers specify one.\n  if (\n    imageMeta.map(meta => meta?.metadata?.transform?.matrix\n      || meta?.metadata?.transform?.scale\n      || meta?.metadata?.transform?.translate).some(Boolean)\n      || imageLoaders.every(loader => !loader?.physicalSizes?.x || !loader?.physicalSizes?.y)\n  ) {\n    return imageMeta;\n  }\n  // Get the minimum physical among all the current images.\n  const minPhysicalSize = imageLoaders.reduce((acc, loader) => {\n    const sizes = [\n      unit(`${loader.physicalSizes.x.value} ${loader.physicalSizes.x.unit}`.replace('', 'u')),\n      unit(`${loader.physicalSizes.y.value} ${loader.physicalSizes.y.unit}`.replace('', 'u')),\n    ];\n    acc[0] = (acc[0] === undefined || compare(sizes[0], acc[0]) === -1) ? sizes[0] : acc[0];\n    acc[1] = (acc[1] === undefined || compare(sizes[1], acc[1]) === -1) ? sizes[1] : acc[1];\n    return acc;\n  }, []);\n  const imageMetaWithTransform = imageMeta.map((meta, j) => {\n    const loader = imageLoaders[j];\n    const sizes = [\n      unit(`${loader.physicalSizes.x.value} ${loader.physicalSizes.x.unit}`.replace('', 'u')),\n      unit(`${loader.physicalSizes.y.value} ${loader.physicalSizes.y.unit}`.replace('', 'u')),\n    ];\n    // Find the ratio of the sizes to get the scaling factor.\n    const scale = sizes.map((i, k) => divide(i, minPhysicalSize[k]));\n    // no need to store/use identity scaling\n    if (isEqual(scale, [1, 1])) {\n      return meta;\n    }\n    // Make sure to scale the z direction by one.\n    const matrix = new Matrix4().scale([...scale, 1]);\n    const newMeta = { ...meta };\n    newMeta.metadata = {\n      ...newMeta.metadata,\n      // We don't want to store matrix objects in the view config.\n      transform: { matrix: matrix.toArray() },\n    };\n    return newMeta;\n  });\n  return imageMetaWithTransform;\n}\n\n/**\n * Given a set of image layer loader creator functions,\n * create loader objects for an initial layer or set of layers,\n * which will be selected based on default values predefined in\n * the image data file or otherwise by a heuristic\n * (the midpoint of the layers array).\n * @param {object[]} rasterLayers A list of layer metadata objects with\n * shape { name, type, url, createLoader }.\n * @param {(string[]|null)} rasterRenderLayers A list of default raster layers. Optional.\n */\nexport async function initializeRasterLayersAndChannels(\n  rasterLayers,\n  rasterRenderLayers,\n  usePhysicalSizeScaling,\n) {\n  const nextImageLoaders = [];\n  let nextImageMeta = [];\n  const autoImageLayerDefPromises = [];\n\n  // Start all loader creators immediately.\n  // Reference: https://eslint.org/docs/rules/no-await-in-loop\n  const loaders = await Promise.all(rasterLayers.map(layer => layer.loaderCreator()));\n\n  for (let i = 0; i < rasterLayers.length; i++) {\n    const layer = rasterLayers[i];\n    const loader = loaders[i];\n    nextImageLoaders[i] = loader;\n    nextImageMeta[i] = layer;\n  }\n  if (usePhysicalSizeScaling) {\n    nextImageMeta = getMetaWithTransformMatrices(nextImageMeta, nextImageLoaders);\n  }\n  // No layers were pre-defined so set up the default image layers.\n  if (!rasterRenderLayers) {\n    // Midpoint of images list as default image to show.\n    const layerIndex = Math.floor(rasterLayers.length / 2);\n    const loader = nextImageLoaders[layerIndex];\n    const autoImageLayerDefPromise = initializeLayerChannels(loader)\n      .then(channels => Promise.resolve({\n        type: 'raster', index: layerIndex, ...DEFAULT_RASTER_LAYER_PROPS, channels, modelMatrix: nextImageMeta[layerIndex]?.metadata?.transform?.matrix, transparentColor: layerIndex > 0 ? [0, 0, 0] : null,\n      }));\n    autoImageLayerDefPromises.push(autoImageLayerDefPromise);\n  } else {\n    // The renderLayers parameter is a list of layer names to show by default.\n    const globalIndicesOfRenderLayers = rasterRenderLayers\n      .map(imageName => rasterLayers.findIndex(image => image.name === imageName));\n    for (let i = 0; i < globalIndicesOfRenderLayers.length; i++) {\n      const layerIndex = globalIndicesOfRenderLayers[i];\n      const loader = nextImageLoaders[layerIndex];\n      const autoImageLayerDefPromise = initializeLayerChannels(loader)\n        // eslint-disable-next-line no-loop-func\n        .then(channels => Promise.resolve({\n          type: 'raster', index: layerIndex, ...DEFAULT_RASTER_LAYER_PROPS, channels, domainType: 'Min/Max', modelMatrix: nextImageMeta[layerIndex]?.metadata?.transform?.matrix, transparentColor: i > 0 ? [0, 0, 0] : null,\n        }));\n      autoImageLayerDefPromises.push(autoImageLayerDefPromise);\n    }\n  }\n\n  const autoImageLayerDefs = await Promise.all(autoImageLayerDefPromises);\n  return [autoImageLayerDefs, nextImageLoaders, nextImageMeta];\n}\n\n/**\n * Make a subtitle for the spatial component.\n * @param {object} params\n * @param {number} params.observationsCount\n * @param {string} params.observationsLabel\n * @param {string} params.observationsPluralLabel\n * @param {number} params.subobservationsCount\n * @param {string} params.subobservationsLabel\n * @param {string} params.subobservationsPluralLabel\n * @param {number} params.locationsCount\n * @returns {string} The subtitle string,\n * with info about items with zero counts omitted.\n */\nexport function makeSpatialSubtitle({\n  observationsCount, observationsLabel, observationsPluralLabel,\n  subobservationsCount, subobservationsLabel, subobservationsPluralLabel,\n  locationsCount,\n}) {\n  const parts = [];\n  if (subobservationsCount > 0) {\n    let part = `${subobservationsCount} ${pluralize(subobservationsLabel, subobservationsPluralLabel, subobservationsCount)}`;\n    if (locationsCount > 0) {\n      part += ` at ${shortNumber(locationsCount)} locations`;\n    }\n    parts.push(part);\n  }\n  if (observationsCount > 0) {\n    parts.push(`${observationsCount} ${pluralize(observationsLabel, observationsPluralLabel, observationsCount)}`);\n  }\n  return parts.join(', ');\n}\n\nexport function getInitialSpatialTargets({\n  width,\n  height,\n  cells,\n  imageLayerLoaders,\n}) {\n  let initialTargetX = -Infinity;\n  let initialTargetY = -Infinity;\n  let initialZoom = -Infinity;\n  // Some backoff from completely filling the screen.\n  const zoomBackoff = 0.1;\n  const cellValues = Object.values(cells);\n  if (imageLayerLoaders.length > 0) {\n    for (let i = 0; i < imageLayerLoaders.length; i += 1) {\n      const viewSize = { height, width };\n      const { target, zoom: newViewStateZoom } = getDefaultInitialViewState(\n        imageLayerLoaders[i],\n        viewSize,\n        zoomBackoff,\n      );\n      if (target[0] > initialTargetX) {\n        // eslint-disable-next-line prefer-destructuring\n        initialTargetX = target[0];\n        initialZoom = newViewStateZoom;\n      }\n      if (target[1] > initialTargetY) {\n        // eslint-disable-next-line prefer-destructuring\n        initialTargetY = target[1];\n        initialZoom = newViewStateZoom;\n      }\n    }\n  } else if (cellValues.length > 0) {\n    const cellCoordinates = cellValues.map(c => c.xy);\n    const xExtent = extent(cellCoordinates, c => c[0]);\n    const yExtent = extent(cellCoordinates, c => c[1]);\n    const xRange = xExtent[1] - xExtent[0];\n    const yRange = yExtent[1] - yExtent[0];\n    initialTargetX = xExtent[0] + xRange / 2;\n    initialTargetY = yExtent[0] + yRange / 2;\n    initialZoom = Math.log2(Math.min(width / xRange, height / yRange)) - zoomBackoff;\n  }\n  return { initialTargetX, initialTargetY, initialZoom };\n}\n","module.exports = require(\"@material-ui/core/MenuItem\");","module.exports = require(\"lodash/range\");","module.exports = require(\"nebula.gl\");","module.exports = require(\"@material-ui/icons/ArrowDropDown\");","module.exports = require(\"@material-ui/icons/ArrowDropUp\");","module.exports = require(\"lodash/debounce\");","module.exports = require(\"@turf/helpers\");","module.exports = require(\"uuid/v4\");","module.exports = require(\"@material-ui/core/TableCell\");","module.exports = require(\"@material-ui/core/Paper\");","import getPrototypeOf from \"./getPrototypeOf\";\nexport default function _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}","import superPropBase from \"./superPropBase\";\nexport default function _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    _get = Reflect.get;\n  } else {\n    _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}","module.exports = require(\"lodash\");","module.exports = require(\"math.gl\");","module.exports = require(\"@material-ui/icons/CloudDownload\");","module.exports = require(\"@material-ui/core/Link\");","module.exports = require(\"@material-ui/icons/Settings\");","module.exports = require(\"@material-ui/icons/Close\");","module.exports = require(\"@material-ui/core/CircularProgress\");","module.exports = require(\"@material-ui/core/Popper\");","module.exports = require(\"@material-ui/core/MenuList\");","module.exports = require(\"@material-ui/core/ClickAwayListener\");","module.exports = require(\"zustand/shallow\");","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","module.exports = require(\"short-number\");","module.exports = require(\"lodash/isNil\");","module.exports = require(\"@material-ui/core/Select\");","module.exports = require(\"tinycolor2\");","import React from 'react';\nimport Tooltip from './Tooltip';\n\n/**\n * A tooltip component that also incorporates a crosshair element.\n * @param {object} props\n * @param {string} props.parentUuid A unique identifier corresponding to the plot\n * with which this scatterplot is associated.\n * @param {string} props.sourceUuid A unique identifier corresponding to the plot\n * from which this tooltip originated.\n * @param {number} props.x The x coordinate for the tooltip.\n * @param {number} props.y The y coordinate for the tooltip.\n * @param {number} props.parentWidth The width of the parent plot container element.\n * @param {number} props.parentHeight The height of the parent plot container element.\n * @param {React.Component} props.children The tooltip contents as a react component.\n */\nexport default function Tooltip2D(props) {\n  const {\n    parentUuid,\n    sourceUuid,\n    x,\n    y,\n    parentWidth,\n    parentHeight,\n    children,\n  } = props;\n  // Check if out of bounds.\n  if (x < 0 || x > parentWidth || y < 0 || y > parentHeight) {\n    return null;\n  }\n  // Show tooltip or crosshair?\n  const isTooltipVisible = (parentUuid === sourceUuid);\n  const crosshairWidth = 1;\n  return (\n    <>\n      {isTooltipVisible ? (\n        <Tooltip\n          x={x}\n          y={y}\n          parentWidth={parentWidth}\n          parentHeight={parentHeight}\n        >\n          {children}\n        </Tooltip>\n      ) : (\n        <>\n          {x !== null ? (\n            <div\n              className=\"cell-emphasis-crosshair\"\n              style={{\n                left: `${x - crosshairWidth / 2}px`,\n                top: 0,\n                width: `${crosshairWidth}px`,\n                height: `${parentHeight}px`,\n              }}\n            />\n          ) : null}\n          {y !== null ? (\n            <div\n              className=\"cell-emphasis-crosshair\"\n              style={{\n                left: 0,\n                top: `${y - crosshairWidth / 2}px`,\n                width: `${parentWidth}px`,\n                height: `${crosshairWidth}px`,\n              }}\n            />\n          ) : null}\n        </>\n      )}\n    </>\n  );\n}\n","import React from 'react';\n\nexport default function TooltipContent(props) {\n  const {\n    info,\n  } = props;\n\n  return (\n    <table>\n      <tbody>\n        {Object.entries(info).map(([key, value]) => (\n          <tr key={key}>\n            <th>{key}</th>\n            <td>{value}</td>\n          </tr>\n        ))}\n      </tbody>\n    </table>\n  );\n}\n","import { makeStyles } from '@material-ui/core/styles';\n\nexport const useStyles = makeStyles(theme => ({\n  box: {\n    boxSizing: 'border-box',\n  },\n  checkbox: {\n    padding: '3px',\n    color: theme.palette.primaryForeground,\n    '&:checked': {\n      color: theme.palette.primaryForeground,\n    },\n    '& input': {\n      height: '100%',\n    },\n  },\n  slider: {\n    color: theme.palette.primaryForeground,\n    minWidth: '60px',\n    padding: '10px 0 6px 0',\n  },\n  sliderValueLabel: {\n    '& span': {\n      '& span': {\n        color: theme.palette.primaryBackground,\n      },\n    },\n  },\n  tableContainer: {\n    overflow: 'hidden',\n  },\n  labelCell: {\n    padding: '2px 8px 2px 16px',\n  },\n  inputCell: {\n    padding: '2px 16px 2px 8px',\n    overflow: 'visible',\n  },\n  select: {\n    '& select': {\n      fontSize: '.875rem',\n    },\n  },\n}));\n","module.exports = require(\"@material-ui/core/TableRow\");","import React, { useEffect, useRef } from 'react';\n\nexport default function Tooltip(props) {\n  const {\n    x,\n    y,\n    parentWidth,\n    parentHeight,\n    children,\n  } = props;\n\n  const ref = useRef(null);\n  const isNarrow = (parentWidth < 500);\n  // Do collision detection based on the bounds of the tooltip ancestor element.\n  useEffect(() => {\n    const el = ref.current;\n    const offsetPercentage = isNarrow ? -5 : 10;\n    const translateX = (x > parentWidth / 2) ? -(100 + offsetPercentage) : offsetPercentage;\n    const translateY = (y > parentHeight / 2) ? -(100 + offsetPercentage) : offsetPercentage;\n    const scale = isNarrow ? 0.75 : 1.0;\n    el.style.transform = `translateX(${translateX}%) translateY(${translateY}%) scale(${scale})`;\n    el.style.whiteSpace = (isNarrow ? 'normal' : 'nowrap');\n  });\n\n  return (\n    <div\n      ref={ref}\n      className=\"cell-tooltip bg-primary\"\n      style={{\n        left: `${x}px`,\n        top: `${y}px`,\n      }}\n    >\n      {children}\n    </div>\n  );\n}\n","/* eslint-disable no-nested-ternary */\n/* eslint-disable no-param-reassign */\nimport { treeToCellColorsBySetNames } from './sets/cell-set-utils';\n\n// The functions defined here have been adapted from d3-interpolate,\n// d3-color, and d3-scale-chromatic.\n// Color string \"rgb(r,g,b)\" representations are replaced by color array [r, g, b]\n// representations, to allow them to work nicely with deck.gl,\n// without the need to converting back and forth between string and array formats.\n\n// Reference: https://github.com/d3/d3-scale-chromatic/blob/431d21da776f97c632f53a855bd822edfbbcd56e/src/diverging/RdBu.js\n// eslint-disable-next-line max-len\nconst schemeRdBu = [[103, 0, 31], [178, 24, 43], [214, 96, 77], [244, 165, 130], [253, 219, 199], [247, 247, 247], [209, 229, 240], [146, 197, 222], [67, 147, 195], [33, 102, 172], [5, 48, 97]];\n// eslint-disable-next-line max-len\nconst schemePlasma = [[13, 8, 135], [16, 7, 136], [19, 7, 137], [22, 7, 138], [25, 6, 140], [27, 6, 141], [29, 6, 142], [32, 6, 143], [34, 6, 144], [36, 6, 145], [38, 5, 145], [40, 5, 146], [42, 5, 147], [44, 5, 148], [46, 5, 149], [47, 5, 150], [49, 5, 151], [51, 5, 151], [53, 4, 152], [55, 4, 153], [56, 4, 154], [58, 4, 154], [60, 4, 155], [62, 4, 156], [63, 4, 156], [65, 4, 157], [67, 3, 158], [68, 3, 158], [70, 3, 159], [72, 3, 159], [73, 3, 160], [75, 3, 161], [76, 2, 161], [78, 2, 162], [80, 2, 162], [81, 2, 163], [83, 2, 163], [85, 2, 164], [86, 1, 164], [88, 1, 164], [89, 1, 165], [91, 1, 165], [92, 1, 166], [94, 1, 166], [96, 1, 166], [97, 0, 167], [99, 0, 167], [100, 0, 167], [102, 0, 167], [103, 0, 168], [105, 0, 168], [106, 0, 168], [108, 0, 168], [110, 0, 168], [111, 0, 168], [113, 0, 168], [114, 1, 168], [116, 1, 168], [117, 1, 168], [119, 1, 168], [120, 1, 168], [122, 2, 168], [123, 2, 168], [125, 3, 168], [126, 3, 168], [128, 4, 168], [129, 4, 167], [131, 5, 167], [132, 5, 167], [134, 6, 166], [135, 7, 166], [136, 8, 166], [138, 9, 165], [139, 10, 165], [141, 11, 165], [142, 12, 164], [143, 13, 164], [145, 14, 163], [146, 15, 163], [148, 16, 162], [149, 17, 161], [150, 19, 161], [152, 20, 160], [153, 21, 159], [154, 22, 159], [156, 23, 158], [157, 24, 157], [158, 25, 157], [160, 26, 156], [161, 27, 155], [162, 29, 154], [163, 30, 154], [165, 31, 153], [166, 32, 152], [167, 33, 151], [168, 34, 150], [170, 35, 149], [171, 36, 148], [172, 38, 148], [173, 39, 147], [174, 40, 146], [176, 41, 145], [177, 42, 144], [178, 43, 143], [179, 44, 142], [180, 46, 141], [181, 47, 140], [182, 48, 139], [183, 49, 138], [184, 50, 137], [186, 51, 136], [187, 52, 136], [188, 53, 135], [189, 55, 134], [190, 56, 133], [191, 57, 132], [192, 58, 131], [193, 59, 130], [194, 60, 129], [195, 61, 128], [196, 62, 127], [197, 64, 126], [198, 65, 125], [199, 66, 124], [200, 67, 123], [201, 68, 122], [202, 69, 122], [203, 70, 121], [204, 71, 120], [204, 73, 119], [205, 74, 118], [206, 75, 117], [207, 76, 116], [208, 77, 115], [209, 78, 114], [210, 79, 113], [211, 81, 113], [212, 82, 112], [213, 83, 111], [213, 84, 110], [214, 85, 109], [215, 86, 108], [216, 87, 107], [217, 88, 106], [218, 90, 106], [218, 91, 105], [219, 92, 104], [220, 93, 103], [221, 94, 102], [222, 95, 101], [222, 97, 100], [223, 98, 99], [224, 99, 99], [225, 100, 98], [226, 101, 97], [226, 102, 96], [227, 104, 95], [228, 105, 94], [229, 106, 93], [229, 107, 93], [230, 108, 92], [231, 110, 91], [231, 111, 90], [232, 112, 89], [233, 113, 88], [233, 114, 87], [234, 116, 87], [235, 117, 86], [235, 118, 85], [236, 119, 84], [237, 121, 83], [237, 122, 82], [238, 123, 81], [239, 124, 81], [239, 126, 80], [240, 127, 79], [240, 128, 78], [241, 129, 77], [241, 131, 76], [242, 132, 75], [243, 133, 75], [243, 135, 74], [244, 136, 73], [244, 137, 72], [245, 139, 71], [245, 140, 70], [246, 141, 69], [246, 143, 68], [247, 144, 68], [247, 145, 67], [247, 147, 66], [248, 148, 65], [248, 149, 64], [249, 151, 63], [249, 152, 62], [249, 154, 62], [250, 155, 61], [250, 156, 60], [250, 158, 59], [251, 159, 58], [251, 161, 57], [251, 162, 56], [252, 163, 56], [252, 165, 55], [252, 166, 54], [252, 168, 53], [252, 169, 52], [253, 171, 51], [253, 172, 51], [253, 174, 50], [253, 175, 49], [253, 177, 48], [253, 178, 47], [253, 180, 47], [253, 181, 46], [254, 183, 45], [254, 184, 44], [254, 186, 44], [254, 187, 43], [254, 189, 42], [254, 190, 42], [254, 192, 41], [253, 194, 41], [253, 195, 40], [253, 197, 39], [253, 198, 39], [253, 200, 39], [253, 202, 38], [253, 203, 38], [252, 205, 37], [252, 206, 37], [252, 208, 37], [252, 210, 37], [251, 211, 36], [251, 213, 36], [251, 215, 36], [250, 216, 36], [250, 218, 36], [249, 220, 36], [249, 221, 37], [248, 223, 37], [248, 225, 37], [247, 226, 37], [247, 228, 37], [246, 230, 38], [246, 232, 38], [245, 233, 38], [245, 235, 39], [244, 237, 39], [243, 238, 39], [243, 240, 39], [242, 242, 39], [241, 244, 38], [241, 245, 37], [240, 247, 36], [240, 249, 33]];\n\n// Reference: https://github.com/d3/d3-interpolate/blob/96d54051d1c2fec55f240edd0ec5401715b10390/src/rgb.js\nfunction rgbSpline(spline) {\n  return (colors) => {\n    const n = colors.length;\n    let r = new Array(n);\n    let g = new Array(n);\n    let b = new Array(n);\n    let i; let\n      color;\n    // eslint-disable-next-line no-plusplus\n    for (i = 0; i < n; ++i) {\n      color = [colors[i][0], colors[i][1], colors[i][2]];\n      r[i] = color[0] || 0;\n      g[i] = color[1] || 0;\n      b[i] = color[2] || 0;\n    }\n    r = spline(r);\n    g = spline(g);\n    b = spline(b);\n    return t => [r(t), g(t), b(t)];\n  };\n}\n\n// Reference: https://github.com/d3/d3-interpolate/blob/594a32af1fe1118812b439012c2cb742e907c0c0/src/basis.js\nfunction basis(values) {\n  function innerBasis(t1, v0, v1, v2, v3) {\n    const t2 = t1 * t1; const\n      t3 = t2 * t1;\n    return ((1 - 3 * t1 + 3 * t2 - t3) * v0\n          + (4 - 6 * t2 + 3 * t3) * v1\n          + (1 + 3 * t1 + 3 * t2 - 3 * t3) * v2\n          + t3 * v3) / 6;\n  }\n\n  const n = values.length - 1;\n  return (t) => {\n    const i = t <= 0 ? (t = 0) : t >= 1 ? (t = 1, n - 1) : Math.floor(t * n);\n    const v1 = values[i];\n    const v2 = values[i + 1];\n    const v0 = i > 0 ? values[i - 1] : 2 * v1 - v2;\n    const v3 = i < n - 1 ? values[i + 2] : 2 * v2 - v1;\n    return innerBasis((t - i / n) * n, v0, v1, v2, v3);\n  };\n}\n\n\n// Reference: https://github.com/d3/d3-scale-chromatic/blob/ade54c13e8dfdb9807801a794eaec1a37f926b8a/src/ramp.js\nconst interpolateRgbBasis = rgbSpline(basis);\n\nfunction interpolateSequentialMulti(range) {\n  const n = range.length;\n  return t => range[Math.max(0, Math.min(n - 1, Math.floor(t * n)))];\n}\n\nexport const interpolateRdBu = interpolateRgbBasis(schemeRdBu);\nexport const interpolatePlasma = interpolateSequentialMulti(schemePlasma);\n\n\n/**\n * Get a mapping of cell IDs to cell colors based on\n * gene / cell set selection coordination state.\n * @param {object} params\n * @param {object} params.expressionMatrix { rows, cols, matrix }\n * @param {array} params.geneSelection Array of selected gene IDs.\n * @param {object} params.cellSets The cell sets tree.\n * @param {object} params.cellSetSelection Selected cell sets.\n * @param {string} params.cellColorEncoding Which to use for\n * coloring: gene expression or cell sets?\n * @returns {Map} Mapping from cell IDs to [r, g, b] color arrays.\n */\nexport function getCellColors(params) {\n  const {\n    cellColorEncoding,\n    expressionMatrix, geneSelection,\n    cellSets, cellSetSelection,\n    cellSetColor,\n  } = params;\n  if (cellColorEncoding === 'geneSelection' && geneSelection && geneSelection.length >= 1 && expressionMatrix) {\n    const firstGeneSelected = geneSelection[0];\n    // TODO: allow other color maps.\n    const geneExpColormap = interpolatePlasma;\n    const geneIndex = expressionMatrix.cols.indexOf(firstGeneSelected);\n    if (geneIndex !== -1) {\n      const numGenes = expressionMatrix.cols.length;\n      // Create new cellColors map based on the selected gene.\n      return new Map(expressionMatrix.rows.map((cellId, cellIndex) => {\n        const value = expressionMatrix.matrix[cellIndex * numGenes + geneIndex];\n        const cellColor = geneExpColormap(value / 255);\n        return [cellId, cellColor];\n      }));\n    }\n  } else if (cellColorEncoding === 'cellSetSelection' && cellSetSelection && cellSets) {\n    // Cell sets can potentially lack set colors since the color property\n    // is not a required part of the schema.\n    // The `initializeSets` function fills in any empty colors\n    // with defaults and returns the processed tree object.\n    return treeToCellColorsBySetNames(cellSets, cellSetSelection, cellSetColor);\n  }\n  return new Map();\n}\n","module.exports = require(\"@luma.gl/core\");","module.exports = require(\"@turf/concave\");","module.exports = require(\"@turf/centroid\");","/* eslint-disable import/no-extraneous-dependencies */\n/* eslint-disable no-underscore-dangle */\n// File adopted from nebula.gl's SelectionLayer\n// https://github.com/uber/nebula.gl/blob/8e9c2ec8d7cf4ca7050909ed826eb847d5e2cd9c/modules/layers/src/layers/selection-layer.js\nimport { CompositeLayer } from 'deck.gl';\nimport { polygon as turfPolygon, point as turfPoint } from '@turf/helpers';\nimport booleanWithin from '@turf/boolean-within';\nimport booleanContains from '@turf/boolean-contains';\nimport booleanOverlap from '@turf/boolean-overlap';\nimport booleanPointInPolygon from '@turf/boolean-point-in-polygon';\nimport { EditableGeoJsonLayer, SELECTION_TYPE } from 'nebula.gl';\nimport { DrawRectangleMode, DrawPolygonByDraggingMode, ViewMode } from '@nebula.gl/edit-modes';\n\nconst EDIT_TYPE_ADD = 'addFeature';\nconst EDIT_TYPE_CLEAR = 'clearFeatures';\n\n// Customize the click handlers for the rectangle and polygon tools,\n// so that clicking triggers the `onEdit` callback.\nclass ClickableDrawRectangleMode extends DrawRectangleMode {\n  // eslint-disable-next-line class-methods-use-this\n  handleClick(event, props) {\n    props.onEdit({ editType: EDIT_TYPE_CLEAR });\n  }\n}\n\nclass ClickableDrawPolygonByDraggingMode extends DrawPolygonByDraggingMode {\n  // eslint-disable-next-line class-methods-use-this\n  handleClick(event, props) {\n    props.onEdit({ editType: EDIT_TYPE_CLEAR });\n  }\n}\n\nconst MODE_MAP = {\n  [SELECTION_TYPE.RECTANGLE]: ClickableDrawRectangleMode,\n  [SELECTION_TYPE.POLYGON]: ClickableDrawPolygonByDraggingMode,\n};\n\nconst defaultProps = {\n  selectionType: SELECTION_TYPE.RECTANGLE,\n  layerIds: [],\n  onSelect: () => {},\n};\n\nconst EMPTY_DATA = {\n  type: 'FeatureCollection',\n  features: [],\n};\n\nconst LAYER_ID_GEOJSON = 'selection-geojson';\n\nconst PASS_THROUGH_PROPS = [\n  'lineWidthScale',\n  'lineWidthMinPixels',\n  'lineWidthMaxPixels',\n  'lineWidthUnits',\n  'lineJointRounded',\n  'lineMiterLimit',\n  'pointRadiusScale',\n  'pointRadiusMinPixels',\n  'pointRadiusMaxPixels',\n  'lineDashJustified',\n  'getLineColor',\n  'getFillColor',\n  'getRadius',\n  'getLineWidth',\n  'getLineDashArray',\n  'getTentativeLineDashArray',\n  'getTentativeLineColor',\n  'getTentativeFillColor',\n  'getTentativeLineWidth',\n  'editHandlePointRadiusScale',\n  'editHandlePointRadiusMinPixels',\n  'editHandlePointRadiusMaxPixels',\n  'getEditHandlePointColor',\n  'getEditHandlePointRadius',\n  'modeHandlers',\n];\n\nexport default class SelectionLayer extends CompositeLayer {\n  _selectPolygonObjects(coordinates) {\n    const {\n      onSelect,\n      getCellCoords,\n      cellsQuadTree,\n      flipY,\n    } = this.props;\n\n    const flippedCoordinates = (flipY\n      ? coordinates.map(poly => poly.map(p => ([p[0], -p[1]])))\n      : coordinates);\n\n    // Convert the selection to a turf polygon object.\n    const selectedPolygon = turfPolygon(flippedCoordinates);\n\n    // Create an array to store the results.\n    const pickingInfos = [];\n\n    // quadtree.visit() takes a callback that returns a boolean:\n    // If true returned, then the children of the node are _not_ visited.\n    // If false returned, then the children of the node are visited.\n    // Reference: https://github.com/d3/d3-quadtree#quadtree_visit\n    cellsQuadTree.visit((node, x0, y0, x1, y1) => {\n      const nodePoints = [[[x0, y0], [x1, y0], [x1, y1], [x0, y1], [x0, y0]]];\n      const nodePolygon = turfPolygon(nodePoints);\n\n      const nodePolygonContainsSelectedPolygon = booleanContains(nodePolygon, selectedPolygon);\n      const nodePolygonWithinSelectedPolygon = booleanWithin(nodePolygon, selectedPolygon);\n      const nodePolygonOverlapsSelectedPolgyon = booleanOverlap(nodePolygon, selectedPolygon);\n\n      if (!nodePolygonContainsSelectedPolygon\n        && !nodePolygonWithinSelectedPolygon\n        && !nodePolygonOverlapsSelectedPolgyon) {\n        // We are not interested in anything below this node,\n        // so return true because we are done with this node.\n        return true;\n      }\n\n      // This node made it past the above return statement, so it must either\n      // contain, be within, or overlap with the selected polygon.\n\n      // Check if this is a leaf node.\n      if (node.data\n        && booleanPointInPolygon(turfPoint(getCellCoords(node.data[1])), selectedPolygon)) {\n        // This node has data, so it is a leaf node representing one data point,\n        // and we have verified that the point is in the selected polygon.\n        pickingInfos.push(node.data);\n      }\n\n      // Return false because we are not done.\n      // We want to visit the children of this node.\n      return false;\n    });\n\n    onSelect({ pickingInfos });\n  }\n\n  renderLayers() {\n    const { onSelect } = this.props;\n    const mode = MODE_MAP[this.props.selectionType] || ViewMode;\n\n    const inheritedProps = {};\n    PASS_THROUGH_PROPS.forEach((p) => {\n      if (this.props[p] !== undefined) inheritedProps[p] = this.props[p];\n    });\n    const layers = [\n      new EditableGeoJsonLayer(\n        this.getSubLayerProps({\n          id: LAYER_ID_GEOJSON,\n          pickable: true,\n          mode,\n          modeConfig: {\n            dragToDraw: true,\n          },\n          selectedFeatureIndexes: [],\n          data: EMPTY_DATA,\n          onEdit: ({ updatedData, editType }) => {\n            if (editType === EDIT_TYPE_ADD) {\n              const { coordinates } = updatedData.features[0].geometry;\n              this._selectPolygonObjects(coordinates);\n            } else if (editType === EDIT_TYPE_CLEAR) {\n              // We want to select an empty array to clear any previous selection.\n              onSelect({ pickingInfos: [] });\n            }\n          },\n          ...inheritedProps,\n        }),\n      ),\n    ];\n\n    return layers;\n  }\n}\n\nSelectionLayer.layerName = 'SelectionLayer';\nSelectionLayer.defaultProps = defaultProps;\n","import { COORDINATE_SYSTEM } from 'deck.gl';\nimport { DataFilterExtension } from '@deck.gl/extensions';\nimport SelectionLayer from './SelectionLayer';\n\n/**\n * Convert a DeckGL layer ID to a \"base\" layer ID for selection.\n * @param {string} layerId The layer ID to convert.\n * @returns {string} The base layer ID.\n */\nfunction getBaseLayerId(layerId) {\n  return `base-${layerId}`;\n}\n\n/**\n * Convert a DeckGL layer ID to a \"selected\" layer ID for selection.\n * @param {string} layerId The layer ID to convert.\n * @returns {string} The base layer ID.\n */\nfunction getSelectedLayerId(layerId) {\n  return `selected-${layerId}`;\n}\n\n/**\n * Construct DeckGL selection layers.\n * @param {string} tool\n * @param {number} zoom\n * @param {string} cellBaseLayerId\n * @param {function} getCellCoords\n * @param {function} updateCellsSelection\n * @returns {object[]} The array of DeckGL selection layers.\n */\nexport function getSelectionLayers(\n  tool,\n  zoom,\n  layerId,\n  getCellCoords,\n  updateCellsSelection,\n  cellsQuadTree,\n  flipY = false,\n) {\n  if (!tool) {\n    return [];\n  }\n\n  const cellBaseLayerId = getBaseLayerId(layerId);\n  const editHandlePointRadius = 5 / (zoom + 16);\n\n  return [new SelectionLayer({\n    id: 'selection',\n    flipY,\n    cellsQuadTree,\n    getCellCoords,\n    coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n    selectionType: tool,\n    onSelect: ({ pickingInfos }) => {\n      const cellIds = pickingInfos.map(cellObj => cellObj[0]);\n      if (updateCellsSelection) {\n        updateCellsSelection(cellIds);\n      }\n    },\n    layerIds: [cellBaseLayerId],\n    getTentativeFillColor: () => [255, 255, 255, 95],\n    getTentativeLineColor: () => [143, 143, 143, 255],\n    getTentativeLineDashArray: () => [7, 4],\n    lineWidthMinPixels: 2,\n    lineWidthMaxPixels: 2,\n    getEditHandlePointColor: () => [0xff, 0xff, 0xff, 0xff],\n    getEditHandlePointRadius: () => editHandlePointRadius,\n    editHandlePointRadiusScale: 1,\n    editHandlePointRadiusMinPixels: editHandlePointRadius,\n    editHandlePointRadiusMaxPixels: 2 * editHandlePointRadius,\n  })];\n}\n\n/**\n * Get deck.gl layer props for selection overlays.\n * @param {object} props\n * @returns {object} Object with two properties,\n * overlay: overlayProps, base: baseProps,\n * where the values are deck.gl layer props.\n */\nexport function overlayBaseProps(props) {\n  const {\n    id, getColor, data, isSelected, ...rest\n  } = props;\n  return {\n    overlay: {\n      id: getSelectedLayerId(id),\n      getFillColor: getColor,\n      getLineColor: getColor,\n      data,\n      getFilterValue: isSelected,\n      extensions: [new DataFilterExtension({ filterSize: 1 })],\n      filterRange: [1, 1],\n      ...rest,\n    },\n    base: {\n      id: getBaseLayerId(id),\n      getLineColor: getColor,\n      getFillColor: getColor,\n      // Alternatively: contrast outlines with solids:\n      // getLineColor: getColor,\n      // getFillColor: [255, 255, 255],\n      data: data.slice(),\n      ...rest,\n    },\n  };\n}\n","import { CompositeLayer, PolygonLayer } from 'deck.gl';\n\nimport { overlayBaseProps } from './selection-utils';\n\nexport default class SelectablePolygonLayer extends CompositeLayer {\n  renderLayers() {\n    const props = overlayBaseProps(this.props);\n    const base = new PolygonLayer(props.base);\n    const overlay = new PolygonLayer(props.overlay);\n    return [base, overlay];\n  }\n}\n\nSelectablePolygonLayer.layerName = 'SelectablePolygonLayer';\n","import { CompositeLayer, ScatterplotLayer } from 'deck.gl';\n\nimport { overlayBaseProps } from './selection-utils';\n\nexport default class SelectableScatterplotLayer extends CompositeLayer {\n  renderLayers() {\n    const props = overlayBaseProps(this.props);\n    const base = new ScatterplotLayer(props.base);\n    const overlay = new ScatterplotLayer(props.overlay);\n    return [base, overlay];\n  }\n}\n\nSelectableScatterplotLayer.layerName = 'SelectableScatterplotLayer';\n","// Selection Layers\nexport { default as SelectablePolygonLayer } from './SelectablePolygonLayer';\nexport { default as SelectableScatterplotLayer } from './SelectableScatterplotLayer';\nexport { getSelectionLayers } from './selection-utils';\n\n// Heatmap Layers\nexport { default as HeatmapBitmapLayer } from './HeatmapBitmapLayer';\nexport { default as PixelatedBitmapLayer } from './PixelatedBitmapLayer';\nexport { default as HeatmapCompositeTextLayer } from './HeatmapCompositeTextLayer';\n","module.exports = require(\"@nebula.gl/edit-modes\");","module.exports = require(\"regenerator-runtime\");","/* eslint-disable no-underscore-dangle */\nimport { COORDINATE_SYSTEM, CompositeLayer } from '@deck.gl/core';\nimport { TextLayer } from '@deck.gl/layers';\nimport {\n  AXIS_LABEL_TEXT_SIZE,\n  AXIS_TITLE_TEXT_SIZE,\n  AXIS_MARGIN,\n  THEME_TO_TEXT_COLOR,\n  AXIS_FONT_FAMILY,\n} from './heatmap-constants';\n\nexport default class HeatmapCompositeTextLayer extends CompositeLayer {\n  _renderAxisTopLayers() {\n    const {\n      axisTopLabelData, matrixLeft, width, matrixWidth, viewWidth, theme,\n      targetX, targetY, axisTopTitle, cellWidth, axisOffsetTop, scaleFactor,\n    } = this.props;\n    const showAxisTopLabels = cellWidth >= AXIS_LABEL_TEXT_SIZE;\n    const axisLabelTop = targetY + (axisOffsetTop - AXIS_MARGIN) / 2 / scaleFactor;\n    return [\n      new TextLayer({\n        id: 'axisTopLabels',\n        coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n        data: axisTopLabelData,\n        getText: d => d[1],\n        getPosition: d => [matrixLeft + ((d[0] + 0.5) / width) * matrixWidth, axisLabelTop],\n        getTextAnchor: 'start',\n        getColor: () => THEME_TO_TEXT_COLOR[theme],\n        getSize: (showAxisTopLabels ? AXIS_LABEL_TEXT_SIZE : 0),\n        getAngle: 75,\n        fontFamily: AXIS_FONT_FAMILY,\n        updateTriggers: {\n          getPosition: [axisLabelTop, matrixLeft, matrixWidth, viewWidth],\n          getSize: [showAxisTopLabels],\n          getColor: [theme],\n        },\n      }),\n      new TextLayer({\n        id: 'axisTopTitle',\n        coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n        data: [{ title: axisTopTitle }],\n        getText: d => d.title,\n        getPosition: [targetX, targetY],\n        getTextAnchor: 'middle',\n        getColor: () => THEME_TO_TEXT_COLOR[theme],\n        getSize: (!showAxisTopLabels ? AXIS_TITLE_TEXT_SIZE : 0),\n        getAngle: 0,\n        fontFamily: AXIS_FONT_FAMILY,\n        updateTriggers: {\n          getSize: [showAxisTopLabels],\n          getColor: [theme],\n        },\n      }),\n    ];\n  }\n\n  _renderAxisLeftLayers() {\n    const {\n      axisLeftLabelData, matrixTop, height, matrixHeight,\n      viewHeight, theme, axisLeftTitle, targetX, targetY, cellHeight, axisOffsetLeft,\n      scaleFactor,\n    } = this.props;\n    const showAxisLeftLabels = cellHeight >= AXIS_LABEL_TEXT_SIZE;\n    const axisLabelLeft = targetX + (axisOffsetLeft - AXIS_MARGIN) / 2 / scaleFactor;\n    return [\n      new TextLayer({\n        id: 'axisLeftLabels',\n        coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n        data: axisLeftLabelData,\n        getText: d => d[1],\n        getPosition: d => [axisLabelLeft, matrixTop + ((d[0] + 0.5) / height) * matrixHeight],\n        getTextAnchor: 'end',\n        getColor: () => THEME_TO_TEXT_COLOR[theme],\n        getSize: (showAxisLeftLabels ? AXIS_LABEL_TEXT_SIZE : 0),\n        getAngle: 0,\n        fontFamily: AXIS_FONT_FAMILY,\n        updateTriggers: {\n          getPosition: [axisLabelLeft, matrixTop, matrixHeight, viewHeight],\n          getSize: [showAxisLeftLabels],\n          getColor: [theme],\n        },\n      }),\n      new TextLayer({\n        id: 'axisLeftTitle',\n        coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n        data: [{ title: axisLeftTitle }],\n        getText: d => d.title,\n        getPosition: [targetX, targetY],\n        getTextAnchor: 'middle',\n        getColor: () => THEME_TO_TEXT_COLOR[theme],\n        getSize: (!showAxisLeftLabels ? AXIS_TITLE_TEXT_SIZE : 0),\n        getAngle: 90,\n        fontFamily: AXIS_FONT_FAMILY,\n        updateTriggers: {\n          getSize: [showAxisLeftLabels],\n          getColor: [theme],\n        },\n      }),\n    ];\n  }\n\n  renderLayers() {\n    return [\n      this._renderAxisTopLayers(),\n      this._renderAxisLeftLayers(),\n    ];\n  }\n}\n\nHeatmapCompositeTextLayer.layerName = 'HeatmapCompositeTextLayer';\n","import { BitmapLayer } from '@deck.gl/layers';\nimport { CompositeLayer } from '@deck.gl/core';\nimport { PIXELATED_TEXTURE_PARAMETERS } from './heatmap-constants';\n\n\n// These are the same defaultProps as for BitmapLayer.\nconst defaultProps = {\n  ...BitmapLayer.defaultProps,\n  image: { type: 'object', value: null, async: true },\n  bounds: { type: 'array', value: [1, 0, 0, 1], compare: true },\n  desaturate: {\n    type: 'number', min: 0, max: 1, value: 0,\n  },\n  transparentColor: { type: 'color', value: [0, 0, 0, 0] },\n  tintColor: { type: 'color', value: [255, 255, 255] },\n};\n\nexport default class PixelatedBitmapLayer extends CompositeLayer {\n  renderLayers() {\n    const { image } = this.props;\n    return new BitmapLayer(this.props, {\n      id: `${this.props.id}-wrapped`,\n      image,\n      textureParameters: PIXELATED_TEXTURE_PARAMETERS,\n    });\n  }\n}\n\nPixelatedBitmapLayer.layerName = 'PixelatedBitmapLayer';\nPixelatedBitmapLayer.defaultProps = defaultProps;\n","import glsl from 'glslify';\n\n/**\n * No change to the vertex shader from the base BitmapLayer.\n * Reference: https://github.com/visgl/deck.gl/blob/8.2-release/modules/layers/src/bitmap-layer/bitmap-layer-vertex.js\n */\nexport const vertexShader = glsl`\n#define SHADER_NAME heatmap-bitmap-layer-vertex-shader\n\nattribute vec2 texCoords;\nattribute vec3 positions;\nattribute vec3 positions64Low;\n\nvarying vec2 vTexCoord;\n\nconst vec3 pickingColor = vec3(1.0, 0.0, 0.0);\n\nvoid main(void) {\n  geometry.worldPosition = positions;\n  geometry.uv = texCoords;\n  geometry.pickingColor = pickingColor;\n\n  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);\n  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);\n\n  vTexCoord = texCoords;\n\n  vec4 color = vec4(0.0);\n  DECKGL_FILTER_COLOR(color, geometry);\n}\n`;\n\n/**\n * Fragment shader adapted to perform aggregation and\n * take color scale functions + sliders into account.\n * Reference: https://github.com/visgl/deck.gl/blob/8.2-release/modules/layers/src/bitmap-layer/bitmap-layer-fragment.js\n * Reference: https://github.com/hubmapconsortium/vitessce-image-viewer/blob/06231ae02cac1ff57ba458c71e9bc59ed2fc4f8b/src/layers/XRLayer/xr-layer-fragment-colormap.webgl1.glsl\n */\nexport const fragmentShader = glsl`\n#define SHADER_NAME heatmap-bitmap-layer-fragment-shader\n\n#ifdef GL_ES\nprecision mediump float;\n#endif\n\n#pragma glslify: rdbu = require(\"glsl-colormap/rdbu\")\n#pragma glslify: jet = require(\"glsl-colormap/jet\")\n#pragma glslify: viridis = require(\"glsl-colormap/viridis\")\n#pragma glslify: inferno = require(\"glsl-colormap/inferno\")\n#pragma glslify: magma = require(\"glsl-colormap/magma\")\n#pragma glslify: plasma = require(\"glsl-colormap/plasma\")\n\n// The texture (GL.LUMINANCE & Uint8Array).\nuniform sampler2D uBitmapTexture;\n\n// What are the dimensions of the texture (width, height)?\nuniform vec2 uTextureSize;\n\n// How many consecutive pixels should be aggregated together along each axis?\nuniform vec2 uAggSize;\n\n// What are the values of the color scale sliders?\nuniform vec2 uColorScaleRange;\n\n// The texture coordinate, varying (interpolated between values set by the vertex shader).\nvarying vec2 vTexCoord;\n\nvoid main(void) {\n  // Compute 1 pixel in texture coordinates\n  vec2 onePixel = vec2(1.0, 1.0) / uTextureSize;\n  \n  vec2 viewCoord = vec2(floor(vTexCoord.x * uTextureSize.x), floor(vTexCoord.y * uTextureSize.y));\n\n  // Compute (x % aggSizeX, y % aggSizeY).\n  // These values will be the number of values to the left / above the current position to consider.\n  vec2 modAggSize = vec2(-1.0 * mod(viewCoord.x, uAggSize.x), -1.0 * mod(viewCoord.y, uAggSize.y));\n\n  // Take the sum of values along each axis.\n  float intensitySum = 0.0;\n  vec2 offsetPixels = vec2(0.0, 0.0);\n\n  for(int i = 0; i < 16; i++) {\n    // Check to break outer loop early.\n    // Uniforms cannot be used as conditions in GLSL for loops.\n    if(float(i) >= uAggSize.y) {\n      // Done in the y direction.\n      break;\n    }\n\n    offsetPixels = vec2(offsetPixels.x, (modAggSize.y + float(i)) * onePixel.y);\n\n    for(int j = 0; j < 16; j++) {\n      // Check to break inner loop early.\n      // Uniforms cannot be used as conditions in GLSL for loops.\n      if(float(j) >= uAggSize.x) {\n        // Done in the x direction.\n        break;\n      }\n\n      offsetPixels = vec2((modAggSize.x + float(j)) * onePixel.x, offsetPixels.y);\n      intensitySum += texture2D(uBitmapTexture, vTexCoord + offsetPixels).r;\n    }\n  }\n  \n  // Compute the mean value.\n  float intensityMean = intensitySum / (uAggSize.x * uAggSize.y);\n  \n  // Re-scale using the color scale slider values.\n  float scaledIntensityMean = (intensityMean - uColorScaleRange[0]) / max(0.005, (uColorScaleRange[1] - uColorScaleRange[0]));\n\n  gl_FragColor = __colormap(clamp(scaledIntensityMean, 0.0, 1.0));\n\n  geometry.uv = vTexCoord;\n  DECKGL_FILTER_COLOR(gl_FragColor, geometry);\n}\n`;\n","import GL from '@luma.gl/constants';\nimport { _mergeShaders, project32, picking } from '@deck.gl/core';\nimport { BitmapLayer } from '@deck.gl/layers';\nimport { Texture2D } from '@luma.gl/core';\nimport { PIXELATED_TEXTURE_PARAMETERS, TILE_SIZE } from './heatmap-constants';\nimport { vertexShader, fragmentShader } from './heatmap-bitmap-layer-shaders';\n\nconst defaultProps = {\n  image: { type: 'object', value: null, async: true },\n  colormap: { type: 'string', value: 'plasma', compare: true },\n  bounds: { type: 'array', value: [1, 0, 0, 1], compare: true },\n  aggSizeX: { type: 'number', value: 8.0, compare: true },\n  aggSizeY: { type: 'number', value: 8.0, compare: true },\n  colorScaleLo: { type: 'number', value: 0.0, compare: true },\n  colorScaleHi: { type: 'number', value: 1.0, compare: true },\n};\n\n/**\n * A BitmapLayer that performs aggregation in the fragment shader,\n * and renders its texture from a Uint8Array rather than an ImageData.\n */\nexport default class HeatmapBitmapLayer extends BitmapLayer {\n  /**\n   * Copy of getShaders from Layer (grandparent, parent of BitmapLayer).\n   * Reference: https://github.com/visgl/deck.gl/blob/0afd4e99a6199aeec979989e0c361c97e6c17a16/modules/core/src/lib/layer.js#L302\n   * @param {object} shaders\n   * @returns {object} Merged shaders.\n   */\n  // eslint-disable-next-line no-underscore-dangle\n  _getShaders(shaders) {\n    this.props.extensions.forEach((extension) => {\n      // eslint-disable-next-line no-param-reassign\n      shaders = _mergeShaders(shaders, extension.getShaders.call(this, extension));\n    });\n    return shaders;\n  }\n\n  updateState(args) {\n    super.updateState(args);\n    this.loadTexture(this.props.image);\n  }\n\n  /**\n   * Need to override to provide custom shaders.\n   */\n  getShaders() {\n    const { colormap } = this.props;\n    // eslint-disable-next-line no-underscore-dangle\n    return this._getShaders({\n      vs: vertexShader,\n      fs: fragmentShader.replace('__colormap', colormap),\n      modules: [project32, picking],\n    });\n  }\n\n  /**\n   * Need to override to provide additional uniform values.\n   * Simplified by removing video-related code.\n   * Reference: https://github.com/visgl/deck.gl/blob/0afd4e99a6199aeec979989e0c361c97e6c17a16/modules/layers/src/bitmap-layer/bitmap-layer.js#L173\n   * @param {*} opts\n   */\n  draw(opts) {\n    const { uniforms } = opts;\n    const { bitmapTexture, model } = this.state;\n    const {\n      aggSizeX,\n      aggSizeY,\n      colorScaleLo,\n      colorScaleHi,\n    } = this.props;\n\n    // Render the image\n    if (bitmapTexture && model) {\n      model\n        .setUniforms(\n          Object.assign({}, uniforms, {\n            uBitmapTexture: bitmapTexture,\n            uTextureSize: [TILE_SIZE, TILE_SIZE],\n            uAggSize: [aggSizeX, aggSizeY],\n            uColorScaleRange: [colorScaleLo, colorScaleHi],\n          }),\n        )\n        .draw();\n    }\n  }\n\n  /**\n   * Need to override to provide the custom DEFAULT_TEXTURE_PARAMETERS\n   * object.\n   * Simplified by removing video-related code.\n   * Reference: https://github.com/visgl/deck.gl/blob/0afd4e99a6199aeec979989e0c361c97e6c17a16/modules/layers/src/bitmap-layer/bitmap-layer.js#L218\n   * @param {Uint8Array} image\n   */\n  loadTexture(image) {\n    const { gl } = this.context;\n\n    if (this.state.bitmapTexture) {\n      this.state.bitmapTexture.delete();\n    }\n\n    if (image instanceof Texture2D) {\n      this.setState({\n        bitmapTexture: image,\n      });\n    } else if (image) {\n      this.setState({\n        bitmapTexture: new Texture2D(gl, {\n          data: image,\n          mipmaps: false,\n          parameters: PIXELATED_TEXTURE_PARAMETERS,\n          // Each color contains a single luminance value.\n          // When sampled, rgb are all set to this luminance, alpha is 1.0.\n          // Reference: https://luma.gl/docs/api-reference/webgl/texture#texture-formats\n          format: GL.LUMINANCE,\n          dataFormat: GL.LUMINANCE,\n          type: GL.UNSIGNED_BYTE,\n          width: TILE_SIZE,\n          height: TILE_SIZE,\n        }),\n      });\n    }\n  }\n}\nHeatmapBitmapLayer.layerName = 'HeatmapBitmapLayer';\nHeatmapBitmapLayer.defaultProps = defaultProps;\n","module.exports = require(\"@material-ui/core/Box\");","export default function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}","import objectWithoutPropertiesLoose from \"./objectWithoutPropertiesLoose\";\nexport default function _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}","module.exports = require(\"d3-quadtree\");","import { quadtree } from 'd3-quadtree';\n\n/**\n * Create a d3-quadtree object for cells data points.\n * @param {array} cellsEntries Array of [cellId, cell] tuples,\n * resulting from running Object.entries on the cells object.\n * @param {function} getCellCoords Given a cell object, return the\n * spatial/scatterplot coordinates [x, y].\n * @returns {object} Quadtree instance.\n */\nexport function createCellsQuadTree(cellsEntries, getCellCoords) {\n  // Use the cellsEntries variable since it is already\n  // an array, converted by Object.entries().\n  if (!cellsEntries) {\n    // Abort if the cells data is not yet available.\n    return null;\n  }\n  const tree = quadtree()\n    .x(d => getCellCoords(d[1])[0])\n    .y(d => getCellCoords(d[1])[1])\n    .addAll(cellsEntries);\n  return tree;\n}\n","import React from 'react';\nimport Box from '@material-ui/core/Box';\nimport Table from '@material-ui/core/Table';\nimport TableBody from '@material-ui/core/TableBody';\nimport TableContainer from '@material-ui/core/TableContainer';\nimport { useStyles } from './styles';\n\nexport default function OptionsContainer(props) {\n  const {\n    children,\n  } = props;\n\n  const classes = useStyles();\n\n  return (\n    <Box className={classes.box}>\n      <TableContainer className={classes.tableContainer}>\n        <Table className={classes.table} size=\"small\">\n          <TableBody>\n            {children}\n          </TableBody>\n        </Table>\n      </TableContainer>\n    </Box>\n  );\n}\n","import React from 'react';\nimport Select from '@material-ui/core/Select';\nimport TableCell from '@material-ui/core/TableCell';\nimport TableRow from '@material-ui/core/TableRow';\nimport { capitalize } from '../../utils';\nimport { useStyles } from './styles';\n\nexport default function CellColorEncodingOption(props) {\n  const {\n    observationsLabel,\n    cellColorEncoding,\n    setCellColorEncoding,\n  } = props;\n\n  const classes = useStyles();\n\n  const observationsLabelNice = capitalize(observationsLabel);\n\n  function handleColorEncodingChange(event) {\n    setCellColorEncoding(event.target.value);\n  }\n\n  return (\n    <TableRow>\n      <TableCell className={classes.labelCell} htmlFor=\"cell-color-encoding-select\">\n        {observationsLabelNice} Color Encoding\n      </TableCell>\n      <TableCell className={classes.inputCell}>\n        <Select\n          native\n          className={classes.select}\n          value={cellColorEncoding}\n          onChange={handleColorEncodingChange}\n          inputProps={{\n            id: 'cell-color-encoding-select',\n          }}\n        >\n          <option value=\"cellSetSelection\">Cell Sets</option>\n          <option value=\"geneSelection\">Gene Expression</option>\n        </Select>\n      </TableCell>\n    </TableRow>\n  );\n}\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"none\",\n  d: \"M0 0h24v24H0V0z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M21 3L3 10.53v.98l6.84 2.65L12.48 21h.98L21 3z\"\n});\n\nfunction SvgNearMe(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2, _ref3);\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgNearMe, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/near_me.2a308adc.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"       M19 19h2v2h-2v-2zm0-2h2v-2h-2v2z       M3 13h2v-2H3v2zm0 4h2v-2H3v2z       m0-8h2V7H3v2zm0-4h2V3H3v2z       m4 0h2V3H7v2zm8 16h2v-2h-2v2z       m-4 0h2v-2h-2v2z       m4 0h2v-2h-2v2z       m-8 0h2v-2H7v2z       m-4 0h2v-2H3v2z       M11 5h2v-2h-2v2z       M15 5h2v-2h-2v2z       M19 5h2v-2h-2v2z       M19 9h2v-2h-2v2z       M19 13h2v-2h-2v2z     \"\n});\n\nfunction SvgSelectionRectangle(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSelectionRectangle, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/selection_rectangle.aa477261.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSelectionLasso(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"g\", {\n    transform: \"translate(0,3)\"\n  }, /*#__PURE__*/React.createElement(\"path\", {\n    style: {\n      strokeWidth: 0.343565\n    },\n    d: \"M 23.942314,4.6958443 C 23.446206,1.8868581 19.727461,0 14.687364,0 13.437819,0 12.150138,0.11543779 10.859708,0.34287772 4.1629423,1.5250844 -0.58168816,5.2884937 0.05768601,8.911385 c 0.25355086,1.439193 1.35605049,2.63583 3.04638949,3.461072 -0.2569865,0.387198 -0.4074679,0.826617 -0.4074679,1.29524 0,1.337498 1.1863293,2.457176 2.7639791,2.728248 l -1.3615475,2.333149 c -0.1576963,0.271073 -0.066308,0.61876 0.2047647,0.776457 0.090014,0.05291 0.1886171,0.07799 0.2858459,0.07799 0.1951448,0 0.3851362,-0.100665 0.4912977,-0.281723 l 1.6803757,-2.88148 C 8.41868,16.20561 9.6895264,15.063601 9.6998333,13.683844 c 6.872e-4,-0.0055 0.00137,-0.01065 0.00137,-0.01615 0,-0.02336 -0.00344,-0.04569 -0.00481,-0.06837 1.1292977,-0.0213 2.2847067,-0.130211 3.4435507,-0.334975 6.69711,-1.181863 11.44174,-4.9456164 10.802366,-8.5685077 z M 3.83312,13.667353 c 0,-0.30749 0.1281497,-0.59849 0.3470005,-0.848261 0.1219655,0.04295 0.2456489,0.08383 0.3717372,0.123339 l 1.2234344,2.352045 C 4.6865351,15.149835 3.83312,14.46408 3.83312,13.667353 Z M 7.0141869,15.216144 6.0223152,13.309702 5.4008064,12.114097 c 0.121622,-0.03161 0.2477103,-0.05634 0.3772342,-0.07387 0.1367388,-0.0189 0.2772568,-0.02886 0.420867,-0.02886 0.5067581,0 0.980534,0.11956 1.3701366,0.317454 0.5696305,0.289968 0.9554538,0.750345 0.9904974,1.262944 0.00137,0.02542 0.0055,0.05016 0.0055,0.07593 0,0.698124 -0.6562089,1.310356 -1.5508518,1.548447 z m 5.9185921,-3.126441 c -1.217251,0.214728 -2.429691,0.323982 -3.6060571,0.324669 -0.5765018,-0.911821 -1.7614569,-1.53917 -3.1278143,-1.53917 -0.4717146,0 -0.921441,0.07593 -1.332001,0.211292 -0.3061162,0.100665 -0.5878394,0.237403 -0.8427645,0.39991 C 2.4598914,10.828133 1.4360682,9.8579062 1.2319907,8.7035283 0.72660678,5.8381974 5.2307418,2.5475333 11.067221,1.5175259 c 1.222061,-0.2161023 2.439998,-0.3246688 3.620143,-0.3246688 4.371863,0 7.694479,1.5250844 8.080645,3.7101568 0.505041,2.8653309 -3.998751,6.1566821 -9.83523,7.1866891 z\",\n    id: \"path10\"\n  })));\n}\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSelectionLasso, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/selection_lasso.00e80a33.svg\";\nexport { ForwardRef as ReactComponent };","import React from 'react';\nimport { SELECTION_TYPE } from 'nebula.gl';\nimport { ReactComponent as PointerIconSVG } from '../../assets/tools/near_me.svg';\nimport { ReactComponent as SelectRectangleIconSVG } from '../../assets/tools/selection_rectangle.svg';\nimport { ReactComponent as SelectLassoIconSVG } from '../../assets/tools/selection_lasso.svg';\n\nexport function IconButton(props) {\n  const {\n    alt, onClick, isActive, children,\n  } = props;\n  const inactive = 'btn btn-outline-secondary mr-2 icon';\n  const active = `${inactive} active`;\n  return (\n    <button\n      className={isActive ? active : inactive}\n      onClick={onClick}\n      type=\"button\"\n      title={alt}\n    >\n      {children}\n    </button>\n  );\n}\n\nexport default function ToolMenu(props) {\n  const {\n    setActiveTool,\n    activeTool,\n    visibleTools = { pan: true, selectRectangle: true, selectLasso: true },\n  } = props;\n  return (\n    <div className=\"tool\">\n      {visibleTools.pan && (\n      <IconButton\n        alt=\"pointer tool\"\n        onClick={() => setActiveTool(null)}\n        isActive={activeTool === null}\n      ><PointerIconSVG />\n      </IconButton>\n      )}\n      {visibleTools.selectRectangle && (\n      <IconButton\n        alt=\"select rectangle\"\n        onClick={() => setActiveTool(SELECTION_TYPE.RECTANGLE)}\n        isActive={activeTool === SELECTION_TYPE.RECTANGLE}\n      ><SelectRectangleIconSVG />\n      </IconButton>\n      )}\n      {visibleTools.selectLasso && (\n      <IconButton\n        alt=\"select lasso\"\n        onClick={() => setActiveTool(SELECTION_TYPE.POLYGON)}\n        isActive={activeTool === SELECTION_TYPE.POLYGON}\n      ><SelectLassoIconSVG />\n      </IconButton>\n      )}\n    </div>\n  );\n}\n","export const getCursorWithTool = () => 'crosshair';\nexport const getCursor = interactionState => (interactionState.isDragging\n  ? 'grabbing' : 'default'\n);\n","import React, { PureComponent } from 'react';\nimport DeckGL, { OrthographicView } from 'deck.gl';\nimport ToolMenu from './ToolMenu';\nimport { DEFAULT_GL_OPTIONS } from '../utils';\nimport { getCursor, getCursorWithTool } from './cursor';\n\n/**\n * Abstract class component intended to be inherited by\n * the Spatial and Scatterplot class components.\n * Contains a common constructor, common DeckGL callbacks,\n * and common render function.\n */\nexport default class AbstractSpatialOrScatterplot extends PureComponent {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      gl: null,\n      tool: null,\n    };\n\n    this.viewport = null;\n\n    this.onViewStateChange = this.onViewStateChange.bind(this);\n    this.onInitializeViewInfo = this.onInitializeViewInfo.bind(this);\n    this.onWebGLInitialized = this.onWebGLInitialized.bind(this);\n    this.onToolChange = this.onToolChange.bind(this);\n  }\n\n  /**\n   * Called by DeckGL upon a viewState change,\n   * for example zoom or pan interaction.\n   * Emit the new viewState to the `setViewState`\n   * handler prop.\n   * @param {object} params\n   * @param {object} params.viewState The next deck.gl viewState.\n   */\n  onViewStateChange({ viewState: nextViewState }) {\n    const { setViewState } = this.props;\n    setViewState(nextViewState);\n  }\n\n  /**\n   * Called by DeckGL upon viewport\n   * initialization.\n   * @param {object} viewState\n   * @param {object} viewState.viewport\n   */\n  onInitializeViewInfo({ viewport }) {\n    this.viewport = viewport;\n  }\n\n  /**\n   * Called by DeckGL upon initialization,\n   * helps to understand when to pass layers\n   * to the DeckGL component.\n   * @param {object} gl The WebGL context object.\n   */\n  onWebGLInitialized(gl) {\n    this.setState({ gl });\n  }\n\n  /**\n   * Called by the ToolMenu buttons.\n   * Emits the new tool value to the\n   * `onToolChange` prop.\n   * @param {string} tool Name of tool.\n   */\n  onToolChange(tool) {\n    const { onToolChange: onToolChangeProp } = this.props;\n    this.setState({ tool });\n    if (onToolChangeProp) {\n      onToolChangeProp(tool);\n    }\n  }\n\n  /**\n   * Create the DeckGL layers.\n   * @returns {object[]} Array of\n   * DeckGL layer objects.\n   * Intended to be overriden by descendants.\n   */\n  // eslint-disable-next-line class-methods-use-this\n  getLayers() {\n    return [];\n  }\n\n  /**\n   * Emits a function to project from the\n   * cell ID space to the scatterplot or\n   * spatial coordinate space, via the\n   * `updateViewInfo` prop.\n   */\n  viewInfoDidUpdate(getCellCoords) {\n    const { updateViewInfo, cells, uuid } = this.props;\n    const { viewport } = this;\n    if (updateViewInfo && viewport) {\n      updateViewInfo({\n        uuid,\n        project: (cellId) => {\n          const cell = cells[cellId];\n          try {\n            const [positionX, positionY] = getCellCoords(cell);\n            return viewport.project([positionX, positionY]);\n          } catch (e) {\n            return [null, null];\n          }\n        },\n      });\n    }\n  }\n\n  /**\n   * Intended to be overriden by descendants.\n   */\n  componentDidUpdate() {\n\n  }\n\n  /**\n   * A common render function for both Spatial\n   * and Scatterplot components.\n   */\n  render() {\n    const { deckRef, viewState, uuid } = this.props;\n    const { gl, tool } = this.state;\n    const layers = this.getLayers();\n\n    const showCellSelectionTools = this.cellsLayer !== null;\n    const showPanTool = this.cellsLayer !== null;\n\n    return (\n      <>\n        <ToolMenu\n          activeTool={tool}\n          setActiveTool={this.onToolChange}\n          visibleTools={{\n            pan: showPanTool,\n            selectRectangle: showCellSelectionTools,\n            selectLasso: showCellSelectionTools,\n          }}\n        />\n        <DeckGL\n          id={`deckgl-overlay-${uuid}`}\n          ref={deckRef}\n          views={[new OrthographicView({ id: 'ortho' })]} // id is a fix for https://github.com/uber/deck.gl/issues/3259\n          layers={(gl && viewState.target.every(i => typeof i === 'number')) ? layers : ([])}\n          glOptions={DEFAULT_GL_OPTIONS}\n          onWebGLInitialized={this.onWebGLInitialized}\n          onViewStateChange={this.onViewStateChange}\n          viewState={viewState}\n          controller={tool ? ({ dragPan: false }) : true}\n          getCursor={tool ? getCursorWithTool : getCursor}\n        >\n          {this.onInitializeViewInfo}\n        </DeckGL>\n      </>\n    );\n  }\n}\n","import React, { forwardRef } from 'react';\nimport isEqual from 'lodash/isEqual';\nimport { ScatterplotLayer, PolygonLayer, COORDINATE_SYSTEM } from 'deck.gl';\nimport { Matrix4 } from 'math.gl';\nimport { MultiscaleImageLayer, ImageLayer, ScaleBarLayer } from '@hms-dbmi/viv';\nimport { SelectablePolygonLayer, getSelectionLayers } from '../../layers';\nimport { cellLayerDefaultProps, PALETTE, DEFAULT_COLOR } from '../utils';\nimport { square } from './utils';\nimport AbstractSpatialOrScatterplot from '../shared-spatial-scatterplot/AbstractSpatialOrScatterplot';\nimport {\n  createCellsQuadTree,\n} from '../shared-spatial-scatterplot/quadtree';\n\nconst CELLS_LAYER_ID = 'cells-layer';\nconst MOLECULES_LAYER_ID = 'molecules-layer';\nconst NEIGHBORHOODS_LAYER_ID = 'neighborhoods-layer';\n\n// Default getter function props.\nconst defaultGetCellCoords = cell => cell.xy;\nconst makeDefaultGetCellPolygon = radius => (cellEntry) => {\n  const cell = cellEntry[1];\n  return cell.poly?.length ? cell.poly : square(cell.xy[0], cell.xy[1], radius);\n};\nconst makeDefaultGetCellColors = cellColors => cellEntry => (\n  cellColors && cellColors.get(cellEntry[0])\n) || DEFAULT_COLOR;\nconst makeDefaultGetCellIsSelected = cellSelection => cellEntry => (\n  cellSelection\n    ? cellSelection.includes(cellEntry[0])\n    : true // If nothing is selected, everything is selected.\n);\n\n/**\n * React component which expresses the spatial relationships between cells and molecules.\n * @param {object} props\n * @param {string} props.uuid A unique identifier for this component,\n * used to determine when to show tooltips vs. crosshairs.\n * @param {number} props.height Height of the DeckGL canvas, used when\n * rendering the scale bar layer.\n * @param {number} props.width Width of the DeckGL canvas, used when\n * rendering the scale bar layer.\n * @param {object} props.viewState The DeckGL viewState object.\n * @param {function} props.setViewState A handler for updating the DeckGL\n * viewState object.\n * @param {object} props.molecules Molecules data.\n * @param {object} props.cells Cells data.\n * @param {object} props.neighborhoods Neighborhoods data.\n * @param {number} props.lineWidthScale Width of cell border in view space (deck.gl).\n * @param {number} props.lineWidthMaxPixels Max width of the cell border in pixels (deck.gl).\n * @param {object} props.imageLayerLoaders An object mapping raster layer index to Viv loader\n * instances.\n * @param {object} props.cellColors Map from cell IDs to colors [r, g, b].\n * @param {function} props.getCellCoords Getter function for cell coordinates\n * (used by the selection layer).\n * @param {function} props.getCellColor Getter function for cell color as [r, g, b] array.\n * @param {function} props.getCellPolygon Getter function for cell polygons.\n * @param {function} props.getCellIsSelected Getter function for cell layer isSelected.\n * @param {function} props.getMoleculeColor\n * @param {function} props.getMoleculePosition\n * @param {function} props.getNeighborhoodPolygon\n * @param {function} props.updateViewInfo Handler for DeckGL viewport updates,\n * used when rendering tooltips and crosshairs.\n * @param {function} props.onCellClick Getter function for cell layer onClick.\n */\nclass Spatial extends AbstractSpatialOrScatterplot {\n  constructor(props) {\n    super(props);\n\n    // To avoid storing large arrays/objects\n    // in React state, this component\n    // uses instance variables.\n    // All instance variables used in this class:\n    this.cellsEntries = [];\n    this.moleculesEntries = [];\n    this.cellsQuadTree = null;\n    this.cellsLayer = null;\n    this.moleculesLayer = null;\n    this.neighborhoodsLayer = null;\n    this.imageLayers = [];\n    this.layerLoaderSelections = {};\n\n    // Initialize data and layers.\n    this.onUpdateCellsData();\n    this.onUpdateCellsLayer();\n    this.onUpdateMoleculesData();\n    this.onUpdateMoleculesLayer();\n    this.onUpdateNeighborhoodsData();\n    this.onUpdateNeighborhoodsLayer();\n    this.onUpdateImages();\n  }\n\n  createCellsLayer(layerDef) {\n    const {\n      radius, stroked, visible, opacity,\n    } = layerDef;\n    const {\n      cellFilter,\n      cellSelection,\n      setCellHighlight,\n      setComponentHover,\n      getCellIsSelected = makeDefaultGetCellIsSelected(cellSelection),\n      cellColors,\n      getCellColor = makeDefaultGetCellColors(cellColors),\n      getCellPolygon = makeDefaultGetCellPolygon(radius),\n      onCellClick,\n      lineWidthScale = 10,\n      lineWidthMaxPixels = 2,\n    } = this.props;\n    const { cellsEntries } = this;\n    const filteredCellsEntries = (cellFilter\n      ? cellsEntries.filter(cellEntry => cellFilter.includes(cellEntry[0]))\n      : cellsEntries);\n\n    // Graphics rendering has the y-axis positive going south,\n    // so we need to flip it for rendering tooltips.\n    const flipYTooltip = true;\n\n    return new SelectablePolygonLayer({\n      id: CELLS_LAYER_ID,\n      backgroundColor: [0, 0, 0],\n      isSelected: getCellIsSelected,\n      getPolygon: getCellPolygon,\n      updateTriggers: {\n        getFillColor: [opacity],\n        getLineWidth: [stroked],\n      },\n      getFillColor: (cellEntry) => {\n        const color = getCellColor(cellEntry);\n        color[3] = opacity * 255;\n        return color;\n      },\n      getLineColor: (cellEntry) => {\n        const color = getCellColor(cellEntry);\n        color[3] = 255;\n        return color;\n      },\n      onClick: (info) => {\n        if (onCellClick) {\n          onCellClick(info);\n        }\n      },\n      visible,\n      getLineWidth: stroked ? 1 : 0,\n      lineWidthScale,\n      lineWidthMaxPixels,\n      ...cellLayerDefaultProps(\n        filteredCellsEntries, undefined, setCellHighlight,\n        setComponentHover, flipYTooltip,\n      ),\n    });\n  }\n\n  createMoleculesLayer(layerDef) {\n    const {\n      setMoleculeHighlight,\n      getMoleculeColor = d => PALETTE[d[2] % PALETTE.length],\n      getMoleculePosition = d => [d[0], d[1], 0],\n    } = this.props;\n    const { moleculesEntries } = this;\n\n    return new ScatterplotLayer({\n      id: MOLECULES_LAYER_ID,\n      coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n      data: moleculesEntries,\n      pickable: true,\n      autoHighlight: true,\n      radiusMaxPixels: 3,\n      opacity: layerDef.opacity,\n      visible: layerDef.visible,\n      getRadius: layerDef.radius,\n      getPosition: getMoleculePosition,\n      getLineColor: getMoleculeColor,\n      getFillColor: getMoleculeColor,\n      onHover: (info) => {\n        if (setMoleculeHighlight) {\n          if (info.object) {\n            setMoleculeHighlight(info.object[3]);\n          } else {\n            setMoleculeHighlight(null);\n          }\n        }\n      },\n    });\n  }\n\n  createNeighborhoodsLayer(layerDef) {\n    const {\n      getNeighborhoodPolygon = (neighborhoodsEntry) => {\n        const neighborhood = neighborhoodsEntry[1];\n        return neighborhood.poly;\n      },\n    } = this.props;\n    const { neighborhoodsEntries } = this;\n\n    return new PolygonLayer({\n      id: NEIGHBORHOODS_LAYER_ID,\n      getPolygon: getNeighborhoodPolygon,\n      coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n      data: neighborhoodsEntries,\n      pickable: true,\n      autoHighlight: true,\n      stroked: true,\n      filled: false,\n      getElevation: 0,\n      getLineWidth: 10,\n      visible: layerDef.visible,\n    });\n  }\n\n  createSelectionLayers() {\n    const { viewState, getCellCoords = defaultGetCellCoords, setCellSelection } = this.props;\n    const { tool } = this.state;\n    const { cellsQuadTree } = this;\n    return getSelectionLayers(\n      tool,\n      viewState.zoom,\n      CELLS_LAYER_ID,\n      getCellCoords,\n      setCellSelection,\n      cellsQuadTree,\n    );\n  }\n\n  createScaleBarLayer() {\n    const {\n      viewState, width, height, imageLayerLoaders = {},\n    } = this.props;\n    // Just get the first layer/loader since they should all be spatially\n    // resolved and therefore have the same unit size scale.\n    const loaders = Object.values(imageLayerLoaders);\n    if (!viewState || !width || !height || loaders.length < 1) return null;\n    const loader = loaders[0];\n    if (!loader) return null;\n    const { physicalSizes } = loader;\n    if (physicalSizes) {\n      const { x } = physicalSizes;\n      const { unit, value } = x;\n      if (unit && value) {\n        return new ScaleBarLayer({\n          id: 'scalebar-layer',\n          loader,\n          unit,\n          size: value,\n          viewState: { ...viewState, width, height },\n        });\n      }\n      return null;\n    }\n    return null;\n  }\n\n  createImageLayer(rawLayerDef, loader, i) {\n    const layerDef = {\n      ...rawLayerDef,\n      channels: rawLayerDef.channels\n        .filter(channel => channel.selection && channel.color && channel.slider),\n    };\n\n    // We need to keep the same loaderSelection array reference,\n    // otherwise the Viv layer will not be re-used as we want it to,\n    // since loaderSelection is one of its `updateTriggers`.\n    // Reference: https://github.com/hms-dbmi/viv/blob/ad86d0f/src/layers/MultiscaleImageLayer/MultiscaleImageLayer.js#L127\n    let loaderSelection;\n    const nextLoaderSelection = layerDef.channels.map(c => c.selection);\n    const prevLoaderSelection = this.layerLoaderSelections[layerDef.index];\n    if (isEqual(prevLoaderSelection, nextLoaderSelection)) {\n      loaderSelection = prevLoaderSelection;\n    } else {\n      loaderSelection = nextLoaderSelection;\n      this.layerLoaderSelections[layerDef.index] = nextLoaderSelection;\n    }\n    const layerProps = {\n      colormap: layerDef.colormap,\n      opacity: layerDef.opacity,\n      transparentColor: layerDef.transparentColor,\n      colors: layerDef.channels.map(c => c.color),\n      sliders: layerDef.channels.map(c => c.slider),\n      visibilities: layerDef.channels.map(c => c.visible),\n    };\n\n    if (!loader || !layerProps) return null;\n    const { scale, translate, isPyramid } = loader;\n    let modelMatrix;\n    if (scale && translate) {\n      modelMatrix = new Matrix4().translate([translate.x, translate.y, 0]).scale(scale);\n    } else if (layerDef.modelMatrix) {\n      // eslint-disable-next-line prefer-destructuring\n      modelMatrix = new Matrix4(layerDef.modelMatrix);\n    }\n    const Layer = isPyramid ? MultiscaleImageLayer : ImageLayer;\n    return new Layer({\n      loader,\n      id: `image-layer-${layerDef.index}-${i}`,\n      colorValues: layerProps.colors,\n      sliderValues: layerProps.sliders,\n      loaderSelection,\n      channelIsOn: layerProps.visibilities,\n      opacity: layerProps.opacity,\n      colormap: (layerProps.colormap ? layerProps.colormap : ''),\n      modelMatrix,\n      transparentColor: layerProps.transparentColor,\n    });\n  }\n\n  createImageLayers() {\n    const { layers, imageLayerLoaders = {} } = this.props;\n    return (layers || [])\n      .filter(layer => layer.type === 'raster')\n      .map((layer, i) => this.createImageLayer(\n        layer, imageLayerLoaders[layer.index], i,\n      ));\n  }\n\n  getLayers() {\n    const {\n      imageLayers,\n      cellsLayer,\n      neighborhoodsLayer,\n      moleculesLayer,\n    } = this;\n    return [\n      ...imageLayers,\n      cellsLayer,\n      neighborhoodsLayer,\n      moleculesLayer,\n      this.createScaleBarLayer(),\n      ...this.createSelectionLayers(),\n    ];\n  }\n\n  onUpdateCellsData() {\n    const {\n      cells = {},\n      getCellCoords = defaultGetCellCoords,\n    } = this.props;\n    const cellsEntries = Object.entries(cells);\n    this.cellsEntries = cellsEntries;\n    this.cellsQuadTree = createCellsQuadTree(cellsEntries, getCellCoords);\n  }\n\n  onUpdateCellsLayer() {\n    const { layers } = this.props;\n    const layerDef = (layers || []).find(layer => layer.type === 'cells');\n    if (layerDef) {\n      this.cellsLayer = this.createCellsLayer(layerDef);\n    } else {\n      this.cellsLayer = null;\n    }\n  }\n\n  onUpdateMoleculesData() {\n    const { molecules = {} } = this.props;\n    const moleculesEntries = Object\n      .entries(molecules)\n      .flatMap(([molecule, coords], index) => coords.map(([x, y]) => [\n        x, y, index, molecule,\n      ]));\n    this.moleculesEntries = moleculesEntries;\n  }\n\n  onUpdateMoleculesLayer() {\n    const { layers } = this.props;\n    const layerDef = (layers || []).find(layer => layer.type === 'molecules');\n    if (layerDef) {\n      this.moleculesLayer = this.createMoleculesLayer(layerDef);\n    } else {\n      this.moleculesLayer = null;\n    }\n  }\n\n  onUpdateNeighborhoodsData() {\n    const { neighborhoods = {} } = this.props;\n    const neighborhoodsEntries = Object\n      .entries(neighborhoods);\n    this.neighborhoodsEntries = neighborhoodsEntries;\n  }\n\n  onUpdateNeighborhoodsLayer() {\n    const { layers } = this.props;\n    const layerDef = (layers || []).find(layer => layer.type === 'neighborhoods');\n    if (layerDef) {\n      this.neighborhoodsLayer = this.createNeighborhoodsLayer(layerDef);\n    } else {\n      this.neighborhoodsLayer = null;\n    }\n  }\n\n  onUpdateImages() {\n    this.imageLayers = this.createImageLayers();\n  }\n\n  viewInfoDidUpdate() {\n    const { getCellCoords = defaultGetCellCoords } = this.props;\n    super.viewInfoDidUpdate(getCellCoords);\n  }\n\n  /**\n   * Here, asynchronously check whether props have\n   * updated which require re-computing memoized variables,\n   * followed by a re-render.\n   * This function does not follow React conventions or paradigms,\n   * it is only implemented this way to try to squeeze out\n   * performance.\n   * @param {object} prevProps The previous props to diff against.\n   */\n  componentDidUpdate(prevProps) {\n    this.viewInfoDidUpdate();\n\n    const shallowDiff = propName => (prevProps[propName] !== this.props[propName]);\n    if (['cells'].some(shallowDiff)) {\n      // Cells data changed.\n      this.onUpdateCellsData();\n      this.forceUpdate();\n    }\n\n    if ([\n      'layers', 'cells', 'cellFilter', 'cellSelection', 'cellColors',\n    ].some(shallowDiff)) {\n      // Cells layer props changed.\n      this.onUpdateCellsLayer();\n      this.forceUpdate();\n    }\n\n    if (['molecules'].some(shallowDiff)) {\n      // Molecules data changed.\n      this.onUpdateMoleculesData();\n      this.forceUpdate();\n    }\n\n    if (['layers', 'molecules'].some(shallowDiff)) {\n      // Molecules layer props changed.\n      this.onUpdateMoleculesLayer();\n      this.forceUpdate();\n    }\n\n    if (['neighborhoods'].some(shallowDiff)) {\n      // Neighborhoods data changed.\n      this.onUpdateNeighborhoodsData();\n      this.forceUpdate();\n    }\n\n    if (['layers', 'neighborhoods'].some(shallowDiff)) {\n      // Neighborhoods layer props changed.\n      this.onUpdateNeighborhoodsLayer();\n      this.forceUpdate();\n    }\n\n    if (['layers', 'imageLayerLoaders'].some(shallowDiff)) {\n      // Image layers changed.\n      this.onUpdateImages();\n      this.forceUpdate();\n    }\n  }\n\n  // render() is implemented in the abstract parent class.\n}\n\n/**\n * Need this wrapper function here,\n * since we want to pass a forwardRef\n * so that outer components can\n * access the grandchild DeckGL ref,\n * but we are using a class component.\n */\nconst SpatialWrapper = forwardRef((props, deckRef) => <Spatial {...props} deckRef={deckRef} />);\nexport default SpatialWrapper;\n","module.exports = require(\"@deck.gl/extensions\");","module.exports = require(\"@turf/boolean-within\");","module.exports = require(\"@turf/boolean-contains\");","module.exports = require(\"@turf/boolean-overlap\");","module.exports = require(\"@turf/boolean-point-in-polygon\");","module.exports = require(\"@material-ui/core/Table\");","module.exports = require(\"@material-ui/core/TableBody\");","module.exports = require(\"@material-ui/core/TableContainer\");","import React from 'react';\nimport OptionsContainer from '../shared-plot-options/OptionsContainer';\nimport CellColorEncodingOption from '../shared-plot-options/CellColorEncodingOption';\n\nexport default function SpatialOptions(props) {\n  const {\n    observationsLabel,\n    cellColorEncoding,\n    setCellColorEncoding,\n  } = props;\n\n  return (\n    <OptionsContainer>\n      <CellColorEncodingOption\n        observationsLabel={observationsLabel}\n        cellColorEncoding={cellColorEncoding}\n        setCellColorEncoding={setCellColorEncoding}\n      />\n    </OptionsContainer>\n  );\n}\n","import React from 'react';\nimport Tooltip2D from '../tooltip/Tooltip2D';\nimport TooltipContent from '../tooltip/TooltipContent';\nimport { useComponentHover, useComponentViewInfo } from '../../app/state/hooks';\n\nexport default function SpatialTooltipSubscriber(props) {\n  const {\n    parentUuid,\n    cellHighlight,\n    width,\n    height,\n    getCellInfo,\n  } = props;\n\n  const sourceUuid = useComponentHover();\n  const viewInfo = useComponentViewInfo(parentUuid);\n\n  const [cellInfo, x, y] = (cellHighlight && getCellInfo ? (\n    [\n      getCellInfo(cellHighlight),\n      ...(viewInfo && viewInfo.project ? viewInfo.project(cellHighlight) : [null, null]),\n    ]\n  ) : ([null, null, null]));\n\n  return (\n    (cellInfo ? (\n      <Tooltip2D\n        x={x}\n        y={y}\n        parentUuid={parentUuid}\n        sourceUuid={sourceUuid}\n        parentWidth={width}\n        parentHeight={height}\n      >\n        <TooltipContent info={cellInfo} />\n      </Tooltip2D>\n    ) : null)\n  );\n}\n","import React, {\n  useState, useEffect, useMemo, useCallback,\n} from 'react';\nimport TitleInfo from '../TitleInfo';\nimport { capitalize } from '../../utils';\nimport { useDeckCanvasSize, useReady, useUrls } from '../hooks';\nimport { setCellSelection, mergeCellSets } from '../utils';\nimport {\n  useCellsData, useCellSetsData, useExpressionMatrixData,\n  useMoleculesData, useNeighborhoodsData, useRasterData,\n} from '../data-hooks';\nimport { getCellColors } from '../interpolate-colors';\nimport Spatial from './Spatial';\nimport SpatialOptions from './SpatialOptions';\nimport SpatialTooltipSubscriber from './SpatialTooltipSubscriber';\nimport {\n  makeSpatialSubtitle,\n  initializeLayerChannelsIfMissing,\n  sortLayers,\n  getInitialSpatialTargets,\n} from './utils';\nimport {\n  DEFAULT_MOLECULES_LAYER,\n  DEFAULT_CELLS_LAYER,\n  DEFAULT_NEIGHBORHOODS_LAYER,\n} from './constants';\nimport {\n  useCoordination,\n  useLoaders,\n  useSetComponentHover,\n  useSetComponentViewInfo,\n} from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\n\nconst SPATIAL_DATA_TYPES = [\n  'cells', 'molecules', 'raster', 'cell-sets', 'expression-matrix',\n];\n\nconst SPATIAL_LAYER_TYPES = [\n  'cells', 'molecules', 'raster', 'neighborhoods',\n];\n\nexport default function SpatialSubscriber(props) {\n  const {\n    uuid,\n    coordinationScopes,\n    removeGridComponent,\n    initializeLayers = true,\n    observationsLabelOverride: observationsLabel = 'cell',\n    observationsPluralLabelOverride: observationsPluralLabel = `${observationsLabel}s`,\n    subobservationsLabelOverride: subobservationsLabel = 'molecule',\n    subobservationsPluralLabelOverride: subobservationsPluralLabel = `${subobservationsLabel}s`,\n    theme,\n    disableTooltip = false,\n  } = props;\n\n  const loaders = useLoaders();\n  const setComponentHover = useSetComponentHover();\n  const setComponentViewInfo = useSetComponentViewInfo(uuid);\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    spatialZoom: zoom,\n    spatialTargetX: targetX,\n    spatialTargetY: targetY,\n    spatialTargetZ: targetZ,\n    spatialLayers: layers,\n    cellFilter,\n    cellHighlight,\n    geneSelection,\n    cellSetSelection,\n    cellSetColor,\n    cellColorEncoding,\n    additionalCellSets,\n  }, {\n    setSpatialZoom: setZoom,\n    setSpatialTargetX: setTargetX,\n    setSpatialTargetY: setTargetY,\n    setSpatialTargetZ: setTargetZ,\n    setSpatialLayers: setLayers,\n    setCellFilter,\n    setCellSetSelection,\n    setCellHighlight,\n    setCellSetColor,\n    setCellColorEncoding,\n    setAdditionalCellSets,\n    setMoleculeHighlight,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.spatial, coordinationScopes);\n\n  const [autoLayers, setAutoLayers] = useState({\n    [dataset]: [\n      loaders[dataset].loaders.cells?.url ? DEFAULT_CELLS_LAYER : null,\n      loaders[dataset].loaders.molecules?.url ? DEFAULT_MOLECULES_LAYER : null,\n      loaders[dataset].loaders.neighborhoods?.url ? DEFAULT_NEIGHBORHOODS_LAYER : null,\n    ].filter(Boolean),\n  });\n\n  const [urls, addUrl, resetUrls] = useUrls();\n  const [isReady, setItemIsReady, resetReadyItems] = useReady(\n    SPATIAL_DATA_TYPES,\n  );\n  const [width, height, deckRef] = useDeckCanvasSize();\n\n  // Reset file URLs and loader progress when the dataset has changed.\n  // Also clear the array of automatically-initialized layers.\n  useEffect(() => {\n    resetUrls();\n    resetReadyItems();\n    setAutoLayers({\n      [dataset]: [\n        loaders[dataset].loaders.cells?.url ? DEFAULT_CELLS_LAYER : null,\n        loaders[dataset].loaders.molecules?.url ? DEFAULT_MOLECULES_LAYER : null,\n        loaders[dataset].loaders.neighborhoods?.url ? DEFAULT_NEIGHBORHOODS_LAYER : null,\n      ].filter(Boolean),\n    });\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  const [cells, cellsCount] = useCellsData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n    () => {},\n  );\n  const [molecules, moleculesCount, locationsCount] = useMoleculesData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n    () => {},\n  );\n  const [neighborhoods] = useNeighborhoodsData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n    () => {},\n  );\n  const [cellSets] = useCellSetsData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n  );\n  const [expressionMatrix] = useExpressionMatrixData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n  );\n  // eslint-disable-next-line no-unused-vars\n  const [raster, imageLayerLoaders] = useRasterData(\n    loaders, dataset, setItemIsReady, addUrl, false,\n    autoImageLayers => setAutoLayers(prev => (\n      // This prevents old updates from overriding the current dataset.\n      // The previous state must be for this dataset, otherwise it's an old update.\n      Object.keys(prev).includes(dataset)\n        ? { [dataset]: [...(prev[dataset] || []), ...autoImageLayers] }\n        : prev\n    )),\n  );\n  // Try to set up the layers array automatically if null or undefined.\n  useEffect(() => {\n    // Check if the autoLayers have a layer for each spatial layer loader type.\n    const areAutoLayersComplete = Object.keys(loaders[dataset].loaders)?.every(\n      loaderType => !SPATIAL_LAYER_TYPES.includes(loaderType)\n        || (\n          autoLayers[dataset] && autoLayers[dataset].filter(\n            layer => layer.type === loaderType,\n          ).length > 0\n        )\n    );\n    if (isReady && initializeLayers) {\n      if (!layers && autoLayers[dataset] && areAutoLayersComplete) {\n        setLayers(sortLayers(autoLayers[dataset]));\n      } else if (layers) {\n        // Layers were defined, but check whether channels for each layer were also defined.\n        // If channel / slider / domain definitions are missing, initialize in automatically.\n        initializeLayerChannelsIfMissing(layers, imageLayerLoaders).then(\n          ([newLayers, didInitialize]) => {\n            if (didInitialize) {\n              // Channels were only partially defined.\n              setLayers(newLayers);\n            }\n          },\n        );\n      }\n      if ((typeof targetX !== 'number' || typeof targetY !== 'number')) {\n        const { initialTargetX, initialTargetY, initialZoom } = getInitialSpatialTargets({\n          width,\n          height,\n          cells,\n          imageLayerLoaders,\n        });\n        setTargetX(initialTargetX);\n        setTargetY(initialTargetY);\n        setZoom(initialZoom);\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [dataset, loaders, autoLayers, imageLayerLoaders,\n    isReady, layers, setLayers, initializeLayers, cells]);\n\n  const mergedCellSets = useMemo(() => mergeCellSets(\n    cellSets, additionalCellSets,\n  ), [cellSets, additionalCellSets]);\n\n  const setCellSelectionProp = useCallback((v) => {\n    setCellSelection(\n      v, additionalCellSets, cellSetColor,\n      setCellSetSelection, setAdditionalCellSets, setCellSetColor,\n      setCellColorEncoding,\n    );\n  }, [additionalCellSets, cellSetColor, setCellColorEncoding,\n    setAdditionalCellSets, setCellSetColor, setCellSetSelection]);\n\n  const cellColors = useMemo(() => getCellColors({\n    cellColorEncoding,\n    expressionMatrix,\n    geneSelection,\n    cellSets: mergedCellSets,\n    cellSetSelection,\n    cellSetColor,\n  }), [cellColorEncoding, geneSelection, mergedCellSets,\n    cellSetColor, cellSetSelection, expressionMatrix]);\n\n  const cellSelection = useMemo(() => Array.from(cellColors.keys()), [cellColors]);\n\n  const getCellInfo = (cellId) => {\n    const cell = cells[cellId];\n    if (cell) {\n      return {\n        [`${capitalize(observationsLabel)} ID`]: cellId,\n        ...cell.factors,\n      };\n    }\n    return null;\n  };\n\n  const subtitle = makeSpatialSubtitle({\n    observationsCount: cellsCount,\n    observationsLabel,\n    observationsPluralLabel,\n    subobservationsCount: moleculesCount,\n    subobservationsLabel,\n    subobservationsPluralLabel,\n    locationsCount,\n  });\n  return (\n    <TitleInfo\n      title=\"Spatial\"\n      info={subtitle}\n      isSpatial\n      urls={urls}\n      theme={theme}\n      removeGridComponent={removeGridComponent}\n      isReady={isReady}\n      options={(\n        <SpatialOptions\n          observationsLabel={observationsLabel}\n          cellColorEncoding={cellColorEncoding}\n          setCellColorEncoding={setCellColorEncoding}\n        />\n      )}\n    >\n      <Spatial\n        ref={deckRef}\n        uuid={uuid}\n        width={width}\n        height={height}\n        viewState={{ zoom, target: [targetX, targetY, targetZ] }}\n        setViewState={({ zoom: newZoom, target }) => {\n          setZoom(newZoom);\n          setTargetX(target[0]);\n          setTargetY(target[1]);\n          setTargetZ(target[2]);\n        }}\n        layers={layers}\n        cells={cells}\n        cellFilter={cellFilter}\n        cellSelection={cellSelection}\n        cellHighlight={cellHighlight}\n        cellColors={cellColors}\n        molecules={molecules}\n        neighborhoods={neighborhoods}\n        imageLayerLoaders={imageLayerLoaders}\n        setCellFilter={setCellFilter}\n        setCellSelection={setCellSelectionProp}\n        setCellHighlight={setCellHighlight}\n        setMoleculeHighlight={setMoleculeHighlight}\n        setComponentHover={() => {\n          setComponentHover(uuid);\n        }}\n        updateViewInfo={setComponentViewInfo}\n      />\n      {!disableTooltip && (\n      <SpatialTooltipSubscriber\n        parentUuid={uuid}\n        cellHighlight={cellHighlight}\n        width={width}\n        height={height}\n        getCellInfo={getCellInfo}\n      />\n      )}\n    </TitleInfo>\n  );\n}\n","export { default as SpatialSubscriber } from './SpatialSubscriber';\nexport { default as Spatial } from './Spatial';\n"],"sourceRoot":""}