{"version":3,"sources":["../webpack/bootstrap","../external \"react\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArrayLimit.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableRest.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","app/state/hooks.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","components/utils.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../external \"lodash/isEqual\"","components/sets/constants.js","utils.js","../external \"@material-ui/core/styles\"","components/spatial/constants.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js","loaders/errors/AbstractLoaderError.js","loaders/errors/LoaderFetchError.js","loaders/errors/LoaderValidationError.js","loaders/errors/LoaderNotFoundError.js","loaders/errors/index.js","../external \"deck.gl\"","components/hooks.js","components/data-hooks.js","app/state/coordination.js","../external \"@hms-dbmi/viv\"","../external \"mathjs\"","../external \"@material-ui/core/Grid\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","components/classNames.js","../external \"zustand\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/arrayLikeToArray.js","components/LoadingIndicator.js","components/TitleInfo.js","components/shared-mui/styles.js","../external \"d3-array\"","../external \"@material-ui/core/colors\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../external \"@material-ui/core/IconButton\"","components/shared-mui/components.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/unsupportedIterableToArray.js","components/spatial/utils.js","../external \"@material-ui/core/MenuItem\"","../external \"@material-ui/icons/ArrowDropDown\"","../external \"@material-ui/icons/ArrowDropUp\"","../external \"lodash/debounce\"","../external \"@material-ui/core/Paper\"","../external \"lodash\"","../external \"@material-ui/core/Slider\"","../external \"math.gl\"","../external \"@material-ui/icons/CloudDownload\"","../external \"@material-ui/core/Link\"","../external \"@material-ui/icons/Settings\"","../external \"@material-ui/icons/Close\"","../external \"@material-ui/core/CircularProgress\"","../external \"@material-ui/core/Popper\"","../external \"@material-ui/core/MenuList\"","../external \"@material-ui/core/ClickAwayListener\"","../external \"zustand/shallow\"","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../external \"short-number\"","../external \"@material-ui/core/Checkbox\"","../external \"@material-ui/core/Select\"","../external \"regenerator-runtime\"","components/layer-controller/styles.js","../external \"@material-ui/icons/Add\"","components/layer-controller/VectorLayerController.js","components/layer-controller/ColorPalette.js","components/layer-controller/ChannelOptions.js","components/layer-controller/ChannelController.js","components/layer-controller/LayerOptions.js","components/layer-controller/RasterLayerController.js","../external \"@material-ui/core/Button\"","components/layer-controller/ImageAddButton.js","components/layer-controller/LayerControllerSubscriber.js","../external \"@material-ui/core/ExpansionPanel\"","../external \"@material-ui/core/ExpansionPanelSummary\"","../external \"@material-ui/core/ExpansionPanelDetails\"","../external \"@material-ui/icons/ExpandMore\"","../external \"@material-ui/icons/MoreVert\"","../external \"@material-ui/icons/Lens\"","../external \"@material-ui/core/InputLabel\"","../external \"@material-ui/core/Typography\"","components/layer-controller/index.js"],"names":["useViewConfigStore","create","set","viewConfig","loaders","setViewConfig","setLoaders","setCoordinationValue","parameter","scope","value","state","coordinationSpace","removeComponent","i","newLayout","layout","slice","splice","changeLayout","newComponentProps","forEach","newProps","useHoverStore","componentHover","setComponentHover","useWarnStore","warning","setWarning","useViewInfoStore","viewInfo","setComponentViewInfo","uuid","useGridSizeStore","resizeCount","incrementResizeCount","useCoordination","parameters","coordinationScopes","values","fromEntries","map","undefined","shallow","setters","setterName","capitalize","setterFunc","useLoaders","useLayout","useRemoveComponent","useChangeLayout","useSetLoaders","useSetViewConfig","setViewConfigRef","useRef","getState","current","useComponentHover","useSetComponentHover","useWarning","useSetWarning","useComponentViewInfo","useCallback","useSetComponentViewInfo","setViewInfoRef","useGridResize","useEmitGridResize","makeCellStatusMessage","cellInfoFactors","Object","entries","factor","join","cellLayerDefaultProps","cells","updateStatus","setCellHighlight","coordinateSystem","COORDINATE_SYSTEM","CARTESIAN","data","pickable","autoHighlight","stroked","filled","getElevation","onHover","info","object","cellId","cellInfo","factors","DEFAULT_COLOR","PALETTE","VIEWER_PALETTE","COLORMAP_OPTIONS","DEFAULT_GL_OPTIONS","webgl2","createDefaultUpdateStatus","componentName","message","console","warn","createDefaultUpdateCellsSelection","cellsSelection","createDefaultUpdateCellsHover","hoverInfo","createDefaultUpdateGenesHover","geneId","createDefaultUpdateViewInfo","createDefaultClearPleaseWait","copyUint8Array","arr","newBuffer","ArrayBuffer","buffer","byteLength","newArr","Uint8Array","getNextNumberedNodeName","nodes","prefix","find","n","name","setCellSelection","cellSelection","additionalCellSets","cellSetColor","setCellSetSelection","setAdditionalCellSets","setCellSetColor","setCellColorEncoding","CELL_SELECTIONS_LEVEL_ZERO_NAME","selectionsLevelZeroNode","tree","nextAdditionalCellSets","version","HIERARCHICAL_SCHEMAS","SETS_DATATYPE_CELL","latestVersion","datatype","nextName","children","colorIndex","length","push","d","nextPath","path","color","mergeCellSets","cellSets","createWarningComponent","props","title","PRIMARY_CARD","asEsModule","component","__esModule","default","FILE_EXTENSION_JSON","MIME_TYPE_JSON","FILE_EXTENSION_TABULAR","MIME_TYPE_TABULAR","SEPARATOR_TABULAR","NA_VALUE_TABULAR","cell","schema","cellSetsSchema","TABULAR_SCHEMAS","cellSetsTabularSchema","iterable","reduce","obj","key","val","assign","range","Array","keys","pluralize","singular","plural","count","word","charAt","toUpperCase","getNextScope","prevScopes","chars","nextCharIndices","next","r","charIndex","unshift","increment","nextScope","includes","GLOBAL_SLIDER_DIMENSION_FIELDS","DEFAULT_RASTER_DOMAIN_TYPE","DEFAULT_RASTER_LAYER_PROPS","colormap","opacity","domainType","transparentColor","DEFAULT_MOLECULES_LAYER","type","radius","visible","DEFAULT_CELLS_LAYER","DEFAULT_NEIGHBORHOODS_LAYER","DEFAULT_LAYER_TYPE_ORDERING","AbstractLoaderError","Error","LoaderFetchError","datasetType","datasetFileType","datasetUrl","responseHeaders","LoaderValidationError","reason","JSON","stringify","LoaderNotFoundError","useGridItemSize","containerRef","useState","height","setHeight","width","setWidth","useEffect","onWindowResize","onResizeDebounced","debounce","trailing","window","addEventListener","removeEventListener","container","containerRect","getBoundingClientRect","useDeckCanvasSize","deckRef","canvas","deck","canvasRect","useReady","supportedItems","items","waiting","setWaiting","setItemIsReady","readyItem","waitingItems","nextWaitingItems","filter","item","log","resetReadyItems","isReady","useUrls","urls","setUrls","addUrl","url","prev","resetUrls","error","warnInConsole","useDescription","dataset","description","setDescription","useCellsData","isRequired","onLoad","setCells","cellsCount","setCellsCount","load","catch","e","then","payload","useCellSetsData","setCellSets","useExpressionMatrixData","expressionMatrix","setExpressionMatrix","attrs","cols","rows","matrix","useMoleculesData","molecules","setMolecules","moleculesCount","setMoleculesCount","locationsCount","setLocationsCount","l","a","b","useNeighborhoodsData","neighborhoods","setNeighborhoods","useRasterData","raster","setRaster","imageLayerLoaders","setImageLayerLoaders","imageLayerMeta","setImageLayerMeta","rasterLayers","layers","rasterRenderLayers","renderLayers","usePhysicalSizeScaling","initializeRasterLayersAndChannels","autoImageLayers","nextImageLoaders","nextImageMeta","useGenomicProfilesData","genomicProfilesAttrs","setGenomicProfilesAttrs","COORDINATION_TYPES","DATASET","EMBEDDING_TYPE","EMBEDDING_ZOOM","EMBEDDING_ROTATION","EMBEDDING_TARGET_X","EMBEDDING_TARGET_Y","EMBEDDING_TARGET_Z","EMBEDDING_CELL_SET_POLYGONS_VISIBLE","EMBEDDING_CELL_SET_LABELS_VISIBLE","EMBEDDING_CELL_SET_LABEL_SIZE","EMBEDDING_CELL_RADIUS","SPATIAL_ZOOM","SPATIAL_ROTATION","SPATIAL_TARGET_X","SPATIAL_TARGET_Y","SPATIAL_TARGET_Z","HEATMAP_ZOOM_X","HEATMAP_ZOOM_Y","HEATMAP_TARGET_X","HEATMAP_TARGET_Y","CELL_FILTER","CELL_HIGHLIGHT","CELL_SET_SELECTION","CELL_SET_HIGHLIGHT","CELL_SET_COLOR","GENE_FILTER","GENE_HIGHLIGHT","GENE_SELECTION","GENE_EXPRESSION_COLORMAP","GENE_EXPRESSION_COLORMAP_RANGE","CELL_COLOR_ENCODING","SPATIAL_LAYERS","GENOMIC_ZOOM_X","GENOMIC_ZOOM_Y","GENOMIC_TARGET_X","GENOMIC_TARGET_Y","ADDITIONAL_CELL_SETS","MOLECULE_HIGHLIGHT","DEFAULT_COORDINATION_VALUES","AUTO_INDEPENDENT_COORDINATION_TYPES","COMPONENT_COORDINATION_TYPES","scatterplot","spatial","heatmap","cellSetSizes","cellSetExpression","status","genes","expressionHistogram","layerController","higlass","genomicProfiles","TOOLTIP_ANCESTOR","CARD","SECONDARY_CARD","BLACK_CARD","TITLE_CARD","SCROLL_CARD","LoadingIndicator","useStyles","makeStyles","theme","iconButton","border","marginLeft","background","palette","primaryForeground","paddingLeft","paddingRight","borderRadius","backgroundColor","primaryBackgroundLight","marginRight","verticalAlign","downloadLink","SettingsIconWithArrow","open","PlotOptions","options","useReducer","v","toggle","classes","CloudDownloadIconWithArrow","DownloadOptions","ClosePaneButton","removeGridComponent","TitleInfo","isScroll","isSpatial","childClassName","styles","paper","maxHeight","overflow","zIndex","span","textAlign","popper","muiTheme","dark","createMuiTheme","primary","grey","secondary","primaryBackground","primaryBackgroundHighlight","primaryBackgroundInput","primaryBackgroundDim","primaryForegroundDim","primaryForegroundActive","secondaryBackground","secondaryBackgroundDim","secondaryForeground","MuiButtonBase","disableRipple","light","MuiPopper","anchorEl","placement","MuiPaper","MuiSpan","PopperMenu","buttonIcon","buttonClassName","anchorRef","square","x","y","sortLayers","sort","indexOf","getDefaultGlobalSelection","imageDims","globalIndices","dim","field","selection","Math","floor","buildDefaultSelection","globalSelection","firstNonGlobalDimension","min","initializeChannelForSelection","loader","getChannelStats","loaderSelection","stats","domain","isRgb","slider","autoSliders","initializeLayerChannels","result","loaderDimensions","dimensions","defaultSelection","domains","stat","colors","sliders","channel","initializeLayerChannelsIfMissing","layerDefsOrig","layerDefs","cloneDeep","newLayerDefPromises","didInitialize","layerIndex","layerDef","index","newLayerDefPromise","Promise","resolve","channels","newChannelDefPromises","channelIndex","channelDef","newChannelDefPromise","autoChannelDef","all","newChannelDefs","newLayerDefs","getMetaWithTransformMatrices","imageMeta","imageLoaders","meta","metadata","transform","scale","translate","some","Boolean","every","physicalSizes","minPhysicalSize","acc","sizes","unit","replace","compare","imageMetaWithTransform","j","k","divide","isEqual","Matrix4","newMeta","toArray","autoImageLayerDefPromises","layer","loaderCreator","autoImageLayerDefPromise","modelMatrix","globalIndicesOfRenderLayers","imageName","findIndex","image","autoImageLayerDefs","makeSpatialSubtitle","observationsCount","observationsLabel","observationsPluralLabel","subobservationsCount","subobservationsLabel","subobservationsPluralLabel","parts","part","shortNumber","getInitialSpatialTargets","initialTargetX","Infinity","initialTargetY","initialZoom","zoomBackoff","cellValues","viewSize","getDefaultInitialViewState","target","newViewStateZoom","zoom","cellCoordinates","c","xy","xExtent","extent","yExtent","xRange","yRange","log2","useOptionStyles","useExpansionPanelStyles","root","spacing","flexDirection","useExpansionPanelSummaryStyles","marginBottom","top","textOverflow","whiteSpace","expanded","expandIcon","VectorLayerController","label","handleLayerChange","isOn","handleSliderChange","handleCheckBoxChange","marginTop","paddingTop","display","justifyContent","alignItems","flexWrap","button","padding","icon","stroke","action","selected","ColorPalette","handleChange","menuButton","ChannelOptions","handlePropertyChange","handleChannelRemove","handleIQRUpdate","handleColorSelect","handleRemove","toRgbUIString","on","abbreviateNumber","maxLength","maxNaiveDigits","Number","isInteger","naive","Intl","NumberFormat","maximumSignificantDigits","useGrouping","format","toExponential","ChannelSelectionDropdown","disableOptions","channelOptions","selectionIndex","opt","ChannelSlider","dtype","max","handleChangeDebounced","step","ChannelVisibilityCheckbox","checked","ChannelController","visibility","channelId","newDomainType","dimName","colormapOn","setDomain","setDomainType","setSelection","rgbColor","mounted","hasDomainChanged","hasSelectionChanged","DTYPE_VALUES","newDomain","createSelection","DOMAIN_OPTIONS","ColormapSelect","inputId","id","TransparentColorCheckbox","float","OpacitySlider","SliderDomainSelector","GlobalSelectionSlider","possibleValues","event","newValue","LayerOption","LayerOptions","handleColormapChange","handleOpacityChange","handleTransparentColorChange","globalControlDimensions","globalDimensionValues","handleGlobalChannelsSelectionChange","handleDomainChange","hasDimensionsAndChannels","dimension","getDomainsAndSliders","buttonStyles","borderStyle","fontWeight","RasterLayerController","handleLayerRemove","firstSelection","o","setGlobalDimensionValues","setColormap","setOpacity","setChannels","setTransparentColor","setChannelsAndDomainType","newChannels","setChannel","addChannel","removeChannel","handleChannelAdd","left","right","mouseUp","channelControllers","channelDimensions","handleChannelPropertyChange","property","update","q1","q3","summaryClasses","MAX_SLIDERS_AND_CHANNELS","addButton","ImageAddIcon","ImageAddButton","imageOptions","handleImageAdd","handleAdd","imgData","LAYER_CONTROLLER_DATA_TYPES","LayerControllerSubscriber","spatialLayers","setLayers","setSpatialLayers","newLayer","newLayers","layerMeta"],"mappings":";;QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;AClFA,kC;;;;;;;;;ACAe;AACf;AACA,C;;ACFe;AACf;AACA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,+BAA+B;AAC5E;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA,C;;;;;ACzBe;AACf;AACA,C;;ACFA;AAA8C;AACY;AACY;AACtB;AACjC;AACf,SAAS,eAAc,SAAS,qBAAoB,YAAY,qDAA0B,YAAY,gBAAe;AACrH,C;;;;;;;ACNA;AAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA,C;;;;;;;;;;;;ACbkD;AACnC;AACf,iCAAiC,2CAAgB;AACjD,C;;ACHe;AACf;AACA,C;;;;;ACFe;AACf;AACA,C;;ACFA;AAAoD;AACJ;AACsB;AAClB;AACrC;AACf,SAAS,kBAAiB,SAAS,gBAAe,SAAS,qDAA0B,SAAS,kBAAiB;AAC/G,C;;;;;;;ACNA;AAAA;AAA8C;;AAE9C;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEe;AACf,iBAAiB,sBAAsB;AACvC;;AAEA;AACA;AACA,QAAQ,uEAAc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","file":"layer-controller.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"./\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 180);\n","module.exports = require(\"react\");","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}","export default function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithHoles from \"./arrayWithHoles\";\nimport iterableToArrayLimit from \"./iterableToArrayLimit\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableRest from \"./nonIterableRest\";\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles\";\nimport iterableToArray from \"./iterableToArray\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nimport nonIterableSpread from \"./nonIterableSpread\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import { useRef, useCallback } from 'react';\nimport create from 'zustand';\nimport shallow from 'zustand/shallow';\nimport { fromEntries, capitalize } from '../../utils';\n\n/**\n * The useViewConfigStore hook is initialized via the zustand\n * create() function, which sets up both the state variables\n * and the reducer-type functions.\n * Reference: https://github.com/react-spring/zustand\n * @returns {function} The useStore hook.\n */\nexport const useViewConfigStore = create(set => ({\n  // State:\n  // The viewConfig is an object which must conform to the schema\n  // found in src/schemas/config.schema.json.\n  viewConfig: null,\n  // The loaders object is a mapping from dataset ID to\n  // data type to loader object instance.\n  loaders: null,\n  // Reducer functions which update the state\n  // (although technically also part of state):\n  setViewConfig: viewConfig => set({ viewConfig }),\n  setLoaders: loaders => set({ loaders }),\n  setCoordinationValue: ({ parameter, scope, value }) => set(state => ({\n    viewConfig: {\n      ...state.viewConfig,\n      coordinationSpace: {\n        ...state.viewConfig.coordinationSpace,\n        [parameter]: {\n          ...state.viewConfig.coordinationSpace[parameter],\n          [scope]: value,\n        },\n      },\n    },\n  })),\n  removeComponent: i => set((state) => {\n    const newLayout = state.viewConfig.layout.slice();\n    newLayout.splice(i, 1);\n    return {\n      viewConfig: {\n        ...state.viewConfig,\n        layout: newLayout,\n      },\n    };\n  }),\n  changeLayout: newComponentProps => set((state) => {\n    const newLayout = state.viewConfig.layout.slice();\n    newComponentProps.forEach(([i, newProps]) => {\n      newLayout[i] = {\n        ...newLayout[i],\n        ...newProps,\n      };\n    });\n    return {\n      viewConfig: {\n        ...state.viewConfig,\n        layout: newLayout,\n      },\n    };\n  }),\n}));\n\n/**\n * The hover store can be used to store global state\n * related to which component is currently hovered,\n * which is required for tooltip / crossover elements.\n * @returns {function} The useStore hook.\n */\nconst useHoverStore = create(set => ({\n  // Components may need to know if they are the \"hover source\"\n  // for tooltip interactions. This value should be a unique\n  // component ID, such as its index in the view config layout.\n  componentHover: null,\n  setComponentHover: componentHover => set({ componentHover }),\n}));\n\n/**\n * The warning store can be used to store global state\n * related to app warning messages.\n * @returns {function} The useStore hook.\n */\nconst useWarnStore = create(set => ({\n  // Want a global state to collect warning messages\n  // that occur anywhere in the app.\n  warning: null,\n  setWarning: warning => set({ warning }),\n}));\n\n/**\n * The view info store can be used to store component-level\n * viewInfo objects,\n * which are required for tooltip / crossover elements.\n * @returns {function} The useStore hook.\n */\nconst useViewInfoStore = create(set => ({\n  // The viewInfo object is a mapping from\n  // component IDs to component view info objects.\n  // Each view info object must have a project() function.\n  viewInfo: {},\n  setComponentViewInfo: (uuid, viewInfo) => set(state => ({\n    viewInfo: {\n      ...state.viewInfo,\n      [uuid]: viewInfo,\n    },\n  })),\n}));\n\n/**\n * The grid size store can be used to store a\n * counter which updates on each window or react-grid-layout\n * resize event.\n * @returns {function} The useStore hook.\n */\nconst useGridSizeStore = create(set => ({\n  resizeCount: {},\n  incrementResizeCount: () => set(state => ({\n    resizeCount: state.resizeCount + 1,\n  })),\n}));\n\n/**\n * The useCoordination hook returns both the\n * values and setter functions for the coordination objects\n * in a particular coordination scope mapping.\n * This hook is intended to be used within the ___Subscriber\n * components to allow them to \"hook into\" only those coordination\n * objects and setter functions of relevance.\n * @param {string[]} parameters Array of coordination types.\n * @param {object} coordinationScopes Mapping of coordination types\n * to scope names.\n * @returns {array} Returns a tuple [values, setters]\n * where values is an object containing all coordination values,\n * and setters is an object containing all coordination setter\n * functions for the values in `values`, named with a \"set\"\n * prefix.\n */\nexport function useCoordination(parameters, coordinationScopes) {\n  const setCoordinationValue = useViewConfigStore(state => state.setCoordinationValue);\n\n  const values = useViewConfigStore((state) => {\n    const { coordinationSpace } = state.viewConfig;\n    return fromEntries(parameters.map((parameter) => {\n      if (coordinationSpace && coordinationSpace[parameter]) {\n        const value = coordinationSpace[parameter][coordinationScopes[parameter]];\n        return [parameter, value];\n      }\n      return [parameter, undefined];\n    }));\n  }, shallow);\n\n  const setters = fromEntries(parameters.map((parameter) => {\n    const setterName = `set${capitalize(parameter)}`;\n    const setterFunc = value => setCoordinationValue({\n      parameter,\n      scope: coordinationScopes[parameter],\n      value,\n    });\n    return [setterName, setterFunc];\n  }));\n\n  return [values, setters];\n}\n\n/**\n * Obtain the loaders object from\n * the global app state.\n * @returns {object} The loaders object\n * in the `useViewConfigStore` store.\n */\nexport function useLoaders() {\n  return useViewConfigStore(state => state.loaders);\n}\n\n/**\n * Obtain the view config layout array from\n * the global app state.\n * @returns {object[]} The layout array\n * in the `useViewConfigStore` store.\n */\nexport function useLayout() {\n  return useViewConfigStore(state => state.viewConfig?.layout);\n}\n\n/**\n * Obtain the component removal function from\n * the global app state.\n * @returns {function} The remove component function\n * in the `useViewInfoStore` store.\n */\nexport function useRemoveComponent() {\n  return useViewConfigStore(state => state.removeComponent);\n}\n\n/**\n * Obtain the component prop setter function from\n * the global app state.\n * @returns {function} The set component props function\n * in the `useViewInfoStore` store.\n */\nexport function useChangeLayout() {\n  return useViewConfigStore(state => state.changeLayout);\n}\n\n/**\n * Obtain the loaders setter function from\n * the global app state.\n * @returns {function} The loaders setter function\n * in the `useViewConfigStore` store.\n */\nexport function useSetLoaders() {\n  return useViewConfigStore(state => state.setLoaders);\n}\n\n/**\n * Obtain the view config setter function from\n * the global app state.\n * @returns {function} The view config setter function\n * in the `useViewConfigStore` store.\n */\nexport function useSetViewConfig() {\n  const setViewConfigRef = useRef(useViewConfigStore.getState().setViewConfig);\n  const setViewConfig = setViewConfigRef.current;\n  return setViewConfig;\n}\n\n/**\n * Obtain the component hover value from\n * the global app state.\n * @returns {number} The hovered component ID\n * in the `useHoverStore` store.\n */\nexport function useComponentHover() {\n  return useHoverStore(state => state.componentHover);\n}\n\n/**\n * Obtain the component hover setter function from\n * the global app state.\n * @returns {function} The component hover setter function\n * in the `useHoverStore` store.\n */\nexport function useSetComponentHover() {\n  return useHoverStore(state => state.setComponentHover);\n}\n\n/**\n * Obtain the warning message from\n * the global app state.\n * @returns {string} The warning message\n * in the `useWarnStore` store.\n */\nexport function useWarning() {\n  return useWarnStore(state => state.warning);\n}\n\n/**\n * Obtain the warning setter function from\n * the global app state.\n * @returns {function} The warning setter function\n * in the `useWarnStore` store.\n */\nexport function useSetWarning() {\n  return useWarnStore(state => state.setWarning);\n}\n\n/**\n * Obtain the component view info value from\n * the global app state.\n * @returns {object} The view info object for the component\n * in the `useViewInfoStore` store.\n */\nexport function useComponentViewInfo(uuid) {\n  return useViewInfoStore(useCallback(state => state.viewInfo[uuid], [uuid]));\n}\n\n/**\n * Obtain the component view info setter function from\n * the global app state.\n * @returns {function} The component view info setter function\n * in the `useViewInfoStore` store.\n */\nexport function useSetComponentViewInfo(uuid) {\n  const setViewInfoRef = useRef(useViewInfoStore.getState().setComponentViewInfo);\n  const setComponentViewInfo = viewInfo => setViewInfoRef.current(uuid, viewInfo);\n  return setComponentViewInfo;\n}\n\n/**\n * Obtain the grid resize count value\n * from the global app state.\n * @returns {number} The grid resize increment value.\n */\nexport function useGridResize() {\n  return useGridSizeStore(state => state.resizeCount);\n}\n\n/**\n * Obtain the grid resize count increment function\n * from the global app state.\n * @returns {function} The grid resize count increment\n * function.\n */\nexport function useEmitGridResize() {\n  return useGridSizeStore(state => state.incrementResizeCount);\n}\n","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","import React from 'react';\nimport { COORDINATE_SYSTEM } from 'deck.gl';\nimport {\n  SETS_DATATYPE_CELL,\n  HIERARCHICAL_SCHEMAS,\n} from './sets/constants';\nimport { PRIMARY_CARD } from './classNames';\n\nexport function makeCellStatusMessage(cellInfoFactors) {\n  return Object.entries(cellInfoFactors).map(\n    ([factor, value]) => `${factor}: ${value}`,\n  ).join('; ');\n}\n\nexport function cellLayerDefaultProps(cells, updateStatus, setCellHighlight, setComponentHover) {\n  return {\n    coordinateSystem: COORDINATE_SYSTEM.CARTESIAN,\n    data: cells,\n    pickable: true,\n    autoHighlight: true,\n    stroked: true,\n    filled: true,\n    getElevation: 0,\n    onHover: (info) => {\n      // Notify the parent component that its child component is\n      // the \"hover source\".\n      if (setComponentHover) {\n        setComponentHover();\n      }\n      if (info.object) {\n        const [cellId, cellInfo] = info.object;\n        const { factors = {} } = cellInfo;\n        if (updateStatus) {\n          updateStatus(makeCellStatusMessage(factors));\n        }\n        if (setCellHighlight) {\n          setCellHighlight(cellId);\n        }\n      } else if (setCellHighlight) {\n        // Clear the currently-hovered cell info by passing null.\n        setCellHighlight('');\n      }\n    },\n  };\n}\n\nexport const DEFAULT_COLOR = [128, 128, 128];\n\n// From https://personal.sron.nl/~pault/#sec:qualitative\nexport const PALETTE = [\n  [68, 119, 170],\n  [136, 204, 238],\n  [68, 170, 153],\n  [17, 119, 51],\n  [153, 153, 51],\n  [221, 204, 119],\n  [204, 102, 119],\n  [136, 34, 85],\n  [170, 68, 153],\n];\n\nexport const VIEWER_PALETTE = [\n  [0, 0, 255],\n  [0, 255, 0],\n  [255, 0, 255],\n  [255, 255, 0],\n  [0, 255, 255],\n  [255, 255, 255],\n  [255, 128, 0],\n  [255, 0, 0],\n];\n\nexport const COLORMAP_OPTIONS = [\n  'viridis',\n  'greys',\n  'magma',\n  'jet',\n  'hot',\n  'bone',\n  'copper',\n  'summer',\n  'density',\n  'inferno',\n];\n\nexport const DEFAULT_GL_OPTIONS = { webgl2: true };\n\nexport function createDefaultUpdateStatus(componentName) {\n  return message => console.warn(`${componentName} updateStatus: ${message}`);\n}\n\nexport function createDefaultUpdateCellsSelection(componentName) {\n  return cellsSelection => console.warn(`${componentName} updateCellsSelection: ${cellsSelection}`);\n}\n\nexport function createDefaultUpdateCellsHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateCellsHover: ${hoverInfo.cellId}`);\n}\n\nexport function createDefaultUpdateGenesHover(componentName) {\n  return hoverInfo => console.warn(`${componentName} updateGenesHover: ${hoverInfo.geneId}`);\n}\n\nexport function createDefaultUpdateViewInfo(componentName) {\n  return viewInfo => console.warn(`${componentName} updateViewInfo: ${viewInfo}`);\n}\n\nexport function createDefaultClearPleaseWait() {\n  return () => {};\n}\n\n\n/**\n * Copy a typed array into a new array buffer.\n * @param {Uint8Array} arr The typed array to be copied.\n * @returns {Uint8Array} The copied array.\n */\nexport function copyUint8Array(arr) {\n  const newBuffer = new ArrayBuffer(arr.buffer.byteLength);\n  const newArr = new Uint8Array(newBuffer);\n  newArr.set(arr);\n  return newArr;\n}\n\nexport function getNextNumberedNodeName(nodes, prefix) {\n  let i = 1;\n  if (nodes) {\n    // eslint-disable-next-line no-loop-func\n    while (nodes.find(n => n.name === `${prefix}${i}`)) {\n      // eslint-disable-next-line no-plusplus\n      i++;\n    }\n  }\n  return `${prefix}${i}`;\n}\n\n/**\n * Create a new selected cell set based on a cell selection.\n * @param {string[]} cellSelection An array of cell IDs.\n * @param {object[]} additionalCellSets The previous array of user-defined cell sets.\n * @param {function} setCellSetSelection The setter function for cell set selections.\n * @param {function} setAdditionalCellSets The setter function for user-defined cell sets.\n */\nexport function setCellSelection(cellSelection, additionalCellSets, cellSetColor, setCellSetSelection, setAdditionalCellSets, setCellSetColor, setCellColorEncoding, prefix = 'Selection ') {\n  const CELL_SELECTIONS_LEVEL_ZERO_NAME = 'My Selections';\n\n  const selectionsLevelZeroNode = additionalCellSets?.tree.find(\n    n => n.name === CELL_SELECTIONS_LEVEL_ZERO_NAME,\n  );\n  const nextAdditionalCellSets = {\n    version: HIERARCHICAL_SCHEMAS[SETS_DATATYPE_CELL].latestVersion,\n    datatype: SETS_DATATYPE_CELL,\n    tree: [...(additionalCellSets ? additionalCellSets.tree : [])],\n  };\n\n  const nextName = getNextNumberedNodeName(selectionsLevelZeroNode?.children, prefix);\n  let colorIndex = 0;\n  if (selectionsLevelZeroNode) {\n    colorIndex = selectionsLevelZeroNode.children.length;\n    selectionsLevelZeroNode.children.push({\n      name: nextName,\n      set: cellSelection.map(d => [d, null]),\n    });\n  } else {\n    nextAdditionalCellSets.tree.push({\n      name: CELL_SELECTIONS_LEVEL_ZERO_NAME,\n      children: [\n        {\n          name: nextName,\n          set: cellSelection.map(d => [d, null]),\n        },\n      ],\n    });\n  }\n  setAdditionalCellSets(nextAdditionalCellSets);\n  const nextPath = ['My Selections', nextName];\n  setCellSetColor([\n    ...(cellSetColor || []),\n    {\n      path: nextPath,\n      color: PALETTE[colorIndex % PALETTE.length],\n    },\n  ]);\n  setCellSetSelection([nextPath]);\n  setCellColorEncoding('cellSetSelection');\n}\n\nexport function mergeCellSets(cellSets, additionalCellSets) {\n  return {\n    version: HIERARCHICAL_SCHEMAS[SETS_DATATYPE_CELL].latestVersion,\n    datatype: SETS_DATATYPE_CELL,\n    tree: [\n      ...(cellSets ? cellSets.tree : []),\n      ...(additionalCellSets ? additionalCellSets.tree : []),\n    ],\n  };\n}\n\nexport function createWarningComponent(props) {\n  return () => {\n    const {\n      title,\n      message,\n    } = props;\n    return (\n      <div className={PRIMARY_CARD}>\n        <h1>{title}</h1>\n        <div>{message}</div>\n      </div>\n    );\n  };\n}\n\nexport function asEsModule(component) {\n  return {\n    __esModule: true,\n    default: component,\n  };\n}\n","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","module.exports = require(\"regenerator-runtime\");\n","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  return function () {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (isNativeReflectConstruct()) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","module.exports = require(\"lodash/isEqual\");","import cellSetsSchema from '../../schemas/cell-sets.schema.json';\nimport cellSetsTabularSchema from '../../schemas/cell-sets-tabular.schema.json';\n\nexport const FILE_EXTENSION_JSON = 'json';\nexport const MIME_TYPE_JSON = 'application/json';\n\nexport const FILE_EXTENSION_TABULAR = 'csv';\nexport const MIME_TYPE_TABULAR = 'text/csv';\nexport const SEPARATOR_TABULAR = ',';\n// The NA value below corresponds to the allowed string enum\n// value \"NA\" in the cell-sets-tabular JSON schema.\nexport const NA_VALUE_TABULAR = 'NA';\n\nexport const SETS_DATATYPE_CELL = 'cell';\nexport const HIERARCHICAL_SCHEMAS = {\n  cell: {\n    latestVersion: '0.1.3',\n    schema: cellSetsSchema,\n  },\n};\n\nexport const TABULAR_SCHEMAS = {\n  cell: {\n    schema: cellSetsTabularSchema,\n  },\n};\n","/* eslint-disable no-plusplus */\n\n// Adapted from https://github.com/feross/fromentries/blob/29b52a850bb3a47c390937631c2638edf3443942/index.js\nexport function fromEntries(iterable) {\n  return [...iterable]\n    .reduce((obj, { 0: key, 1: val }) => Object.assign(obj, { [key]: val }), {});\n}\n\nexport function range(length) {\n  return [...Array(length).keys()];\n}\n\n/**\n * Select between a singular and plural version of a word,\n * based on an item count.\n * @param {string} singular The singular version of the word.\n * @param {string} plural The plural version of the word.\n * @param {number} count The number of items.\n * @returns {string} Singular if count is one, else plural.\n */\nexport function pluralize(singular, plural, count) {\n  return (count === 1 ? singular : plural);\n}\n\n/**\n * Capitalize a the first letter of a string.\n * @param {string} word A string to capitalize.\n * @returns {string} The word parameter with the first letter capitalized.\n */\nexport function capitalize(word) {\n  return word.charAt(0).toUpperCase() + word.slice(1);\n}\n\n/**\n * Generate a new scope name which does not\n * conflict / overlap with a previous scope name.\n * Really these just need to be unique within the coordination object.\n * So in theory they could be String(Math.random()) or uuidv4() or something.\n * However it may be good to make them more human-readable and memorable\n * since eventually we will want to expose a UI to update the coordination.\n * @param {string[]} prevScopes Previous scope names.\n * @returns {string} The new scope name.\n */\nexport function getNextScope(prevScopes) {\n  // Keep an ordered list of valid characters.\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';\n  // Store the value of the next character for each position\n  // in the new string.\n  // For example, [0] -> \"A\", [1] -> \"B\", [0, 1] -> \"AB\"\n  const nextCharIndices = [0];\n\n  // Generate a new scope name,\n  // potentially conflicting with an existing name.\n  // Reference: https://stackoverflow.com/a/12504061\n  function next() {\n    const r = [];\n    nextCharIndices.forEach((charIndex) => {\n      r.unshift(chars[charIndex]);\n    });\n    let increment = true;\n    for (let i = 0; i < nextCharIndices.length; i++) {\n      const val = ++nextCharIndices[i];\n      if (val >= chars.length) {\n        nextCharIndices[i] = 0;\n      } else {\n        increment = false;\n        break;\n      }\n    }\n    if (increment) {\n      nextCharIndices.push(0);\n    }\n    return r.join('');\n  }\n\n  let nextScope;\n  do {\n    nextScope = next();\n  } while (prevScopes.includes(nextScope));\n  return nextScope;\n}\n","module.exports = require(\"@material-ui/core/styles\");","export const GLOBAL_SLIDER_DIMENSION_FIELDS = ['z', 'time'];\n\nexport const DEFAULT_RASTER_DOMAIN_TYPE = 'Min/Max';\n\nexport const DEFAULT_RASTER_LAYER_PROPS = {\n  colormap: null,\n  opacity: 1,\n  domainType: DEFAULT_RASTER_DOMAIN_TYPE,\n  transparentColor: [0, 0, 0],\n};\n\nexport const DEFAULT_MOLECULES_LAYER = {\n  type: 'molecules', opacity: 1, radius: 20, visible: true,\n};\nexport const DEFAULT_CELLS_LAYER = {\n  type: 'cells', opacity: 1, radius: 50, visible: true, stroked: false,\n};\nexport const DEFAULT_NEIGHBORHOODS_LAYER = {\n  type: 'neighborhoods', visible: false,\n};\n\nexport const DEFAULT_LAYER_TYPE_ORDERING = [\n  'molecules',\n  'cells',\n  'neighborhoods',\n  'raster',\n];\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}","/**\n * A loader error ancestor class containing a default constructor\n * and a stub for the required warnInConsole() method.\n */\nexport default class AbstractLoaderError {\n  constructor(message) {\n    this.message = message;\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  warnInConsole() {\n    throw new Error('The warnInConsole() method has not been implemented.');\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderFetchError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl, responseHeaders) {\n    super(`Error HTTP status fetching ${datasetType}.`);\n    this.name = 'LoaderFetchError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n    this.responseHeaders = responseHeaders;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetUrl, responseHeaders,\n    } = this;\n    console.warn(\n      `${datasetType} from ${datasetUrl}: fetch failed`,\n      responseHeaders,\n    );\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderValidationError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl, reason) {\n    super(`Error while validating ${datasetType}.`);\n    this.name = 'LoaderValidationError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n    this.reason = reason;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetUrl, reason,\n    } = this;\n    console.warn(\n      `${datasetType} from ${datasetUrl}: validation failed`,\n      JSON.stringify(reason, null, 2),\n    );\n  }\n}\n","import AbstractLoaderError from './AbstractLoaderError';\n\nexport default class LoaderNotFoundError extends AbstractLoaderError {\n  constructor(datasetType, datasetFileType, datasetUrl) {\n    super(`Error finding loader for ${datasetType}.`);\n    this.name = 'LoaderNotFoundError';\n\n    this.datasetType = datasetType;\n    this.datasetFileType = datasetFileType;\n    this.datasetUrl = datasetUrl;\n  }\n\n  warnInConsole() {\n    const {\n      datasetType, datasetFileType, datasetUrl,\n    } = this;\n    if (datasetFileType && datasetUrl) {\n      console.warn(\n        `${datasetType} from ${datasetUrl}: unable to find loader for fileType ${datasetFileType}`,\n      );\n    } else {\n      console.warn(\n        `${datasetType}: unable to find loader`,\n      );\n    }\n  }\n}\n","export { default as AbstractLoaderError } from './AbstractLoaderError';\nexport { default as LoaderFetchError } from './LoaderFetchError';\nexport { default as LoaderValidationError } from './LoaderValidationError';\nexport { default as LoaderNotFoundError } from './LoaderNotFoundError';\n","module.exports = require(\"deck.gl\");","import {\n  useRef, useState, useEffect, useCallback,\n} from 'react';\nimport debounce from 'lodash/debounce';\nimport { useGridResize, useEmitGridResize } from '../app/state/hooks';\n\n/**\n * Custom hook, subscribes to GRID_RESIZE and window resize events.\n * @returns {array} `[width, height, containerRef]` where width and height\n * are numbers and containerRef is a React ref.\n */\nexport function useGridItemSize() {\n  const containerRef = useRef();\n\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n\n  // On window resize events, increment the grid resize count.\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n\n  // On new grid resize counts, re-compute the component\n  // width/height.\n  useEffect(() => {\n    if (!containerRef.current) return;\n    const container = containerRef.current;\n    const containerRect = container.getBoundingClientRect();\n    setHeight(containerRect.height);\n    setWidth(containerRect.width);\n  }, [resizeCount]);\n\n  return [width, height, containerRef];\n}\n\n/**\n * Custom hook, subscribes to GRID_RESIZE and window resize events.\n * @returns {array} `[width, height, deckRef]` where width and height\n * are numbers and deckRef is a React ref to be used with\n * a <DeckGL/> element (or a forwardRef to one).\n */\nexport function useDeckCanvasSize() {\n  const deckRef = useRef();\n\n  const [height, setHeight] = useState();\n  const [width, setWidth] = useState();\n\n  const resizeCount = useGridResize();\n  const incrementResizeCount = useEmitGridResize();\n\n  // On window resize events, increment the grid resize count.\n  useEffect(() => {\n    function onWindowResize() {\n      incrementResizeCount();\n    }\n    const onResizeDebounced = debounce(onWindowResize, 100, { trailing: true });\n    window.addEventListener('resize', onResizeDebounced);\n    onWindowResize();\n    return () => {\n      window.removeEventListener('resize', onResizeDebounced);\n    };\n  }, [incrementResizeCount]);\n\n  // On new grid resize counts, re-compute the DeckGL canvas\n  // width/height.\n  useEffect(() => {\n    if (!deckRef.current) return;\n    const { canvas } = deckRef.current.deck;\n    const canvasRect = canvas.getBoundingClientRect();\n    setHeight(canvasRect.height);\n    setWidth(canvasRect.width);\n  }, [resizeCount]);\n\n  return [width, height, deckRef];\n}\n\n/**\n * This hook handles a boolean isReady value,\n * which only returns true once every item in the\n * input list has been marked as \"ready\".\n * @param {string[]} items The items to wait on.\n * Should be defined as a constant\n * (outside a function component / render function),\n * otherwise strange bugs may occur.\n * @returns {array} An array\n * [isReady, setItemIsReady, resetReadyItems]\n * where isReady is the boolean value,\n * setItemIsReady marks one item as ready,\n * and resetReadyItem marks all items as waiting.\n */\nexport function useReady(supportedItems) {\n  const items = supportedItems;\n  const [waiting, setWaiting] = useState(items);\n\n  const setItemIsReady = useCallback((readyItem) => {\n    setWaiting((waitingItems) => {\n      const nextWaitingItems = waitingItems.filter(item => item !== readyItem);\n      // eslint-disable-next-line no-console\n      console.log(`cleared ${readyItem}; waiting on ${nextWaitingItems.length}: ${JSON.stringify(nextWaitingItems)}`);\n      return nextWaitingItems;\n    });\n  }, [setWaiting]);\n\n  const resetReadyItems = useCallback(() => {\n    setWaiting(items);\n    // eslint-disable-next-line no-console\n    console.log(`waiting on ${items.length}: ${JSON.stringify(items)}`);\n  }, [setWaiting, items]);\n\n  const isReady = waiting.length === 0;\n\n  return [isReady, setItemIsReady, resetReadyItems];\n}\n\n/**\n * This hook manages a list of URLs,\n * with adding and resetting helpers.\n * @returns {array} An array\n * [urls, addUrl, resetUrls]\n * where urls is the array of URL objects,\n * addUrl is a function for adding a URL to the array,\n * resetUrls is a function that clears the array.\n */\nexport function useUrls() {\n  const [urls, setUrls] = useState([]);\n\n  const addUrl = useCallback((url, name) => {\n    if (url) {\n      setUrls(prev => ([...prev, { url, name }]));\n    }\n  }, [setUrls]);\n\n  const resetUrls = useCallback(() => {\n    setUrls([]);\n  }, [setUrls]);\n\n  return [urls, addUrl, resetUrls];\n}\n","import { useState, useEffect } from 'react';\nimport { useSetWarning } from '../app/state/hooks';\nimport {\n  AbstractLoaderError,\n  LoaderNotFoundError,\n} from '../loaders/errors/index';\nimport { initializeRasterLayersAndChannels } from './spatial/utils';\n\n/**\n * Warn via publishing to the console\n * and to the global warning store.\n * @param {AbstractLoaderError} error An error instance.\n */\nfunction warn(error, setWarning) {\n  setWarning(error.message);\n  console.warn(error.message);\n  if (error instanceof AbstractLoaderError) {\n    error.warnInConsole();\n  }\n}\n\n/**\n * Get the dataset description string.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @returns {array} [description] where\n * description is a string.\n */\nexport function useDescription(loaders, dataset) {\n  const [description, setDescription] = useState();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].description) {\n      setDescription(loaders[dataset].description);\n    } else {\n      setDescription(null);\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [description];\n}\n\n/**\n * Get data from a cells data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {(function|null)} onLoad An extra function to execute upon load of the data.\n * @returns {array} [cells, cellsCount] where\n * cells is an object and cellsCount is the\n * number of items in the cells object.\n */\nexport function useCellsData(loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null) {\n  const [cells, setCells] = useState({});\n  const [cellsCount, setCellsCount] = useState(0);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.cells) {\n      loaders[dataset].loaders.cells.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url } = payload;\n        setCells(data);\n        setCellsCount(Object.keys(data).length);\n        addUrl(url, 'Cells');\n        if (onLoad) {\n          onLoad();\n        }\n        setItemIsReady('cells');\n      });\n    } else {\n      setCells({});\n      setCellsCount(0);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'cells', null, null), setWarning);\n      } else {\n        setItemIsReady('cells');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [cells, cellsCount];\n}\n\n/**\n * Get data from a cell sets data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @returns {array} [cellSets] where\n * cellSets is a sets tree object.\n */\nexport function useCellSetsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null,\n) {\n  const [cellSets, setCellSets] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['cell-sets']) {\n      // Load the data initially.\n      loaders[dataset].loaders['cell-sets'].load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url } = payload;\n        setCellSets(data);\n        addUrl(url, 'Cell Sets');\n        if (onLoad) {\n          onLoad(data);\n        }\n        setItemIsReady('cell-sets');\n      });\n    } else {\n      setCellSets(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'cell-sets', null, null), setWarning);\n      } else {\n        setItemIsReady('cell-sets');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [cellSets];\n}\n\n/**\n * Get data from an expression matrix data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @returns {array} [expressionMatrix] where\n * expressionMatrix is an object with\n * shape { cols, rows, matrix }.\n */\nexport function useExpressionMatrixData(loaders, dataset, setItemIsReady, addUrl, isRequired) {\n  const [expressionMatrix, setExpressionMatrix] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['expression-matrix']) {\n      loaders[dataset].loaders['expression-matrix'].load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url } = payload;\n        const [attrs, arr] = data;\n        setExpressionMatrix({\n          cols: attrs.cols,\n          rows: attrs.rows,\n          matrix: arr.data,\n        });\n        addUrl(url, 'Expression Matrix');\n        setItemIsReady('expression-matrix');\n      });\n    } else {\n      setExpressionMatrix(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'expression-matrix', null, null), setWarning);\n      } else {\n        setItemIsReady('expression-matrix');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [expressionMatrix];\n}\n\n/**\n * Get data from a molecules data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {(function|null)} onLoad An extra function to execute upon load of the data.\n * @returns {array} [molecules, moleculesCount, locationsCount] where\n * molecules is an object,\n * moleculesCount is the number of unique molecule types, and\n * locationsCount is the number of molecules.\n */\nexport function useMoleculesData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null,\n) {\n  const [molecules, setMolecules] = useState();\n  const [moleculesCount, setMoleculesCount] = useState(0);\n  const [locationsCount, setLocationsCount] = useState(0);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.molecules) {\n      loaders[dataset].loaders.molecules.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, url } = payload;\n        setMolecules(data);\n        setMoleculesCount(Object.keys(data).length);\n        setLocationsCount(Object.values(data)\n          .map(l => l.length)\n          .reduce((a, b) => a + b, 0));\n        addUrl(url, 'Molecules');\n        if (onLoad) {\n          onLoad();\n        }\n        setItemIsReady('molecules');\n      });\n    } else {\n      setMolecules({});\n      setMoleculesCount(0);\n      setLocationsCount(0);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'molecules', null, null), setWarning);\n      } else {\n        setItemIsReady('molecules');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [molecules, moleculesCount, locationsCount];\n}\n\n/**\n * Get data from a neighborhoods data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {(function|null)} onLoad An extra function to execute upon load of the data.\n * @returns {array} [neighborhoods] where\n * neighborhoods is an object.\n */\nexport function useNeighborhoodsData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null,\n) {\n  const [neighborhoods, setNeighborhoods] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.neighborhoods) {\n      loaders[dataset].loaders.neighborhoods.load().catch(e => warn(e, setWarning))\n        .then((payload) => {\n          if (!payload) return;\n          const { data, url } = payload;\n          setNeighborhoods(data);\n          addUrl(url, 'Neighborhoods');\n          if (onLoad) {\n            onLoad();\n          }\n          setItemIsReady('neighborhoods');\n        });\n    } else {\n      setNeighborhoods({});\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'neighborhoods', null, null), setWarning);\n      } else {\n        setItemIsReady('neighborhoods');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [neighborhoods];\n}\n\n/**\n * Get data from a raster data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {(function|null)} onLoad An extra function to execute upon load of the data.\n * @returns {array} [raster, imageLayerLoaders, imageLayerMeta] where\n * raster is an object,\n * imageLayerLoaders is an object, and\n * imageLayerMeta is an object.\n */\nexport function useRasterData(loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null) {\n  const [raster, setRaster] = useState();\n  // Since we want the image layer / channel definitions to come from the\n  // coordination space stored as JSON in the view config,\n  // we need to set up a separate state variable here to store the\n  // non-JSON objects, such as layer loader instances.\n  const [imageLayerLoaders, setImageLayerLoaders] = useState([]);\n  const [imageLayerMeta, setImageLayerMeta] = useState([]);\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders.raster) {\n      loaders[dataset].loaders.raster.load().catch(e => warn(e, setWarning)).then((payload) => {\n        if (!payload) return;\n        const { data, urls } = payload;\n        setRaster(data);\n        urls.forEach(([url, name]) => {\n          addUrl(url, name);\n        });\n\n        const {\n          layers: rasterLayers,\n          renderLayers:\n          rasterRenderLayers,\n          usePhysicalSizeScaling,\n        } = data;\n        initializeRasterLayersAndChannels(rasterLayers, rasterRenderLayers, usePhysicalSizeScaling)\n          .then(([autoImageLayers, nextImageLoaders, nextImageMeta]) => {\n            setImageLayerLoaders(nextImageLoaders);\n            setImageLayerMeta(nextImageMeta);\n            if (onLoad) {\n              onLoad(autoImageLayers);\n            }\n            setItemIsReady('raster');\n          });\n      });\n    } else {\n      // There was no raster loader for this dataset,\n      // and raster should be optional.\n      setImageLayerLoaders([]);\n      setImageLayerMeta([]);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'raster', null, null), setWarning);\n      } else {\n        setItemIsReady('raster');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [raster, imageLayerLoaders, imageLayerMeta];\n}\n\n/**\n * Get data from a genomic-profiles data type loader,\n * updating \"ready\" and URL state appropriately.\n * Throw warnings if the data is marked as required.\n * Subscribe to loader updates.\n * @param {object} loaders The object mapping\n * datasets and data types to loader instances.\n * @param {string} dataset The key for a dataset,\n * used to identify which loader to use.\n * @param {function} setItemIsReady A function to call\n * when done loading.\n * @param {function} addUrl A function to call to update\n * the URL list.\n * @param {boolean} isRequired Should a warning be thrown if\n * loading is unsuccessful?\n * @param {(function|null)} onLoad An extra function to execute upon load of the data.\n * @returns {array} [neighborhoods] where\n * neighborhoods is an object.\n */\nexport function useGenomicProfilesData(\n  loaders, dataset, setItemIsReady, addUrl, isRequired, onLoad = null,\n) {\n  const [genomicProfilesAttrs, setGenomicProfilesAttrs] = useState();\n\n  const setWarning = useSetWarning();\n\n  useEffect(() => {\n    if (!loaders[dataset]) {\n      return;\n    }\n\n    if (loaders[dataset].loaders['genomic-profiles']) {\n      loaders[dataset].loaders['genomic-profiles'].load().catch(e => warn(e, setWarning))\n        .then((payload) => {\n          if (!payload) return;\n          const { data, url } = payload;\n          setGenomicProfilesAttrs(data);\n          addUrl(url);\n          if (onLoad) {\n            onLoad();\n          }\n          setItemIsReady('genomic-profiles');\n        });\n    } else {\n      setGenomicProfilesAttrs(null);\n      if (isRequired) {\n        warn(new LoaderNotFoundError(dataset, 'genomic-profiles', null, null), setWarning);\n      } else {\n        setItemIsReady('genomic-profiles');\n      }\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  return [genomicProfilesAttrs];\n}\n","/**\n * Constants representing names of coordination types,\n * to help prevent typos.\n */\nexport const COORDINATION_TYPES = {\n  DATASET: 'dataset',\n  EMBEDDING_TYPE: 'embeddingType',\n  EMBEDDING_ZOOM: 'embeddingZoom',\n  EMBEDDING_ROTATION: 'embeddingRotation',\n  EMBEDDING_TARGET_X: 'embeddingTargetX',\n  EMBEDDING_TARGET_Y: 'embeddingTargetY',\n  EMBEDDING_TARGET_Z: 'embeddingTargetZ',\n  EMBEDDING_CELL_SET_POLYGONS_VISIBLE: 'embeddingCellSetPolygonsVisible',\n  EMBEDDING_CELL_SET_LABELS_VISIBLE: 'embeddingCellSetLabelsVisible',\n  EMBEDDING_CELL_SET_LABEL_SIZE: 'embeddingCellSetLabelSize',\n  EMBEDDING_CELL_RADIUS: 'embeddingCellRadius',\n  SPATIAL_ZOOM: 'spatialZoom',\n  SPATIAL_ROTATION: 'spatialRotation',\n  SPATIAL_TARGET_X: 'spatialTargetX',\n  SPATIAL_TARGET_Y: 'spatialTargetY',\n  SPATIAL_TARGET_Z: 'spatialTargetZ',\n  HEATMAP_ZOOM_X: 'heatmapZoomX',\n  HEATMAP_ZOOM_Y: 'heatmapZoomY',\n  HEATMAP_TARGET_X: 'heatmapTargetX',\n  HEATMAP_TARGET_Y: 'heatmapTargetY',\n  CELL_FILTER: 'cellFilter',\n  CELL_HIGHLIGHT: 'cellHighlight',\n  CELL_SET_SELECTION: 'cellSetSelection',\n  CELL_SET_HIGHLIGHT: 'cellSetHighlight',\n  CELL_SET_COLOR: 'cellSetColor',\n  GENE_FILTER: 'geneFilter',\n  GENE_HIGHLIGHT: 'geneHighlight',\n  GENE_SELECTION: 'geneSelection',\n  GENE_EXPRESSION_COLORMAP: 'geneExpressionColormap',\n  GENE_EXPRESSION_COLORMAP_RANGE: 'geneExpressionColormapRange',\n  CELL_COLOR_ENCODING: 'cellColorEncoding',\n  SPATIAL_LAYERS: 'spatialLayers',\n  GENOMIC_ZOOM_X: 'genomicZoomX',\n  GENOMIC_ZOOM_Y: 'genomicZoomY',\n  GENOMIC_TARGET_X: 'genomicTargetX',\n  GENOMIC_TARGET_Y: 'genomicTargetY',\n  ADDITIONAL_CELL_SETS: 'additionalCellSets',\n  MOLECULE_HIGHLIGHT: 'moleculeHighlight',\n};\n\n/**\n * Coordination types may have default values,\n * which can be defined here, and used by the\n * auto initialization strategy.\n */\nexport const DEFAULT_COORDINATION_VALUES = {\n  [COORDINATION_TYPES.EMBEDDING_ZOOM]: null,\n  [COORDINATION_TYPES.EMBEDDING_ROTATION]: 0,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_X]: null,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_Y]: null,\n  [COORDINATION_TYPES.EMBEDDING_TARGET_Z]: 0,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE]: false,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE]: false,\n  [COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE]: 14,\n  [COORDINATION_TYPES.EMBEDDING_CELL_RADIUS]: 1,\n  [COORDINATION_TYPES.SPATIAL_ZOOM]: null,\n  [COORDINATION_TYPES.SPATIAL_ROTATION]: 0,\n  [COORDINATION_TYPES.SPATIAL_TARGET_X]: null,\n  [COORDINATION_TYPES.SPATIAL_TARGET_Y]: null,\n  [COORDINATION_TYPES.SPATIAL_TARGET_Z]: 0,\n  [COORDINATION_TYPES.SPATIAL_LAYERS]: null,\n  [COORDINATION_TYPES.HEATMAP_ZOOM_X]: 0,\n  [COORDINATION_TYPES.HEATMAP_ZOOM_Y]: 0,\n  [COORDINATION_TYPES.HEATMAP_TARGET_X]: 0,\n  [COORDINATION_TYPES.HEATMAP_TARGET_Y]: 0,\n  [COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP]: 'plasma',\n  [COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE]: [0.0, 1.0],\n  [COORDINATION_TYPES.GENE_FILTER]: null,\n  [COORDINATION_TYPES.GENE_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.GENE_SELECTION]: null,\n  [COORDINATION_TYPES.CELL_FILTER]: null,\n  [COORDINATION_TYPES.CELL_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.CELL_SET_SELECTION]: null,\n  [COORDINATION_TYPES.CELL_SET_HIGHLIGHT]: null,\n  [COORDINATION_TYPES.CELL_SET_COLOR]: null,\n  [COORDINATION_TYPES.CELL_COLOR_ENCODING]: 'cellSetSelection',\n  [COORDINATION_TYPES.GENOMIC_ZOOM_X]: 0,\n  [COORDINATION_TYPES.GENOMIC_ZOOM_Y]: 0,\n  [COORDINATION_TYPES.GENOMIC_TARGET_X]: 1549999999.5,\n  [COORDINATION_TYPES.GENOMIC_TARGET_Y]: 1549999999.5,\n  [COORDINATION_TYPES.ADDITIONAL_CELL_SETS]: null,\n  [COORDINATION_TYPES.MOLECULE_HIGHLIGHT]: null,\n};\n\n// The following coordination types should be\n// initialized to independent scopes when\n// initialized automatically.\n// These make the resulting view config\n// (after auto-initialization) behave\n// like \"legacy\" Vitessce (pre-coordination model).\nexport const AUTO_INDEPENDENT_COORDINATION_TYPES = [\n  COORDINATION_TYPES.SPATIAL_ZOOM,\n  COORDINATION_TYPES.SPATIAL_TARGET_X,\n  COORDINATION_TYPES.SPATIAL_TARGET_Y,\n  COORDINATION_TYPES.SPATIAL_TARGET_Z,\n  COORDINATION_TYPES.HEATMAP_ZOOM_X,\n  COORDINATION_TYPES.HEATMAP_ZOOM_Y,\n  COORDINATION_TYPES.HEATMAP_TARGET_X,\n  COORDINATION_TYPES.HEATMAP_TARGET_Y,\n  COORDINATION_TYPES.EMBEDDING_ZOOM,\n  COORDINATION_TYPES.EMBEDDING_TARGET_X,\n  COORDINATION_TYPES.EMBEDDING_TARGET_Y,\n  COORDINATION_TYPES.EMBEDDING_TARGET_Z,\n  COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE,\n  COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE,\n  COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE,\n  COORDINATION_TYPES.EMBEDDING_CELL_RADIUS,\n];\n\n/**\n   * Mapping from component type to\n   * supported coordination object types.\n   * This mapping can be used to determine\n   * which pieces of state that a component will\n   * need to get/set.\n   * Keys here are the component registry keys.\n   */\nexport const COMPONENT_COORDINATION_TYPES = {\n  scatterplot: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.EMBEDDING_TYPE,\n    COORDINATION_TYPES.EMBEDDING_ZOOM,\n    COORDINATION_TYPES.EMBEDDING_ROTATION,\n    COORDINATION_TYPES.EMBEDDING_TARGET_X,\n    COORDINATION_TYPES.EMBEDDING_TARGET_Y,\n    COORDINATION_TYPES.EMBEDDING_TARGET_Z,\n    COORDINATION_TYPES.EMBEDDING_CELL_SET_POLYGONS_VISIBLE,\n    COORDINATION_TYPES.EMBEDDING_CELL_SET_LABELS_VISIBLE,\n    COORDINATION_TYPES.EMBEDDING_CELL_SET_LABEL_SIZE,\n    COORDINATION_TYPES.EMBEDDING_CELL_RADIUS,\n    COORDINATION_TYPES.CELL_FILTER,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  spatial: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.SPATIAL_ZOOM,\n    COORDINATION_TYPES.SPATIAL_ROTATION,\n    COORDINATION_TYPES.SPATIAL_LAYERS,\n    COORDINATION_TYPES.SPATIAL_TARGET_X,\n    COORDINATION_TYPES.SPATIAL_TARGET_Y,\n    COORDINATION_TYPES.SPATIAL_TARGET_Z,\n    COORDINATION_TYPES.CELL_FILTER,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n    COORDINATION_TYPES.MOLECULE_HIGHLIGHT,\n  ],\n  heatmap: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.HEATMAP_ZOOM_X,\n    COORDINATION_TYPES.HEATMAP_ZOOM_Y,\n    COORDINATION_TYPES.HEATMAP_TARGET_X,\n    COORDINATION_TYPES.HEATMAP_TARGET_Y,\n    COORDINATION_TYPES.CELL_FILTER,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP,\n    COORDINATION_TYPES.GENE_EXPRESSION_COLORMAP_RANGE,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  cellSets: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  cellSetSizes: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  cellSetExpression: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  status: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.CELL_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.MOLECULE_HIGHLIGHT,\n  ],\n  genes: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.CELL_COLOR_ENCODING,\n  ],\n  expressionHistogram: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENE_SELECTION,\n  ],\n  layerController: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.SPATIAL_LAYERS,\n  ],\n  higlass: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENOMIC_ZOOM_X,\n    COORDINATION_TYPES.GENOMIC_ZOOM_Y,\n    COORDINATION_TYPES.GENOMIC_TARGET_X,\n    COORDINATION_TYPES.GENOMIC_TARGET_Y,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n  ],\n  genomicProfiles: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.GENOMIC_ZOOM_X,\n    COORDINATION_TYPES.GENOMIC_ZOOM_Y,\n    COORDINATION_TYPES.GENOMIC_TARGET_X,\n    COORDINATION_TYPES.GENOMIC_TARGET_Y,\n    COORDINATION_TYPES.GENE_FILTER,\n    COORDINATION_TYPES.GENE_HIGHLIGHT,\n    COORDINATION_TYPES.GENE_SELECTION,\n    COORDINATION_TYPES.CELL_SET_SELECTION,\n    COORDINATION_TYPES.CELL_SET_HIGHLIGHT,\n    COORDINATION_TYPES.CELL_SET_COLOR,\n    COORDINATION_TYPES.ADDITIONAL_CELL_SETS,\n  ],\n  description: [\n    COORDINATION_TYPES.DATASET,\n    COORDINATION_TYPES.SPATIAL_LAYERS,\n  ],\n};\n","module.exports = require(\"@hms-dbmi/viv\");","module.exports = require(\"mathjs\");","module.exports = require(\"@material-ui/core/Grid\");","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export const TOOLTIP_ANCESTOR = 'tooltip-ancestor';\nconst CARD = `card card-body my-2 ${TOOLTIP_ANCESTOR}`;\nexport const PRIMARY_CARD = `${CARD} bg-primary`;\nexport const SECONDARY_CARD = `${CARD} bg-secondary`;\nexport const BLACK_CARD = `${CARD} bg-black`;\nexport const TITLE_CARD = 'title';\nexport const SCROLL_CARD = `${PRIMARY_CARD} scroll`;\n","module.exports = require(\"zustand\");","export default function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nexport default function LoadingIndicator() {\n  return (\n    <div className=\"loading-indicator-backdrop\">\n      <div className=\"loading-indicator-container\">\n        <CircularProgress />\n      </div>\n    </div>\n  );\n}\n","import React, { useReducer } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport IconButton from '@material-ui/core/IconButton';\nimport Link from '@material-ui/core/Link';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport { SCROLL_CARD, BLACK_CARD, SECONDARY_CARD } from './classNames';\nimport LoadingIndicator from './LoadingIndicator';\nimport { PopperMenu } from './shared-mui/components';\n\nconst useStyles = makeStyles(theme => ({\n  iconButton: {\n    border: 'none',\n    marginLeft: 0,\n    background: 'none',\n    color: theme.palette.primaryForeground,\n    paddingLeft: '0.25em',\n    paddingRight: '0.25em',\n    borderRadius: '2px',\n    '&:hover': {\n      backgroundColor: theme.palette.primaryBackgroundLight,\n    },\n    '&:first-child': {\n      marginLeft: '0.75em',\n    },\n    '&:last-child': {\n      marginRight: '0.25em',\n    },\n    '& svg': {\n      width: '0.7em',\n      height: '0.7em',\n      verticalAlign: 'middle',\n    },\n  },\n  downloadLink: {\n    color: theme.palette.primaryForeground,\n  },\n}));\n\nfunction SettingsIconWithArrow({ open }) {\n  return (\n    <>\n      <SettingsIcon />\n      {open ? <ArrowDropUpIcon /> : <ArrowDropDownIcon />}\n    </>\n  );\n}\n\nfunction PlotOptions(props) {\n  const { options } = props;\n  const [open, toggle] = useReducer(v => !v, false);\n  const classes = useStyles();\n  return (\n    <PopperMenu\n      open={open}\n      toggle={toggle}\n      buttonIcon={<SettingsIconWithArrow open={open} />}\n      buttonClassName={classes.iconButton}\n      placement=\"bottom-end\"\n    >\n      {options}\n    </PopperMenu>\n  );\n}\n\nfunction CloudDownloadIconWithArrow({ open }) {\n  return (\n    <>\n      <CloudDownloadIcon />\n      {open ? <ArrowDropUpIcon /> : <ArrowDropDownIcon />}\n    </>\n  );\n}\n\nfunction DownloadOptions(props) {\n  const { urls } = props;\n  const [open, toggle] = useReducer(v => !v, false);\n  const classes = useStyles();\n  return (\n    <PopperMenu\n      open={open}\n      toggle={toggle}\n      buttonIcon={<CloudDownloadIconWithArrow open={open} />}\n      buttonClassName={classes.iconButton}\n      placement=\"bottom-end\"\n    >\n      {urls.map(({ url, name }) => (\n        <MenuItem dense key={url}>\n          <Link underline=\"none\" href={url} target=\"_blank\" rel=\"noopener\" className={classes.downloadLink}>\n            Download {name}\n          </Link>\n        </MenuItem>\n      ))}\n    </PopperMenu>\n  );\n}\n\nfunction ClosePaneButton(props) {\n  const { removeGridComponent } = props;\n  const classes = useStyles();\n  return (\n    <IconButton\n      onClick={removeGridComponent}\n      size=\"small\"\n      className={classes.iconButton}\n      title=\"close\"\n    >\n      <CloseIcon />\n    </IconButton>\n  );\n}\n\nexport default function TitleInfo(props) {\n  const {\n    title, info, children, isScroll, isSpatial, removeGridComponent, urls,\n    isReady, options,\n  } = props;\n  // eslint-disable-next-line no-nested-ternary\n  const childClassName = isScroll ? SCROLL_CARD : (isSpatial ? BLACK_CARD : SECONDARY_CARD);\n  return (\n    // d-flex without wrapping div is not always full height; I don't understand the root cause.\n    <>\n      <div className=\"title d-flex justify-content-between align-items-baseline\">\n        <div className=\"justify-content-between d-flex align-items-end\">\n          <span>{title}</span>\n        </div>\n        <span className=\"details pl-2 align-items-end\">\n          <span className=\"d-flex justify-content-between\">\n            {info}\n            { options && (\n              <PlotOptions\n                options={options}\n              />\n            ) }\n            {urls && urls.length > 0 && (\n              <DownloadOptions\n                urls={urls}\n              />\n            )}\n            <ClosePaneButton\n              removeGridComponent={removeGridComponent}\n            />\n          </span>\n        </span>\n      </div>\n      <div className={childClassName}>\n        { !isReady && <LoadingIndicator /> }\n        {children}\n      </div>\n    </>\n    // \"pl-2\" only matters when the window is very narrow.\n  );\n}\n","import { makeStyles, createMuiTheme } from '@material-ui/core/styles';\nimport { grey } from '@material-ui/core/colors';\n\nexport const styles = makeStyles(() => ({\n  paper: {\n    maxHeight: 200,\n    overflow: 'auto',\n    zIndex: 1500,\n  },\n  span: {\n    width: '70px',\n    textAlign: 'center',\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n  popper: {\n    zIndex: 4,\n  },\n}));\n\nexport const muiTheme = {\n  dark: createMuiTheme({\n    palette: {\n      type: 'dark',\n      primary: grey,\n      secondary: grey,\n      primaryBackground: '#222222',\n      primaryBackgroundHighlight: '#000000',\n      primaryBackgroundInput: '#D3D3D3',\n      primaryBackgroundDim: '#333333',\n      primaryBackgroundLight: '#757575',\n      primaryForeground: '#D3D3D3',\n      primaryForegroundDim: '#000000',\n      primaryForegroundActive: '#9bb7d6',\n      secondaryBackground: '#000000',\n      secondaryBackgroundDim: '#444444',\n      secondaryForeground: '#D3D3D3',\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true,\n      },\n    },\n  }),\n  light: createMuiTheme({\n    palette: {\n      type: 'light',\n      primary: grey,\n      secondary: grey,\n      primaryBackground: '#F1F1F1',\n      primaryBackgroundHighlight: '#FFFFFF',\n      primaryBackgroundInput: '#FFFFFF',\n      primaryBackgroundDim: '#8A8A8A',\n      primaryBackgroundLight: '#e0e0e0',\n      primaryForeground: '#333333',\n      primaryForegroundDim: '#808080',\n      primaryForegroundActive: '#0074D9',\n      secondaryBackground: '#F1F1F1',\n      secondaryBackgroundDim: '#C0C0C0',\n      secondaryForeground: '#222222',\n    },\n    props: {\n      MuiButtonBase: {\n        disableRipple: true,\n      },\n    },\n  }),\n};\n","module.exports = require(\"d3-array\");","module.exports = require(\"@material-ui/core/colors\");","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","module.exports = require(\"@material-ui/core/IconButton\");","import React, { useRef } from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuList from '@material-ui/core/MenuList';\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport { styles } from './styles';\n\nfunction MuiPopper(props) {\n  const classes = styles();\n  const {\n    anchorEl,\n    open,\n    placement = 'bottom-start',\n    children,\n  } = props;\n  return (\n    <Popper\n      className={classes.popper}\n      open={open}\n      anchorEl={anchorEl.current}\n      placement={placement}\n    >\n      {children}\n    </Popper>\n  );\n}\n\nfunction MuiPaper(props) {\n  const { children } = props;\n  const classes = styles();\n  return (\n    <Paper className={classes.paper} elevation={4}>\n      {children}\n    </Paper>\n  );\n}\n\nexport function MuiSpan(props) {\n  const { children } = props;\n  const classes = styles();\n  return <span className={classes.span}>{children}</span>;\n}\n\nexport function PopperMenu(props) {\n  const {\n    buttonIcon,\n    open,\n    toggle,\n    children,\n    placement,\n    buttonClassName,\n  } = props;\n  const anchorRef = useRef(null);\n  const classes = styles();\n  return (\n    <>\n      <IconButton\n        onClick={toggle}\n        size=\"small\"\n        ref={anchorRef}\n        className={buttonClassName}\n      >\n        {buttonIcon}\n      </IconButton>\n      <MuiPopper\n        className={classes.popper}\n        open={open}\n        anchorEl={anchorRef}\n        placement={placement}\n      >\n        <MuiPaper>\n          <ClickAwayListener onClickAway={toggle}>\n            <MenuList>{children}</MenuList>\n          </ClickAwayListener>\n        </MuiPaper>\n      </MuiPopper>\n    </>\n  );\n}\n","import arrayLikeToArray from \"./arrayLikeToArray\";\nexport default function _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}","/* eslint-disable no-plusplus */\nimport shortNumber from 'short-number';\nimport { cloneDeep, isEqual } from 'lodash';\nimport { getChannelStats, getDefaultInitialViewState } from '@hms-dbmi/viv';\nimport { extent } from 'd3-array';\nimport { Matrix4 } from 'math.gl';\nimport { divide, compare, unit } from 'mathjs';\nimport { pluralize } from '../../utils';\nimport { VIEWER_PALETTE } from '../utils';\nimport {\n  GLOBAL_SLIDER_DIMENSION_FIELDS,\n  DEFAULT_RASTER_LAYER_PROPS,\n  DEFAULT_LAYER_TYPE_ORDERING,\n} from './constants';\n\nexport function square(x, y, r) {\n  return [[x, y + r], [x + r, y], [x, y - r], [x - r, y]];\n}\n\n/**\n * Sort spatial layer definition array,\n * to keep the ordering in the layer controller\n * consistent.\n * Intended to be used with auto-initialized layer\n * definition arrays only, as a pre-defined layer array\n * should not be re-ordered.\n * @param {object[]} layers Array of layer definition objects.\n * Object must have a .type property.\n */\nexport function sortLayers(layers) {\n  return layers.sort((a, b) => (\n    DEFAULT_LAYER_TYPE_ORDERING.indexOf(a.type) - DEFAULT_LAYER_TYPE_ORDERING.indexOf(b.type)\n  ));\n}\n\n/**\n * Return the midpoint of the global dimensions.\n * @param {object[]} imageDims Loader dimensions object array.\n * @returns {object} The selection.\n */\nfunction getDefaultGlobalSelection(imageDims) {\n  const globalIndices = imageDims\n    .filter(dim => GLOBAL_SLIDER_DIMENSION_FIELDS.includes(dim.field));\n  const selection = {};\n  globalIndices.forEach((dim) => {\n    selection[dim.field] = Math.floor((dim.values.length || 0) / 2);\n  });\n  return selection;\n}\n\n/**\n * Create a default selection using the midpoint of the available global dimensions,\n * and then the first four available selections from the first selectable channel.\n * @param {object[]} imageDims Loader dimensions object array.\n * @returns {object} The selection.\n */\nfunction buildDefaultSelection(imageDims) {\n  const selection = [];\n  const globalSelection = getDefaultGlobalSelection(imageDims);\n  // First non-global dimension with some sort of selectable values\n  const firstNonGlobalDimension = imageDims.filter(\n    dim => !GLOBAL_SLIDER_DIMENSION_FIELDS.includes(dim.field) && dim.values,\n  )[0];\n  for (let i = 0; i < Math.min(4, firstNonGlobalDimension.values.length); i += 1) {\n    selection.push(\n      {\n        [firstNonGlobalDimension.field]: i,\n        ...globalSelection,\n      },\n    );\n  }\n  return selection;\n}\n\n/**\n * Initialize the channel settings for an individual channel and selection.\n * @param {object} loader A viv loader instance, for either Zarr or OME-TIFF.\n * @param {object} selection The channel selection object.\n * @param {number} i The index of this channel for the layer.\n * @returns {object} The initialized channel with\n * domain/slider settings.\n */\nexport async function initializeChannelForSelection(loader, selection, i) {\n  // Get stats because initial value is Min/Max for domainType.\n  const stats = await getChannelStats({ loader, loaderSelection: [selection] });\n\n  const domain = loader.isRgb ? [[0, 255], [0, 255], [0, 255]][i] : stats[0].domain;\n  const color = loader.isRgb ? [[255, 0, 0], [0, 255, 0], [0, 0, 255]][i] : VIEWER_PALETTE[i];\n  const slider = loader.isRgb ? [[0, 255], [0, 255], [0, 255]][i] : stats[0].autoSliders;\n\n  return {\n    selection,\n    color,\n    visible: true,\n    slider: slider || domain,\n  };\n}\n\n/**\n * Initialize the channel selections for an individual layer.\n * @param {object} loader A viv loader instance, for either Zarr or OME-TIFF.\n * @returns {object[]} An array of selected channels with default\n * domain/slider settings.\n */\nexport async function initializeLayerChannels(loader) {\n  const result = [];\n  const loaderDimensions = loader.dimensions;\n  // Add channel automatically as the first avaialable value for each dimension.\n  const defaultSelection = buildDefaultSelection(loaderDimensions);\n  // Get stats because initial value is Min/Max for domainType.\n  const stats = await getChannelStats({ loader, loaderSelection: defaultSelection });\n\n  const domains = loader.isRgb\n    ? [[0, 255], [0, 255], [0, 255]]\n    : stats.map(stat => stat.domain);\n  const colors = loader.isRgb\n    ? [[255, 0, 0], [0, 255, 0], [0, 0, 255]]\n    : null;\n  const sliders = loader.isRgb\n    ? [[0, 255], [0, 255], [0, 255]]\n    : stats.map(stat => stat.autoSliders);\n\n  defaultSelection.forEach((selection, i) => {\n    const domain = domains[i];\n    const slider = sliders[i];\n    const channel = {\n      selection,\n      color: colors ? colors[i] : VIEWER_PALETTE[i],\n      visible: true,\n      slider: slider || domain,\n    };\n    result.push(channel);\n  });\n  return result;\n}\n\n/**\n * A user may want to use pre-defined channels of interest\n * (defined in a `spatialLayers` coordination object),\n * but wants to allow Vitessce to auto-initialize the\n * sliders, colors, and/or domains for those channels.\n * This function allows those channel properties to\n * be initialized.\n * @param {object[]} layerDefsOrig The original array\n * of user-defined layer definitions, which must contain\n * an array of channel definitions with the .selection\n * property, but may be missing the .domain, .color, .visible,\n * or .slider properties.\n * @param {object} loaders Mapping from layer index to loader\n * instance.\n * @returns {Promise<array>} A tuple of [newLayerDefs, didInitialize],\n * where newLayerDefs is an array of the layers which contains\n * initialized channel properties,\n * and didInitialize is a boolean value indicating whether any\n * channels were initialized.\n */\nexport async function initializeLayerChannelsIfMissing(layerDefsOrig, loaders) {\n  const layerDefs = cloneDeep(layerDefsOrig);\n  const newLayerDefPromises = [];\n\n  let didInitialize = false;\n  for (let layerIndex = 0; layerIndex < layerDefs.length; layerIndex++) {\n    const layerDef = layerDefs[layerIndex];\n    const loader = loaders[layerDef.index];\n    let newLayerDefPromise = Promise.resolve(layerDef);\n    if (layerDef.channels) {\n      const newChannelDefPromises = [];\n      for (let channelIndex = 0; channelIndex < layerDef.channels.length; channelIndex++) {\n        const channelDef = layerDef.channels[channelIndex];\n        let newChannelDefPromise = Promise.resolve(channelDef);\n        // Only auto-initialize if domains, colors, or sliders is missing.\n        if (channelDef.selection && !(channelDef.color && channelDef.slider)) {\n          newChannelDefPromise = initializeChannelForSelection(\n            loader, channelDef.selection, channelIndex,\n          )\n            .then(autoChannelDef => Promise.resolve({ ...autoChannelDef, ...channelDef }));\n          didInitialize = true;\n        }\n        newChannelDefPromises.push(newChannelDefPromise);\n      }\n      newLayerDefPromise = Promise.all(newChannelDefPromises)\n        .then(newChannelDefs => Promise.resolve({ ...layerDef, channels: newChannelDefs }));\n    }\n    newLayerDefPromises.push(newLayerDefPromise);\n  }\n  const newLayerDefs = await Promise.all(newLayerDefPromises);\n  return [newLayerDefs, didInitialize];\n}\n\nfunction getMetaWithTransformMatrices(imageMeta, imageLoaders) {\n  // Do not fill in transformation matrices if any of the layers specify one.\n  if (\n    imageMeta.map(meta => meta?.metadata?.transform?.matrix\n      || meta?.metadata?.transform?.scale\n      || meta?.metadata?.transform?.translate).some(Boolean)\n      || imageLoaders.every(loader => !loader?.physicalSizes?.x || !loader?.physicalSizes?.y)\n  ) {\n    return imageMeta;\n  }\n  // Get the minimum physical among all the current images.\n  const minPhysicalSize = imageLoaders.reduce((acc, loader) => {\n    const sizes = [\n      unit(`${loader.physicalSizes.x.value} ${loader.physicalSizes.x.unit}`.replace('', 'u')),\n      unit(`${loader.physicalSizes.y.value} ${loader.physicalSizes.y.unit}`.replace('', 'u')),\n    ];\n    acc[0] = (acc[0] === undefined || compare(sizes[0], acc[0]) === -1) ? sizes[0] : acc[0];\n    acc[1] = (acc[1] === undefined || compare(sizes[1], acc[1]) === -1) ? sizes[1] : acc[1];\n    return acc;\n  }, []);\n  const imageMetaWithTransform = imageMeta.map((meta, j) => {\n    const loader = imageLoaders[j];\n    const sizes = [\n      unit(`${loader.physicalSizes.x.value} ${loader.physicalSizes.x.unit}`.replace('', 'u')),\n      unit(`${loader.physicalSizes.y.value} ${loader.physicalSizes.y.unit}`.replace('', 'u')),\n    ];\n    // Find the ratio of the sizes to get the scaling factor.\n    const scale = sizes.map((i, k) => divide(i, minPhysicalSize[k]));\n    // no need to store/use identity scaling\n    if (isEqual(scale, [1, 1])) {\n      return meta;\n    }\n    // Make sure to scale the z direction by one.\n    const matrix = new Matrix4().scale([...scale, 1]);\n    const newMeta = { ...meta };\n    newMeta.metadata = {\n      ...newMeta.metadata,\n      // We don't want to store matrix objects in the view config.\n      transform: { matrix: matrix.toArray() },\n    };\n    return newMeta;\n  });\n  return imageMetaWithTransform;\n}\n\n/**\n * Given a set of image layer loader creator functions,\n * create loader objects for an initial layer or set of layers,\n * which will be selected based on default values predefined in\n * the image data file or otherwise by a heuristic\n * (the midpoint of the layers array).\n * @param {object[]} rasterLayers A list of layer metadata objects with\n * shape { name, type, url, createLoader }.\n * @param {(string[]|null)} rasterRenderLayers A list of default raster layers. Optional.\n */\nexport async function initializeRasterLayersAndChannels(\n  rasterLayers,\n  rasterRenderLayers,\n  usePhysicalSizeScaling,\n) {\n  const nextImageLoaders = [];\n  let nextImageMeta = [];\n  const autoImageLayerDefPromises = [];\n\n  // Start all loader creators immediately.\n  // Reference: https://eslint.org/docs/rules/no-await-in-loop\n  const loaders = await Promise.all(rasterLayers.map(layer => layer.loaderCreator()));\n\n  for (let i = 0; i < rasterLayers.length; i++) {\n    const layer = rasterLayers[i];\n    const loader = loaders[i];\n    nextImageLoaders[i] = loader;\n    nextImageMeta[i] = layer;\n  }\n  if (usePhysicalSizeScaling) {\n    nextImageMeta = getMetaWithTransformMatrices(nextImageMeta, nextImageLoaders);\n  }\n  // No layers were pre-defined so set up the default image layers.\n  if (!rasterRenderLayers) {\n    // Midpoint of images list as default image to show.\n    const layerIndex = Math.floor(rasterLayers.length / 2);\n    const loader = nextImageLoaders[layerIndex];\n    const autoImageLayerDefPromise = initializeLayerChannels(loader)\n      .then(channels => Promise.resolve({\n        type: 'raster', index: layerIndex, ...DEFAULT_RASTER_LAYER_PROPS, channels, modelMatrix: nextImageMeta[layerIndex]?.metadata?.transform?.matrix, transparentColor: layerIndex > 0 ? [0, 0, 0] : null,\n      }));\n    autoImageLayerDefPromises.push(autoImageLayerDefPromise);\n  } else {\n    // The renderLayers parameter is a list of layer names to show by default.\n    const globalIndicesOfRenderLayers = rasterRenderLayers\n      .map(imageName => rasterLayers.findIndex(image => image.name === imageName));\n    for (let i = 0; i < globalIndicesOfRenderLayers.length; i++) {\n      const layerIndex = globalIndicesOfRenderLayers[i];\n      const loader = nextImageLoaders[layerIndex];\n      const autoImageLayerDefPromise = initializeLayerChannels(loader)\n        // eslint-disable-next-line no-loop-func\n        .then(channels => Promise.resolve({\n          type: 'raster', index: layerIndex, ...DEFAULT_RASTER_LAYER_PROPS, channels, domainType: 'Min/Max', modelMatrix: nextImageMeta[layerIndex]?.metadata?.transform?.matrix, transparentColor: i > 0 ? [0, 0, 0] : null,\n        }));\n      autoImageLayerDefPromises.push(autoImageLayerDefPromise);\n    }\n  }\n\n  const autoImageLayerDefs = await Promise.all(autoImageLayerDefPromises);\n  return [autoImageLayerDefs, nextImageLoaders, nextImageMeta];\n}\n\n/**\n * Make a subtitle for the spatial component.\n * @param {object} params\n * @param {number} params.observationsCount\n * @param {string} params.observationsLabel\n * @param {string} params.observationsPluralLabel\n * @param {number} params.subobservationsCount\n * @param {string} params.subobservationsLabel\n * @param {string} params.subobservationsPluralLabel\n * @param {number} params.locationsCount\n * @returns {string} The subtitle string,\n * with info about items with zero counts omitted.\n */\nexport function makeSpatialSubtitle({\n  observationsCount, observationsLabel, observationsPluralLabel,\n  subobservationsCount, subobservationsLabel, subobservationsPluralLabel,\n  locationsCount,\n}) {\n  const parts = [];\n  if (subobservationsCount > 0) {\n    let part = `${subobservationsCount} ${pluralize(subobservationsLabel, subobservationsPluralLabel, subobservationsCount)}`;\n    if (locationsCount > 0) {\n      part += ` at ${shortNumber(locationsCount)} locations`;\n    }\n    parts.push(part);\n  }\n  if (observationsCount > 0) {\n    parts.push(`${observationsCount} ${pluralize(observationsLabel, observationsPluralLabel, observationsCount)}`);\n  }\n  return parts.join(', ');\n}\n\nexport function getInitialSpatialTargets({\n  width,\n  height,\n  cells,\n  imageLayerLoaders,\n}) {\n  let initialTargetX = -Infinity;\n  let initialTargetY = -Infinity;\n  let initialZoom = -Infinity;\n  // Some backoff from completely filling the screen.\n  const zoomBackoff = 0.1;\n  const cellValues = Object.values(cells);\n  if (imageLayerLoaders.length > 0) {\n    for (let i = 0; i < imageLayerLoaders.length; i += 1) {\n      const viewSize = { height, width };\n      const { target, zoom: newViewStateZoom } = getDefaultInitialViewState(\n        imageLayerLoaders[i],\n        viewSize,\n        zoomBackoff,\n      );\n      if (target[0] > initialTargetX) {\n        // eslint-disable-next-line prefer-destructuring\n        initialTargetX = target[0];\n        initialZoom = newViewStateZoom;\n      }\n      if (target[1] > initialTargetY) {\n        // eslint-disable-next-line prefer-destructuring\n        initialTargetY = target[1];\n        initialZoom = newViewStateZoom;\n      }\n    }\n  } else if (cellValues.length > 0) {\n    const cellCoordinates = cellValues.map(c => c.xy);\n    const xExtent = extent(cellCoordinates, c => c[0]);\n    const yExtent = extent(cellCoordinates, c => c[1]);\n    const xRange = xExtent[1] - xExtent[0];\n    const yRange = yExtent[1] - yExtent[0];\n    initialTargetX = xExtent[0] + xRange / 2;\n    initialTargetY = yExtent[0] + yRange / 2;\n    initialZoom = Math.log2(Math.min(width / xRange, height / yRange)) - zoomBackoff;\n  }\n  return { initialTargetX, initialTargetY, initialZoom };\n}\n","module.exports = require(\"@material-ui/core/MenuItem\");","module.exports = require(\"@material-ui/icons/ArrowDropDown\");","module.exports = require(\"@material-ui/icons/ArrowDropUp\");","module.exports = require(\"lodash/debounce\");","module.exports = require(\"@material-ui/core/Paper\");","module.exports = require(\"lodash\");","module.exports = require(\"@material-ui/core/Slider\");","module.exports = require(\"math.gl\");","module.exports = require(\"@material-ui/icons/CloudDownload\");","module.exports = require(\"@material-ui/core/Link\");","module.exports = require(\"@material-ui/icons/Settings\");","module.exports = require(\"@material-ui/icons/Close\");","module.exports = require(\"@material-ui/core/CircularProgress\");","module.exports = require(\"@material-ui/core/Popper\");","module.exports = require(\"@material-ui/core/MenuList\");","module.exports = require(\"@material-ui/core/ClickAwayListener\");","module.exports = require(\"zustand/shallow\");","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","module.exports = require(\"short-number\");","module.exports = require(\"@material-ui/core/Checkbox\");","module.exports = require(\"@material-ui/core/Select\");","module.exports = require(\"regenerator-runtime\");","import { makeStyles } from '@material-ui/core/styles';\n\nexport const useOptionStyles = makeStyles(theme => ({\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n  },\n  span: {\n    width: '70px',\n    textAlign: 'center',\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n  colors: {\n    '&:hover': {\n      backgroundColor: 'transparent',\n    },\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n  popper: {\n    zIndex: 4,\n  },\n}));\n\nexport const useExpansionPanelStyles = makeStyles(theme => ({\n  root: {\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n    width: '100%',\n    flexDirection: 'column',\n  },\n}));\n\nexport const useExpansionPanelSummaryStyles = makeStyles(theme => ({\n  root: {\n    marginBottom: theme.spacing(-2),\n    top: theme.spacing(-1),\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n    textOverflow: 'ellipsis',\n    overflow: 'hidden',\n    whiteSpace: 'nowrap',\n  },\n  expanded: {\n    marginBottom: theme.spacing(-3),\n    top: theme.spacing(-1),\n    textOverflow: 'ellipsis',\n    overflow: 'hidden',\n    whiteSpace: 'nowrap',\n  },\n  expandIcon: {\n    '&$expanded': {\n      top: theme.spacing(-1.3),\n    },\n  },\n}));\n","module.exports = require(\"@material-ui/icons/Add\");","import React from 'react';\n\nimport Grid from '@material-ui/core/Grid';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport Slider from '@material-ui/core/Slider';\nimport { useExpansionPanelStyles } from './styles';\n\nexport default function VectorLayerController(props) {\n  const {\n    label,\n    layer,\n    handleLayerChange,\n  } = props;\n\n  const slider = layer.opacity;\n  const isOn = layer.visible;\n\n  function handleSliderChange(v) {\n    if (layer.type === 'cells') {\n      const stroked = v < 0.7;\n      handleLayerChange({ ...layer, opacity: v, stroked });\n    } else {\n      handleLayerChange({ ...layer, opacity: v });\n    }\n  }\n\n  function handleCheckBoxChange(v) {\n    handleLayerChange({ ...layer, visible: v });\n  }\n\n  const classes = useExpansionPanelStyles();\n  return (\n    <Grid item style={{ marginTop: '10px' }}>\n      <Paper className={classes.root}>\n        <Typography\n          style={{\n            paddingTop: '15px',\n            paddingLeft: '10px',\n            marginBottom: '-5px',\n          }}\n        >\n          {label}\n        </Typography>\n        <Grid container direction=\"row\" justify=\"space-between\">\n          <Grid item xs={2}>\n            <Checkbox color=\"primary\" checked={isOn} onChange={(e, v) => handleCheckBoxChange(v)} />\n          </Grid>\n          <Grid item xs={9} style={{ paddingRight: '8px' }}>\n            <Slider\n              value={slider}\n              min={0}\n              max={1}\n              step={0.001}\n              onChange={(e, v) => handleSliderChange(v)}\n              style={{ marginTop: '7px' }}\n              orientation=\"horizontal\"\n            />\n          </Grid>\n        </Grid>\n      </Paper>\n    </Grid>\n  );\n}\n","import React from 'react';\nimport IconButton from '@material-ui/core/IconButton';\nimport LensIcon from '@material-ui/icons/Lens';\nimport { makeStyles } from '@material-ui/core/styles';\n\n\nimport { VIEWER_PALETTE } from '../utils';\n\nconst useStyles = makeStyles(theme => ({\n  container: {\n    width: '70px',\n    height: '40px',\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'center',\n    flexWrap: 'wrap',\n  },\n  button: {\n    padding: '3px',\n    width: '16px',\n  },\n  icon: {\n    width: '17px',\n    height: '17px',\n    stroke: theme.palette.action.selected,\n    'stroke-width': '1px',\n  },\n}));\n\nconst ColorPalette = ({ handleChange }) => {\n  const classes = useStyles();\n  return (\n    <div className={classes.container} aria-label=\"color-swatch\">\n      {VIEWER_PALETTE.map(color => (\n        <IconButton\n          className={classes.button}\n          key={color}\n          onClick={() => handleChange(color)}\n        >\n          <LensIcon\n            fontSize=\"small\"\n            style={{ color: `rgb(${color})` }}\n            className={classes.icon}\n          />\n        </IconButton>\n      ))}\n    </div>\n  );\n};\n\nexport default ColorPalette;\n","import React, { useReducer } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { PopperMenu, MuiSpan } from '../shared-mui/components';\n\nimport ColorPalette from './ColorPalette';\n\nconst useStyles = makeStyles(() => ({\n  menuButton: {\n    backgroundColor: 'transparent',\n  },\n  colors: {\n    '&:hover': {\n      backgroundColor: 'transparent',\n    },\n    paddingLeft: '2px',\n    paddingRight: '2px',\n  },\n}));\n\n/**\n * Dropdown for options for a channel on the three dots button.\n * @prop {function} handlePropertyChange Callback for changing property (color, IQR of sliders).\n * @prop {function} handleChannelRemove Callback for channel removal.\n * @prop {function} handleIQRUpdate Callback for IQR slider update.\n */\nfunction ChannelOptions({ handlePropertyChange, handleChannelRemove, handleIQRUpdate }) {\n  const [open, toggle] = useReducer(v => !v, false);\n\n  const classes = useStyles();\n\n  const handleColorSelect = (color) => {\n    handlePropertyChange('color', color);\n  };\n\n  const handleRemove = () => {\n    toggle();\n    handleChannelRemove();\n  };\n\n  return (\n    <PopperMenu\n      open={open}\n      toggle={toggle}\n      buttonIcon={<MoreVertIcon fontSize=\"small\" />}\n      buttonClassName={classes.menuButton}\n    >\n      <MenuItem dense disableGutters onClick={handleRemove}>\n        <MuiSpan>Remove</MuiSpan>\n      </MenuItem>\n      <MenuItem dense disableGutters onClick={handleIQRUpdate}>\n        <MuiSpan>Use IQR</MuiSpan>\n      </MenuItem>\n      <MenuItem dense disableGutters className={classes.colors}>\n        <ColorPalette handleChange={handleColorSelect} />\n      </MenuItem>\n    </PopperMenu>\n  );\n}\n\nexport default ChannelOptions;\n","import React, { useCallback, useState, useEffect } from 'react';\nimport { getChannelStats, DTYPE_VALUES } from '@hms-dbmi/viv';\n\nimport Checkbox from '@material-ui/core/Checkbox';\nimport Grid from '@material-ui/core/Grid';\nimport Slider from '@material-ui/core/Slider';\nimport Select from '@material-ui/core/Select';\nimport debounce from 'lodash/debounce';\nimport isEqual from 'lodash/isEqual';\n\nimport ChannelOptions from './ChannelOptions';\n\n// Returns an rgb string for display, and changes the color (arr)\n// to use a grey for light theme + white color or if the colormap is on.\nexport const toRgbUIString = (on, arr, theme) => {\n  const color = (on || (theme === 'light' && arr.every(i => i === 255))) ? [220, 220, 220] : arr;\n  return `rgb(${color})`;\n};\n\nfunction abbreviateNumber(value) {\n  // Return an abbreviated representation of value, in 5 characters or less.\n\n  const maxLength = 5;\n  let maxNaiveDigits = maxLength;\n\n  /* eslint-disable no-plusplus */\n  if (!Number.isInteger(value)) { --maxNaiveDigits; } // Wasted on \".\"\n  if (value < 1) { --maxNaiveDigits; } // Wasted on \"0.\"\n  /* eslint-disable no-plusplus */\n\n\n  const naive = Intl.NumberFormat(\n    'en-US',\n    {\n      maximumSignificantDigits: maxNaiveDigits,\n      useGrouping: false,\n    },\n  ).format(value);\n  if (naive.length <= maxLength) return naive;\n\n  // \"e+9\" consumes 3 characters, so if we even had two significant digits,\n  // it would take take us to six characters, including the decimal point.\n  return value.toExponential(0);\n}\n\n\n/**\n * Dropdown for selecting a channel.\n * @prop {function} handleChange Callback for each new selection.\n * @prop {boolean} disableOptions Whether or not to allow options.\n * @prop {array} channelOptions List of available selections, like ['DAPI', 'FITC', ...].\n * @prop {number} selectionIndex Current numeric index of a selection.\n */\nfunction ChannelSelectionDropdown({\n  handleChange,\n  disableOptions,\n  channelOptions,\n  selectionIndex,\n}) {\n  return (\n    <Select\n      native\n      value={selectionIndex}\n      onChange={e => handleChange(Number(e.target.value))}\n    >\n      {channelOptions.map((opt, i) => (\n        <option disabled={disableOptions} key={opt} value={i}>\n          {opt}\n        </option>\n      ))}\n    </Select>\n  );\n}\n\n/**\n * Slider for controlling current colormap.\n * @prop {string} color Current color for this channel.\n * @prop {arry} slider Current value of the slider.\n * @prop {function} handleChange Callback for each slider change.\n * @prop {array} domain Current max/min allowable slider values.\n */\nfunction ChannelSlider({\n  color, slider = [0, 0], handleChange, domain = [0, 0], dtype,\n}) {\n  const [min, max] = domain;\n  const handleChangeDebounced = useCallback(\n    debounce(handleChange, 3, { trailing: true }), [handleChange],\n  );\n  const step = max - min < 500 && dtype === '<f4' ? (max - min) / 500 : 1;\n  return (\n    <Slider\n      value={slider}\n      valueLabelFormat={abbreviateNumber}\n      onChange={(e, v) => handleChangeDebounced(v)}\n      valueLabelDisplay=\"auto\"\n      getAriaLabel={() => `${color}-${slider}`}\n      min={min}\n      max={max}\n      step={step}\n      orientation=\"horizontal\"\n      style={{ color, marginTop: '7px' }}\n    />\n  );\n}\n\n/**\n * Checkbox for toggling on/off of a channel.\n * @prop {string} color Current color for this channel.\n * @prop {boolean} checked Whether or not this channel is \"on\".\n * @prop {function} toggle Callback for toggling on/off.\n */\nfunction ChannelVisibilityCheckbox({ color, checked, toggle }) {\n  return (\n    <Checkbox\n      onChange={toggle}\n      checked={checked}\n      style={{ color, '&$checked': { color } }}\n    />\n  );\n}\n\n/**\n * Controller for the handling the colormapping sliders.\n * @prop {boolean} visibility Whether or not this channel is \"on\"\n * @prop {array} slider Current slider range.\n * @prop {array} color Current color for this channel.\n * @prop {array} domain Current max/min for this channel.\n * @prop {string} dimName Name of the dimensions this slider controls (usually \"channel\").\n * @prop {boolean} colormapOn Whether or not the colormap (viridis, magma etc.) is on.\n * @prop {object} channelOptions All available options for this dimension (i.e channel names).\n * @prop {function} handlePropertyChange Callback for when a property (color, slider etc.) changes.\n * @prop {function} handleChannelRemove When a channel is removed, this is called.\n * @prop {function} handleIQRUpdate When the IQR button is clicked, this is called.\n * @prop {number} selectionIndex The current numeric index of the selection.\n * @prop {boolean} disableOptions Whether or not channel options are be disabled (default: false).\n */\nfunction ChannelController({\n  visibility = false,\n  slider,\n  color,\n  channels,\n  channelId,\n  domainType: newDomainType,\n  dimName,\n  theme,\n  loader,\n  colormapOn,\n  channelOptions,\n  handlePropertyChange,\n  handleChannelRemove,\n  handleIQRUpdate,\n  selectionIndex,\n  disableOptions = false,\n}) {\n  const { dtype } = loader;\n  const [domain, setDomain] = useState(null);\n  const [domainType, setDomainType] = useState(null);\n  const [selection, setSelection] = useState([{ ...channels[channelId].selection }]);\n  const rgbColor = toRgbUIString(colormapOn, color, theme);\n\n  useEffect(() => {\n    let mounted = true;\n    if (dtype && loader && channels) {\n      const loaderSelection = [\n        { ...channels[channelId].selection },\n      ];\n      let domains;\n      const hasDomainChanged = newDomainType !== domainType;\n      const hasSelectionChanged = !isEqual(loaderSelection, selection);\n      if (hasDomainChanged || hasSelectionChanged) {\n        if (newDomainType === 'Full') {\n          domains = [[0, DTYPE_VALUES[dtype].max]];\n          const [newDomain] = domains;\n          if (mounted) {\n            setDomain(newDomain);\n            setDomainType(newDomainType);\n            if (hasSelectionChanged) {\n              setSelection(loaderSelection);\n            }\n          }\n        } else {\n          getChannelStats({ loader, loaderSelection }).then((stats) => {\n            domains = stats.map(stat => stat.domain);\n            const [newDomain] = domains;\n            if (mounted) {\n              setDomain(newDomain);\n              setDomainType(newDomainType);\n              if (hasSelectionChanged) {\n                setSelection(loaderSelection);\n              }\n            }\n          });\n        }\n      }\n    }\n    return () => { mounted = false; };\n  }, [domainType, channels, channelId, loader, dtype, newDomainType, selection]);\n\n  /* A valid selection is defined by an object where the keys are\n  *  the name of a dimension of the data, and the values are the\n  *  index of the image along that particular dimension.\n  *\n  *  Since we currently only support making a selection along one\n  *  addtional dimension (i.e. the dropdown just has channels or mz)\n  *  we have a helper function to create the selection.\n  *\n  *  e.g { channel: 2 } // channel dimension, third channel\n  */\n  const createSelection = index => ({ [dimName]: index });\n  return (\n    <Grid container direction=\"column\" m={1} justify=\"center\">\n      <Grid container direction=\"row\" justify=\"space-between\">\n        <Grid item xs={10}>\n          <ChannelSelectionDropdown\n            handleChange={v => handlePropertyChange('selection', createSelection(v))}\n            selectionIndex={selectionIndex}\n            disableOptions={disableOptions}\n            channelOptions={channelOptions}\n          />\n        </Grid>\n        <Grid item xs={1} style={{ marginTop: '4px' }}>\n          <ChannelOptions\n            handlePropertyChange={handlePropertyChange}\n            handleChannelRemove={handleChannelRemove}\n            handleIQRUpdate={handleIQRUpdate}\n          />\n        </Grid>\n      </Grid>\n      <Grid container direction=\"row\" justify=\"space-between\">\n        <Grid item xs={2}>\n          <ChannelVisibilityCheckbox\n            color={rgbColor}\n            checked={visibility}\n            toggle={() => handlePropertyChange('visible', !visibility)}\n          />\n        </Grid>\n        <Grid item xs={9}>\n          {domain && (\n            <ChannelSlider\n              color={rgbColor}\n              slider={slider}\n              domain={domain}\n              dtype={dtype}\n              handleChange={v => handlePropertyChange('slider', v)}\n            />\n          )}\n        </Grid>\n      </Grid>\n    </Grid>\n  );\n}\n\nexport default ChannelController;\n","import React from 'react';\n\nimport Grid from '@material-ui/core/Grid';\nimport Slider from '@material-ui/core/Slider';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Select from '@material-ui/core/Select';\nimport Checkbox from '@material-ui/core/Checkbox';\n\nimport { COLORMAP_OPTIONS } from '../utils';\nimport { DEFAULT_RASTER_DOMAIN_TYPE } from '../spatial/constants';\n\nconst DOMAIN_OPTIONS = ['Full', 'Min/Max'];\n\n/**\n * Wrapper for the dropdown that selects a colormap (None, viridis, magma, etc.).\n * @prop {string} value Currently selected value for the colormap.\n * @prop {string} inputId Css id.\n * @prop {function} handleChange Callback for every change in colormap.\n */\nfunction ColormapSelect({ value, inputId, handleChange }) {\n  return (\n    <Select\n      native\n      onChange={e => handleChange(e.target.value === '' ? null : e.target.value)}\n      value={value}\n      inputProps={{ name: 'colormap', id: inputId }}\n      style={{ width: '100%' }}\n    >\n      <option aria-label=\"None\" value=\"\">None</option>\n      {COLORMAP_OPTIONS.map(name => (\n        <option key={name} value={name}>\n          {name}\n        </option>\n      ))}\n    </Select>\n  );\n}\n\nfunction TransparentColorCheckbox({ value, handleChange }) {\n  return (\n    <Checkbox\n      style={{ float: 'left', padding: 0 }}\n      color=\"default\"\n      onChange={() => {\n        if (value) {\n          handleChange(null);\n        } else {\n          handleChange([0, 0, 0]);\n        }\n      }}\n      checked={Boolean(value)}\n    />\n  );\n}\n\n/**\n * Wrapper for the slider that updates opacity.\n * @prop {string} value Currently selected value between 0 and 1.\n * @prop {function} handleChange Callback for every change in opacity.\n */\nfunction OpacitySlider({ value, handleChange }) {\n  return (\n    <Slider\n      value={value}\n      onChange={(e, v) => handleChange(v)}\n      valueLabelDisplay=\"auto\"\n      getAriaLabel={() => 'opacity slider'}\n      min={0}\n      max={1}\n      step={0.01}\n      orientation=\"horizontal\"\n      style={{ marginTop: '7px' }}\n    />\n  );\n}\n\n/**\n * Wrapper for the dropdown that chooses the domain type.\n * @prop {string} value Currently selected value (i.e 'Max/Min').\n * @prop {string} inputId Css id.\n * @prop {function} handleChange Callback for every change in domain.\n */\nfunction SliderDomainSelector({ value, inputId, handleChange }) {\n  return (\n    <Select\n      native\n      onChange={e => handleChange(e.target.value)}\n      value={value}\n      inputProps={{ name: 'domain-selector', id: inputId }}\n      style={{ width: '100%' }}\n    >\n      {DOMAIN_OPTIONS.map(name => (\n        <option key={name} value={name}>\n          {name}\n        </option>\n      ))}\n    </Select>\n  );\n}\n\n/**\n * Wrapper for the slider that chooses global selections (z, t etc.).\n * @prop {string} field The dimension this selects for (z, t etc.).\n * @prop {number} value Currently selected index (1, 4, etc.).\n * @prop {function} handleChange Callback for every change in selection.\n * @prop {function} possibleValues All available values for the field.\n */\nfunction GlobalSelectionSlider({\n  field,\n  value,\n  handleChange,\n  possibleValues,\n}) {\n  return (\n    <Slider\n      value={value}\n      // See https://github.com/hubmapconsortium/vitessce-image-viewer/issues/176 for why\n      // we have the two handlers.\n      onChange={\n        (event, newValue) => {\n          handleChange({ selection: { [field]: newValue }, event });\n        }\n      }\n      onChangeCommitted={\n        (event, newValue) => {\n          handleChange({ selection: { [field]: newValue }, event });\n        }\n      }\n      valueLabelDisplay=\"auto\"\n      getAriaLabel={() => `${field} slider`}\n      marks={possibleValues.map(val => ({ value: val }))}\n      min={Number(possibleValues[0])}\n      max={Number(possibleValues.slice(-1))}\n      orientation=\"horizontal\"\n      style={{ marginTop: '7px' }}\n      step={null}\n    />\n  );\n}\n\n/**\n * Wrapper for each of the options to show its name and then its UI component.\n * @prop {string} name Display name for option.\n * @prop {number} opacity Current opacity value.\n * @prop {string} inputId An id for css.\n * @prop {object} children Components to be rendered next to the name (slider, dropdown etc.).\n */\nfunction LayerOption({ name, inputId, children }) {\n  return (\n    <Grid container direction=\"row\" alignItems=\"center\" justify=\"center\">\n      <Grid item xs={6}>\n        <InputLabel htmlFor={inputId}>{name}:</InputLabel>\n      </Grid>\n      <Grid item xs={6}>\n        {children}\n      </Grid>\n    </Grid>\n  );\n}\n\n/**\n * Gloabl options for all channels (opacity, colormap, etc.).\n * @prop {string} colormap What colormap is currently selected (None, viridis etc.).\n * @prop {number} opacity Current opacity value.\n * @prop {function} handleColormapChange Callback for when colormap changes.\n * @prop {function} handleOpacityChange Callback for when opacity changes.\n * @prop {object} globalControlDimensions All available options for global control (z and t).\n * @prop {function} handleGlobalChannelsSelectionChange Callback for global selection changes.\n * @prop {function} handleDomainChange Callback for domain type changes (full or min/max).\n * @prop {array} channels Current channel object for inferring the current global selection.\n * @prop {array} dimensions Currently available dimensions (channel, z, t etc.).\n * @prop {string} domainType One of Max/Min or Full (soon presets as well).\n * @prop {boolean} isRgb Whether or not the image is rgb (so we don't need colormap controllers).\n */\nfunction LayerOptions({\n  colormap,\n  opacity,\n  handleColormapChange,\n  handleOpacityChange,\n  handleTransparentColorChange,\n  globalControlDimensions,\n  globalDimensionValues,\n  handleGlobalChannelsSelectionChange,\n  handleDomainChange,\n  transparentColor,\n  channels,\n  dimensions,\n  domainType,\n  isRgb,\n}) {\n  const hasDimensionsAndChannels = dimensions.length > 0 && channels.length > 0;\n  return (\n    <Grid container direction=\"column\" style={{ width: '100%' }}>\n      {!isRgb ? (\n        <>\n          <Grid item>\n            <LayerOption name=\"Colormap\" inputId=\"colormap-select\">\n              <ColormapSelect\n                value={colormap || ''}\n                inputId=\"colormap-select\"\n                handleChange={handleColormapChange}\n              />\n            </LayerOption>\n          </Grid>\n          <Grid item>\n            <LayerOption name=\"Domain\" inputId=\"domain-selector\">\n              <SliderDomainSelector\n                value={domainType || DEFAULT_RASTER_DOMAIN_TYPE}\n                handleChange={(value) => {\n                  handleDomainChange(value);\n                }}\n              />\n            </LayerOption>\n          </Grid>\n        </>\n      ) : null}\n      <Grid item>\n        <LayerOption name=\"Opacity\" inputId=\"opacity-slider\">\n          <OpacitySlider value={opacity} handleChange={handleOpacityChange} />\n        </LayerOption>\n      </Grid>\n      <Grid item>\n        <LayerOption\n          name=\"Zero Transparent\"\n          inputId=\"transparent-color-selector\"\n        >\n          <TransparentColorCheckbox\n            value={transparentColor}\n            handleChange={handleTransparentColorChange}\n          />\n        </LayerOption>\n      </Grid>\n      {hasDimensionsAndChannels\n        && globalControlDimensions.map((dimension) => {\n          const { field, values } = dimension;\n          // If there is only one value in the dimension, do not return a slider.\n          return (\n            values.length > 1 && (\n              <LayerOption name={field} inputId={`${field}-slider`} key={field}>\n                <GlobalSelectionSlider\n                  field={field}\n                  value={globalDimensionValues[field]}\n                  handleChange={handleGlobalChannelsSelectionChange}\n                  possibleValues={values}\n                />\n              </LayerOption>\n            )\n          );\n        })}\n    </Grid>\n  );\n}\n\nexport default LayerOptions;\n","import React, { useState } from 'react';\nimport { getChannelStats, DTYPE_VALUES, MAX_SLIDERS_AND_CHANNELS } from '@hms-dbmi/viv';\n\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport AddIcon from '@material-ui/icons/Add';\n\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport ChannelController from './ChannelController';\nimport LayerOptions from './LayerOptions';\n\nimport { useExpansionPanelStyles, useExpansionPanelSummaryStyles } from './styles';\nimport { GLOBAL_SLIDER_DIMENSION_FIELDS } from '../spatial/constants';\n\n\n// Set the domain of the sliders based on either a full range or min/max.\nasync function getDomainsAndSliders(loader, loaderSelection, domainType) {\n  let domains;\n  const stats = await getChannelStats({ loader, loaderSelection });\n  const sliders = stats.map(stat => stat.autoSliders);\n  if (domainType === 'Min/Max') {\n    domains = stats.map(stat => stat.domain);\n  } if (domainType === 'Full') {\n    domains = loaderSelection.map(() => [0, DTYPE_VALUES[loader.dtype].max]);\n  }\n  return { domains, sliders };\n}\n\nconst buttonStyles = { borderStyle: 'dashed', marginTop: '10px', fontWeight: 400 };\n\n/**\n * Controller for the various imaging options (color, opactiy, sliders etc.)\n * @prop {object} imageData Image config object, one of the `images` in the raster schema.\n * @prop {object} layerId Randomly generated id for the image layer that this controller handles.\n * @prop {function} handleLayerRemove Callback for handling the removal of a layer.\n * @prop {object} loader Loader object for the current imaging layer.\n * @prop {function} handleLayerChange Callback for handling the changing of layer properties.\n */\nexport default function RasterLayerController(props) {\n  const {\n    layer,\n    name,\n    loader,\n    theme,\n    handleLayerRemove,\n    handleLayerChange,\n  } = props;\n\n  const {\n    colormap,\n    opacity,\n    channels,\n    transparentColor,\n  } = layer;\n  const firstSelection = channels[0]?.selection || {};\n\n  const { dimensions } = loader;\n  const [domainType, setDomainType] = useState(layer.domainType);\n  const [globalDimensionValues, setGlobalDimensionValues] = useState(\n    GLOBAL_SLIDER_DIMENSION_FIELDS\n      .filter(field => firstSelection[field])\n      .reduce((o, key) => ({ ...o, [key]: firstSelection[key] }), {}),\n  );\n\n  function setColormap(v) {\n    handleLayerChange({ ...layer, colormap: v });\n  }\n\n  function setOpacity(v) {\n    handleLayerChange({ ...layer, opacity: v });\n  }\n\n  function setChannels(v) {\n    handleLayerChange({ ...layer, channels: v });\n  }\n  function setTransparentColor(v) {\n    handleLayerChange({ ...layer, transparentColor: v });\n  }\n\n  function setChannelsAndDomainType(newChannels, newDomainType) {\n    handleLayerChange({\n      ...layer,\n      channels: newChannels,\n      domainType: newDomainType,\n    });\n  }\n\n  function setChannel(v, i) {\n    const newChannels = [...channels];\n    newChannels[i] = v;\n    handleLayerChange({ ...layer, channels: newChannels });\n  }\n\n  function addChannel(v) {\n    const newChannels = [...channels, v];\n    handleLayerChange({ ...layer, channels: newChannels });\n  }\n\n  function removeChannel(i) {\n    const newChannels = [...channels];\n    newChannels.splice(i, 1);\n    handleLayerChange({ ...layer, channels: newChannels });\n  }\n\n  // Handles adding a channel, creating a default selection\n  // for the current global settings and domain type.\n  const handleChannelAdd = async () => {\n    const selection = {};\n    dimensions.forEach((dimension) => {\n      // Set new image to default selection for non-global selections (0)\n      // and use current global selection otherwise.\n      selection[dimension.field] = GLOBAL_SLIDER_DIMENSION_FIELDS.includes(dimension.field)\n        ? globalDimensionValues[dimension.field]\n        : 0;\n    });\n    const { domains, sliders } = await getDomainsAndSliders(loader, [selection], domainType);\n    const domain = domains[0];\n    const slider = sliders[0] || domain;\n    const color = [255, 255, 255];\n    const visible = true;\n    addChannel({\n      selection, slider, visible, color,\n    });\n  };\n\n  const handleDomainChange = async (value) => {\n    setDomainType(value);\n    const loaderSelection = channels.map(\n      channel => channel.selection,\n    );\n    let sliders = channels.map(\n      channel => channel.slider,\n    );\n    const { domains } = await getDomainsAndSliders(\n      loader,\n      loaderSelection,\n      value,\n    );\n\n    // If it's the right-most slider, we take the minimum of that and the new value.\n    // Otherwise, we use the maximum of the left-hand side and the new value.\n    sliders = sliders.map(\n      (slider, i) => {\n        const [left, right] = slider;\n        return [\n          Math.max(left, domains[i][0]),\n          Math.min(right, domains[i][1]),\n        ];\n      },\n    );\n\n    const newChannels = channels.map((c, i) => ({ ...c, slider: sliders[i] }));\n    setChannelsAndDomainType(newChannels, value);\n  };\n\n  // This call updates all channel selections with new global selection from the UI.\n  const handleGlobalChannelsSelectionChange = async ({ selection, event }) => {\n    const loaderSelection = channels.map(channel => ({\n      ...channel.selection,\n      ...selection,\n    }));\n    const mouseUp = event.type === 'mouseup';\n    // Only update domains on a mouseup event for the same reason as above.\n    const { sliders } = mouseUp\n      ? await getDomainsAndSliders(loader, loaderSelection, domainType)\n      : { domains: [], sliders: [] };\n    if (mouseUp) {\n      const newChannels = channels.map((c, i) => ({\n        ...c,\n        slider: sliders[i],\n        selection: { ...c.selection, ...selection },\n      }));\n      setChannels(newChannels);\n    }\n    setGlobalDimensionValues(prev => ({ ...prev, ...selection }));\n  };\n\n  let channelControllers = [];\n  if (dimensions.length > 0) {\n    const channelDimensions = loader.type === 'ome-tiff' ? dimensions.find(c => c.field === 'channel') : dimensions[0];\n    const { values: channelOptions, field: dimName } = channelDimensions;\n    // Create the channel controllers for each channel.\n    channelControllers = channels.map(\n      // c is an object like { color, selection, slider, visible }.\n      (c, channelId) => {\n        // Change one property of a channel (for now - soon\n        // nested structures allowing for multiple z/t selecitons at once, for example).\n        const handleChannelPropertyChange = async (property, value) => {\n          // property is something like \"selection\" or \"slider.\"\n          // value is the actual change, like { channel: \"DAPI\" }.\n          const update = { [property]: value };\n          if (property === 'selection') {\n            update.selection = { ...globalDimensionValues, ...update.selection };\n            const loaderSelection = [\n              { ...channels[channelId][property], ...value },\n            ];\n            const { sliders } = await getDomainsAndSliders(\n              loader, loaderSelection, domainType,\n            );\n            [update.slider] = sliders;\n          }\n          setChannel({ ...c, ...update }, channelId);\n        };\n        const handleChannelRemove = () => {\n          removeChannel(channelId);\n        };\n        const handleIQRUpdate = async () => {\n          const stats = await getChannelStats(\n            { loader, loaderSelection: [channels[channelId].selection] },\n          );\n          const { q1, q3 } = stats[0];\n          setChannel({ ...c, slider: [q1, q3] }, channelId);\n        };\n        return (\n          <Grid\n            // eslint-disable-next-line react/no-array-index-key\n            key={`channel-controller-${channelId}`}\n            item\n            style={{ width: '100%' }}\n          >\n            <ChannelController\n              dimName={dimName}\n              visibility={c.visible}\n              selectionIndex={c.selection[dimName]}\n              slider={c.slider}\n              color={c.color}\n              channels={channels}\n              channelId={channelId}\n              domainType={domainType}\n              loader={loader}\n              globalDimensionValues={globalDimensionValues}\n              theme={theme}\n              channelOptions={channelOptions}\n              colormapOn={Boolean(colormap)}\n              handlePropertyChange={handleChannelPropertyChange}\n              handleChannelRemove={handleChannelRemove}\n              handleIQRUpdate={handleIQRUpdate}\n            />\n          </Grid>\n        );\n      },\n    );\n  }\n\n  const classes = useExpansionPanelStyles();\n  const summaryClasses = useExpansionPanelSummaryStyles();\n  return (\n    <ExpansionPanel defaultExpanded className={classes.root}>\n      <ExpansionPanelSummary\n        expandIcon={<ExpandMoreIcon />}\n        aria-controls={`layer-${name}-controls`}\n        classes={{ ...summaryClasses }}\n      >\n        {name}\n      </ExpansionPanelSummary>\n      <ExpansionPanelDetails className={classes.root}>\n        <Grid item>\n          <LayerOptions\n            channels={channels}\n            dimensions={dimensions}\n            opacity={opacity}\n            colormap={colormap}\n            transparentColor={transparentColor}\n            domainType={domainType}\n            // Only allow for global dimension controllers that\n            // exist in the `dimensions` part of the loader.\n            globalControlDimensions={\n              dimensions.filter(\n                dimension => GLOBAL_SLIDER_DIMENSION_FIELDS.includes(dimension.field),\n              )\n            }\n            globalDimensionValues={globalDimensionValues}\n            handleOpacityChange={setOpacity}\n            handleColormapChange={setColormap}\n            handleGlobalChannelsSelectionChange={\n              handleGlobalChannelsSelectionChange\n            }\n            handleTransparentColorChange={setTransparentColor}\n            isRgb={loader.isRgb}\n            handleDomainChange={handleDomainChange}\n          />\n        </Grid>\n        {!loader.isRgb ? channelControllers : null}\n        {!loader.isRgb && (\n          <Grid item>\n            <Button\n              disabled={channels.length === MAX_SLIDERS_AND_CHANNELS}\n              onClick={handleChannelAdd}\n              fullWidth\n              variant=\"outlined\"\n              style={buttonStyles}\n              startIcon={<AddIcon />}\n              size=\"small\"\n            >\n              Add Channel\n            </Button>\n          </Grid>\n        )}\n        <Grid item>\n          <Button\n            onClick={handleLayerRemove}\n            fullWidth\n            variant=\"outlined\"\n            style={buttonStyles}\n            size=\"small\"\n          >\n            Remove Image Layer\n          </Button>\n        </Grid>\n      </ExpansionPanelDetails>\n    </ExpansionPanel>\n  );\n}\n","module.exports = require(\"@material-ui/core/Button\");","import React, { useReducer } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AddIcon from '@material-ui/icons/Add';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport { PopperMenu } from '../shared-mui/components';\n\nconst useStyles = makeStyles(() => ({\n  addButton: {\n    marginTop: '10px',\n    marginBottom: '10px',\n    fontWeight: 400,\n  },\n}));\n\nfunction ImageAddIcon() {\n  return (\n    <>\n      <AddIcon />\n      Add Image Layer\n    </>\n  );\n}\n\nfunction ImageAddButton({ imageOptions, handleImageAdd }) {\n  const [open, toggle] = useReducer(v => !v, false);\n  const classes = useStyles();\n\n  const handleAdd = (imgData) => {\n    toggle();\n    handleImageAdd(imgData);\n  };\n\n  if (!imageOptions) return null;\n  return (\n    <PopperMenu\n      open={open}\n      toggle={toggle}\n      buttonIcon={<ImageAddIcon />}\n      buttonClassName={classes.addButton}\n    >\n      {imageOptions.map((imgData, i) => (\n        <MenuItem dense key={imgData.name} onClick={() => handleAdd(i)}>\n          <span>{imgData.name}</span>\n        </MenuItem>\n      ))}\n    </PopperMenu>\n  );\n}\n\nexport default ImageAddButton;\n","/* eslint-disable dot-notation */\nimport React, { useEffect } from 'react';\nimport Grid from '@material-ui/core/Grid';\nimport TitleInfo from '../TitleInfo';\nimport RasterLayerController from './RasterLayerController';\nimport VectorLayerController from './VectorLayerController';\nimport ImageAddButton from './ImageAddButton';\nimport { useReady } from '../hooks';\nimport { useRasterData } from '../data-hooks';\nimport { useCoordination, useLoaders } from '../../app/state/hooks';\nimport { COMPONENT_COORDINATION_TYPES } from '../../app/state/coordination';\nimport { initializeLayerChannels } from '../spatial/utils';\nimport { DEFAULT_RASTER_LAYER_PROPS } from '../spatial/constants';\n\nconst LAYER_CONTROLLER_DATA_TYPES = ['raster'];\n\nfunction LayerControllerSubscriber(props) {\n  const {\n    coordinationScopes,\n    removeGridComponent,\n    theme,\n  } = props;\n\n  const loaders = useLoaders();\n\n  // Get \"props\" from the coordination space.\n  const [{\n    dataset,\n    spatialLayers: layers,\n  }, {\n    setSpatialLayers: setLayers,\n  }] = useCoordination(COMPONENT_COORDINATION_TYPES.layerController, coordinationScopes);\n\n  const [isReady, setItemIsReady, resetReadyItems] = useReady(\n    LAYER_CONTROLLER_DATA_TYPES,\n  );\n\n  // Reset loader progress when the dataset has changed.\n  useEffect(() => {\n    resetReadyItems();\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [loaders, dataset]);\n\n  // Get data from loaders using the data hooks.\n  // eslint-disable-next-line no-unused-vars\n  const [raster, imageLayerLoaders, imageLayerMeta] = useRasterData(\n    loaders, dataset, setItemIsReady, () => {}, false,\n  );\n\n  const handleImageAdd = async (index) => {\n    const loader = imageLayerLoaders[index];\n    const newChannels = await initializeLayerChannels(loader);\n    const newLayer = {\n      type: 'raster',\n      index,\n      modelMatrix: imageLayerMeta[index]?.metadata?.transform?.matrix,\n      ...DEFAULT_RASTER_LAYER_PROPS,\n      channels: newChannels,\n    };\n    const newLayers = [...layers, newLayer];\n    setLayers(newLayers);\n  };\n\n  function handleLayerChange(newLayer, i) {\n    const newLayers = [...layers];\n    newLayers[i] = newLayer;\n    setLayers(newLayers);\n  }\n\n  function handleLayerRemove(i) {\n    const newLayers = [...layers];\n    newLayers.splice(i, 1);\n    setLayers(newLayers);\n  }\n\n  return (\n    <TitleInfo\n      title=\"Spatial Layers\"\n      isScroll\n      removeGridComponent={removeGridComponent}\n      theme={theme}\n      isReady={isReady}\n    >\n      <div className=\"layer-controller-container\">\n        {layers && layers.map((layer, i) => {\n          if (layer.type === 'cells') {\n            return (\n              <VectorLayerController\n                key={`${dataset}-cells`}\n                label=\"Cell Segmentations\"\n                layer={layer}\n                handleLayerChange={v => handleLayerChange(v, i)}\n              />\n            );\n          } if (layer.type === 'molecules') {\n            return (\n              <VectorLayerController\n                key={`${dataset}-molecules`}\n                label=\"Molecules\"\n                layer={layer}\n                handleLayerChange={v => handleLayerChange(v, i)}\n              />\n            );\n          } if (layer.type === 'raster') {\n            const { index } = layer;\n            const loader = imageLayerLoaders[index];\n            const layerMeta = imageLayerMeta[index];\n            return (loader && layerMeta ? (\n              // eslint-disable-next-line react/no-array-index-key\n              <Grid key={`${dataset}-raster-${index}-${i}`} item style={{ marginTop: '10px' }}>\n                <RasterLayerController\n                  name={layerMeta.name}\n                  layer={layer}\n                  loader={loader}\n                  theme={theme}\n                  handleLayerChange={v => handleLayerChange(v, i)}\n                  handleLayerRemove={() => handleLayerRemove(i)}\n                />\n              </Grid>\n            ) : null);\n          }\n          return null;\n        })}\n        <Grid item>\n          <ImageAddButton\n            imageOptions={imageLayerMeta}\n            handleImageAdd={handleImageAdd}\n          />\n        </Grid>\n      </div>\n    </TitleInfo>\n  );\n}\n\nexport default LayerControllerSubscriber;\n","module.exports = require(\"@material-ui/core/ExpansionPanel\");","module.exports = require(\"@material-ui/core/ExpansionPanelSummary\");","module.exports = require(\"@material-ui/core/ExpansionPanelDetails\");","module.exports = require(\"@material-ui/icons/ExpandMore\");","module.exports = require(\"@material-ui/icons/MoreVert\");","module.exports = require(\"@material-ui/icons/Lens\");","module.exports = require(\"@material-ui/core/InputLabel\");","module.exports = require(\"@material-ui/core/Typography\");","export { default as LayerControllerSubscriber } from './LayerControllerSubscriber';\nexport { default as RasterLayerController } from './RasterLayerController';\nexport { default as VectorLayerController } from './VectorLayerController';\n"],"sourceRoot":""}